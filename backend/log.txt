2025-07-11 19:38:55,554 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:38:55] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:38:55,569 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:38:55] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:38:55,586 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:38:55] "GET /api/profile HTTP/1.1" 200 -
2025-07-11 19:38:59,210 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:38:59] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:39:01,574 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:39:01] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:39:40,399 - werkzeug - INFO -  * Detected change in '/app/src/routes/settings.py', reloading
2025-07-11 19:39:40,845 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:39:41,917 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:39:41,918 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:39:51,436 - app - INFO - User test2 requesting account deactivation
2025-07-11 19:39:51,436 - app - ERROR - Error deactivating account for user test2: name 'get_db_connection' is not defined
2025-07-11 19:39:51,440 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:39:51] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:40:07,635 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:07] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-11 19:40:07,712 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:07] "POST /api/login HTTP/1.1" 200 -
2025-07-11 19:40:07,723 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:07] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:40:07,732 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:07] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:40:11,137 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:11] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:40:11,144 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:11] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:40:11,150 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:11] "GET /api/profile HTTP/1.1" 200 -
2025-07-11 19:40:14,252 - app - INFO - User test3 requesting account deactivation
2025-07-11 19:40:14,253 - app - ERROR - Error deactivating account for user test3: name 'get_db_connection' is not defined
2025-07-11 19:40:14,254 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:14] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:40:46,630 - werkzeug - INFO -  * Detected change in '/app/src/routes/settings.py', reloading
2025-07-11 19:40:46,894 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:40:47,936 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:40:47,937 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:40:53,357 - app - INFO - User test3 requesting account deactivation
2025-07-11 19:40:53,359 - app - ERROR - Error deactivating account for user test3: 'sqlite3.Cursor' object does not support the context manager protocol
2025-07-11 19:40:53,367 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:53] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:40:57,872 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:57] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:40:57,882 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:57] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:40:59,525 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:59] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:40:59,548 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:59] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:41:00,567 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:41:00] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:41:00,574 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:41:00] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:41:03,550 - app - INFO - User test3 requesting account deactivation
2025-07-11 19:41:03,551 - app - ERROR - Error deactivating account for user test3: 'sqlite3.Cursor' object does not support the context manager protocol
2025-07-11 19:41:03,552 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:41:03] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:41:26,960 - werkzeug - INFO -  * Detected change in '/app/src/routes/settings.py', reloading
2025-07-11 19:41:27,246 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:41:28,278 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:41:28,279 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:41:34,373 - app - INFO - User test3 requesting account deactivation
2025-07-11 19:41:34,375 - app - ERROR - Error deactivating account for user test3: near "%": syntax error
2025-07-11 19:41:34,383 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:41:34] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:41:54,950 - werkzeug - INFO -  * Detected change in '/app/src/routes/settings.py', reloading
2025-07-11 19:41:55,208 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:41:56,246 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:41:56,247 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:41:59,522 - app - INFO - User test3 requesting account deactivation
2025-07-11 19:41:59,525 - app - INFO - Deleted 0 records from ai_user_data for user test3
2025-07-11 19:41:59,525 - app - INFO - Deleted 0 records from vocab_log for user test3
2025-07-11 19:41:59,527 - app - INFO - Deleted 3 records from topic_memory for user test3
2025-07-11 19:41:59,528 - app - ERROR - Error deactivating account for user test3: no such table: submissions
2025-07-11 19:41:59,531 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:41:59] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:43:23,754 - werkzeug - INFO -  * Detected change in '/app/src/routes/settings.py', reloading
2025-07-11 19:43:24,017 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:43:25,080 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:43:25,081 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:43:33,491 - app - INFO - User test3 requesting account deactivation
2025-07-11 19:43:33,494 - app - INFO - Deleted 0 records from ai_user_data for user test3
2025-07-11 19:43:33,494 - app - INFO - Deleted 0 records from vocab_log for user test3
2025-07-11 19:43:33,496 - app - INFO - Deleted 3 records from topic_memory for user test3
2025-07-11 19:43:33,496 - app - INFO - Deleted 0 records from results for user test3
2025-07-11 19:43:33,496 - app - INFO - Deleted 0 records from exercise_submissions for user test3
2025-07-11 19:43:33,497 - app - INFO - Deleted 0 records from lesson_progress for user test3
2025-07-11 19:43:33,498 - app - INFO - Deleted 1 records from users for user test3
2025-07-11 19:43:33,502 - app - INFO - Destroyed all sessions for user test3
2025-07-11 19:43:33,504 - app - INFO - Account deactivation completed for user test3. Deleted: AI data=0, vocab=0, topic_memory=3, results=0, exercise_submissions=0, lesson_progress=0, user=1
2025-07-11 19:43:33,506 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:33] "POST /api/settings/deactivate HTTP/1.1" 200 -
2025-07-11 19:43:43,472 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:43] "[31m[1mPOST /api/signup HTTP/1.1[0m" 400 -
2025-07-11 19:43:48,089 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:48] "POST /api/login HTTP/1.1" 200 -
2025-07-11 19:43:48,099 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:48] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:43:48,112 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:48] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:43:48,141 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:48] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 19:43:51,437 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:43:51,437 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:43:51,437 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:43:51,439 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:43:51,439 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:43:51,440 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:51] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:43:51,447 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:43:51,447 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:43:51,447 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:43:51,448 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:43:51,448 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:43:51,449 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:51] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:43:54,496 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:54] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:43:54,504 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:54] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:43:54,511 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:54] "GET /api/profile HTTP/1.1" 200 -
2025-07-11 19:43:57,867 - app - INFO - User test1 requesting account deactivation
2025-07-11 19:43:57,871 - app - INFO - Deleted 1 records from ai_user_data for user test1
2025-07-11 19:43:57,872 - app - INFO - Deleted 0 records from vocab_log for user test1
2025-07-11 19:43:57,874 - app - INFO - Deleted 24 records from topic_memory for user test1
2025-07-11 19:43:57,874 - app - INFO - Deleted 0 records from results for user test1
2025-07-11 19:43:57,875 - app - INFO - Deleted 7 records from exercise_submissions for user test1
2025-07-11 19:43:57,876 - app - INFO - Deleted 0 records from lesson_progress for user test1
2025-07-11 19:43:57,877 - app - INFO - Deleted 1 records from users for user test1
2025-07-11 19:43:57,885 - app - INFO - Destroyed all sessions for user test1
2025-07-11 19:43:57,885 - app - INFO - Account deactivation completed for user test1. Deleted: AI data=1, vocab=0, topic_memory=24, results=0, exercise_submissions=7, lesson_progress=0, user=1
2025-07-11 19:43:57,889 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:57] "POST /api/settings/deactivate HTTP/1.1" 200 -
2025-07-11 19:44:04,462 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:04] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-11 19:44:04,538 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:04] "POST /api/login HTTP/1.1" 200 -
2025-07-11 19:44:04,544 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:04] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:44:04,552 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:04] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:44:07,482 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:07] "POST /api/user-level HTTP/1.1" 200 -
2025-07-11 19:44:07,502 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:07] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 19:44:08,417 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:44:08,418 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:44:08,418 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:44:08,419 - routes.ai.training_routes - INFO - Generating new training exercises for user test1
2025-07-11 19:44:08,420 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_training_exercises for user test1
2025-07-11 19:44:08,420 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:08,421 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user test1
2025-07-11 19:44:08,421 - routes.ai.helpers.exercise_helpers - INFO - Detected new user test1, generating two unique blocks with different contexts
2025-07-11 19:44:08,421 - routes.ai.helpers.exercise_helpers - INFO - Generating blocks for new user test1
2025-07-11 19:44:08,422 - routes.ai.helpers.exercise_helpers - INFO - Generating first block for new user test1
2025-07-11 19:44:08,425 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:08,426 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user test1
2025-07-11 19:44:08,426 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 0 recent questions for user test1
2025-07-11 19:44:08,426 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-11 19:44:08,426 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:44:08,426 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-11 19:44:08,426 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:44:08,426 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:44:08,427 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=0
2025-07-11 19:44:08,429 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:44:08,435 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:12,939 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:12,942 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:44:12,942 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1197 characters
2025-07-11 19:44:12,943 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:44:12,943 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:44:12,945 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:44:12,945 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:44:12,946 - routes.ai.helpers.exercise_helpers - INFO - Generated first block for new user test1 with 3 exercises
2025-07-11 19:44:12,946 - routes.ai.helpers.exercise_helpers - INFO - Extracted 3 questions from first block for new user test1
2025-07-11 19:44:12,946 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:44:12,947 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:12,949 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user test1
2025-07-11 19:44:12,949 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 3 total questions
2025-07-11 19:44:12,958 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:44:12,959 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:44:12,960 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for test1 after after updating exercise history: {
  "username": "test1",
  "exercises": null,
  "next_exercises": null,
  "exercises_updated_at": null,
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Wir _____ im Park. (We are in the park.)\", \"She is a teacher.\", \"Ich _____ einen Hund. (I have a dog.)\"]"
}
2025-07-11 19:44:13,062 - routes.ai.helpers.exercise_helpers - INFO - Generating second block for new user test1 with different context
2025-07-11 19:44:13,062 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block with variation for new user test1 with 3 exclude questions
2025-07-11 19:44:13,073 - routes.ai.helpers.exercise_helpers - INFO - Using 3 exclude questions as recent questions for variation
2025-07-11 19:44:13,073 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-11 19:44:13,073 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:44:13,073 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-11 19:44:13,074 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:44:13,074 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:44:13,074 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-11 19:44:13,075 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:44:13,076 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:17,818 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:17,822 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:44:17,822 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1087 characters
2025-07-11 19:44:17,823 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:44:17,823 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:44:17,824 - routes.ai.helpers.exercise_helpers - INFO - Generated 3 exercises in variation block for new user test1
2025-07-11 19:44:17,825 - routes.ai.helpers.exercise_helpers - INFO - Successfully created AI block with variation for new user test1: 3 exercises
2025-07-11 19:44:17,825 - routes.ai.helpers.exercise_helpers - INFO - Generated second block for new user test1 with 3 exercises
2025-07-11 19:44:17,826 - routes.ai.helpers.exercise_helpers - INFO - After filtering duplicates for new user test1: 3 exercises remain
2025-07-11 19:44:17,826 - routes.ai.helpers.exercise_helpers - INFO - Final second block for new user test1: 3 exercises
2025-07-11 19:44:17,827 - routes.ai.helpers.exercise_helpers - INFO - Storing exercise blocks for new user test1
2025-07-11 19:44:17,839 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for test1 after after storing both blocks: {
  "username": "test1",
  "exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"Wir _____ im Park. (We are in the park.)\", \"explanation\": \"No explanation.\", \"options\": [\"sind\", \"haben\", \"bist\", \"hat\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"She is a teacher.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich _____ einen Hund. (I have a dog.)\", \"explanation\": \"No explanation.\", \"options\": [\"ist\", \"bin\", \"habe\", \"hat\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you notice any patterns or common mistakes?\", \"vocabHelp\": [{\"word\": \"habe\", \"meaning\": \"have (I)\"}, {\"word\": \"ist\", \"meaning\": \"is (he/she/it)\"}, {\"word\": \"sind\", \"meaning\": \"are (we/they)\"}, {\"word\": \"Lehrerin\", \"meaning\": \"teacher (female)\"}, {\"word\": \"Park\", \"meaning\": \"park\"}]}",
  "next_exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"_____ seid sehr nett. (You are very nice.)\", \"explanation\": \"No explanation.\", \"options\": [\"Sie\", \"Ihr\", \"Wir\", \"Du\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"I have a cat.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"_____ ist mein Bruder. (He is my brother.)\", \"explanation\": \"No explanation.\", \"options\": [\"Er\", \"Sie\", \"Es\", \"Wir\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you notice any patterns or have any questions about the grammar or vocabulary?\", \"vocabHelp\": [{\"word\": \"der Bruder\", \"meaning\": \"the brother\"}, {\"word\": \"die Katze\", \"meaning\": \"the cat\"}, {\"word\": \"nett\", \"meaning\": \"nice\"}]}",
  "exercises_updated_at": "2025-07-11T19:44:17.828360",
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Wir _____ im Park. (We are in the park.)\", \"She is a teacher.\", \"Ich _____ einen Hund. (I have a dog.)\"]"
}
2025-07-11 19:44:17,839 - routes.ai.helpers.exercise_helpers - INFO - Successfully completed generate_training_exercises for new user test1
2025-07-11 19:44:17,840 - routes.ai.training_routes - INFO - Returning new training exercises for user test1
2025-07-11 19:44:17,842 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:17] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:44:17,856 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:44:17,856 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:44:17,856 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:44:17,858 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:44:17,858 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:44:17,860 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:17] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:44:31,150 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:44:31,153 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex3": "sind",
    "ex2": "Sie ist eine Lehererin.",
    "ex1": "bin"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "sind",
          "haben",
          "bist",
          "hat"
        ],
        "question": "Wir _____ im Park. (We are in the park.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is a teacher.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "ist",
          "bin",
          "habe",
          "hat"
        ],
        "question": "Ich _____ einen Hund. (I have a dog.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "have (I)",
        "word": "habe"
      },
      {
        "meaning": "is (he/she/it)",
        "word": "ist"
      },
      {
        "meaning": "are (we/they)",
        "word": "sind"
      },
      {
        "meaning": "teacher (female)",
        "word": "Lehrerin"
      },
      {
        "meaning": "park",
        "word": "Park"
      }
    ]
  }
}
2025-07-11 19:44:31,153 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:44:31,153 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:44:31,154 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:44:31,156 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:44:31,156 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:44:31,157 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:44:31,170 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:33,053 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:33,056 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:44:33,057 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 393 characters
2025-07-11 19:44:33,057 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:44:33,058 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:44:33,059 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 1, 'total': 3, 'mistakes': [{'question': 'She is a teacher.', 'your_answer': 'Sie ist eine Lehererin.', 'correct_answer': 'Sie ist eine Lehrerin.'}, {'question': 'Ich _____ einen Hund. (I have a dog.)', 'your_answer': 'bin', 'correct_answer': 'habe'}]}
2025-07-11 19:44:33,059 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:44:33,062 - routes.ai.exercise_routes - INFO - Got 0 vocab and 3 topic entries for user test1
2025-07-11 19:44:33,064 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:34,617 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:34,622 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:44:34,623 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:44:34,623 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:44:34.623490",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "sind",
      "ex2": "Sie ist eine Lehererin.",
      "ex1": "bin"
    }
  }
}
2025-07-11 19:44:34,625 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:44:34,626 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:44:34,626 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:44:34,626 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=1, quality=5
2025-07-11 19:44:34,626 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:44:34,628 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:34,628 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:44:34,628 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:44:34,630 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:34,632 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:34] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 19:44:34,636 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user test1
2025-07-11 19:44:34,636 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user test1
2025-07-11 19:44:34,636 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:44:34,643 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:34,647 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user test1
2025-07-11 19:44:34,647 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user test1
2025-07-11 19:44:34,648 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-11 19:44:34,649 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:44:34,649 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-11 19:44:34,649 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:44:34,650 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:44:34,650 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-11 19:44:34,651 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:44:34,652 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:34,649 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:44:34,653 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:44:34,653 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:44:34,662 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:44:34,664 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:44:34,665 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:44:34,679 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:44:34,680 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:44:34,680 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:44:34,683 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:34] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:44:34,683 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:34,688 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user test1
2025-07-11 19:44:34,688 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user test1
2025-07-11 19:44:34,688 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:44:34,693 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:34,695 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user test1
2025-07-11 19:44:34,695 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user test1
2025-07-11 19:44:34,695 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-11 19:44:34,695 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:44:34,695 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-11 19:44:34,696 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:44:34,696 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:44:34,696 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-11 19:44:34,696 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:44:34,697 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:35,139 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:35,143 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['personal pronoun', 'present tense', 'sentence structure', 'verb conjugation']
2025-07-11 19:44:35,143 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:44:35,153 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 19:44:35,161 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=gap-fill
2025-07-11 19:44:35,167 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 19:44:35,173 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 9 words from exercise ex3 for user test1
2025-07-11 19:44:35,175 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:36,433 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:36,462 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:37,967 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:37,992 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:38,008 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:38,009 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:44:38,009 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1019 characters
2025-07-11 19:44:38,010 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:44:38,010 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:44:38,011 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:44:38,011 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:44:38,011 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:44:38,012 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:44:38,012 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:44:38,012 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:44:38,013 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:44:38,016 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:44:38,236 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:38,239 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:44:38,240 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1073 characters
2025-07-11 19:44:38,241 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:44:38,241 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:44:38,242 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:44:38,243 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:44:38,243 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:44:38,243 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:44:38,244 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:44:38,244 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:44:38,245 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:44:38,249 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:44:39,522 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:39,549 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:40,528 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:40,563 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:41,563 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:41,586 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:43,396 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:43,420 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:44:43,423 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:43,989 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:43,993 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'present tense']
2025-07-11 19:44:43,993 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 19:44:44,010 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:44:44,017 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 19:44:44,022 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=translation
2025-07-11 19:44:44,032 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 19:44:44,038 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:46,904 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:46,926 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:49,168 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:49,180 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:50,696 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:44:50,697 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:44:50,698 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:44:50,700 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:44:50,700 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:44:50,703 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:50] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:44:50,768 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:50,779 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:53,122 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:53,137 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:54,149 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:54,170 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:56,319 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:56,326 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 19:44:56,326 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:56,973 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:56,978 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'personal pronoun', 'verb conjugation']
2025-07-11 19:44:56,979 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 19:44:56,996 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:44:57,005 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 19:44:57,012 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user test1
2025-07-11 19:44:57,016 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:58,128 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:58,147 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:59,072 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:59,095 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:00,188 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:00,206 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:03,056 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:03,072 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:04,016 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:04,034 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:05,512 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:45:05,513 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex3": "haben",
    "ex2": "Sie ist keine Leherein.",
    "ex1": "bin"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "sind",
          "haben",
          "bist",
          "hat"
        ],
        "question": "Wir _____ im Park. (We are in the park.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is a teacher.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "ist",
          "bin",
          "habe",
          "hat"
        ],
        "question": "Ich _____ einen Hund. (I have a dog.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "have (I)",
        "word": "habe"
      },
      {
        "meaning": "is (he/she/it)",
        "word": "ist"
      },
      {
        "meaning": "are (we/they)",
        "word": "sind"
      },
      {
        "meaning": "teacher (female)",
        "word": "Lehrerin"
      },
      {
        "meaning": "park",
        "word": "Park"
      }
    ]
  }
}
2025-07-11 19:45:05,513 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:45:05,513 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:45:05,513 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:45:05,513 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:45:05,514 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:45:05,514 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:45:05,515 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:05,526 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:05,534 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 11 results
2025-07-11 19:45:05,535 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:45:05,537 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:45:05,541 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:45:05,542 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:45:05,542 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:05,544 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user test1
2025-07-11 19:45:05,544 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 6 total questions
2025-07-11 19:45:05,549 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:45:05,550 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:45:05,550 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:45:05,551 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:45:05,552 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:05,553 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:45:05.553236",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:45:05,563 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:05,563 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user test1
2025-07-11 19:45:05,564 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:45:05,569 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:05,570 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:05,570 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user test1
2025-07-11 19:45:05,570 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=14, topic_count=10
2025-07-11 19:45:05,570 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:45:05,571 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:45:05,572 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:45:05,572 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:45:05,572 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-11 19:45:05,572 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:45:05,573 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:06,536 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:06,540 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:45:06,540 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 257 characters
2025-07-11 19:45:06,540 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:45:06,542 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:45:06,542 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': 'Wir _____ im Park. (We are in the park.)', 'your_answer': 'haben', 'correct_answer': 'sind'}, {'question': 'She is a teacher.', 'your_answer': 'Sie ist keine Leherein.', 'correct_answer': 'Sie ist eine Lehrerin.'}, {'question': 'Ich _____ einen Hund. (I have a dog.)', 'your_answer': 'bin', 'correct_answer': 'habe'}]}
2025-07-11 19:45:06,542 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:45:06,547 - routes.ai.exercise_routes - INFO - Got 14 vocab and 10 topic entries for user test1
2025-07-11 19:45:06,548 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:08,389 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:08,394 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:45:08,395 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:45:08,395 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:45:08.395421",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "haben",
      "ex2": "Sie ist keine Leherein.",
      "ex1": "bin"
    }
  }
}
2025-07-11 19:45:08,396 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:45:08,396 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:45:08,397 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:45:08,397 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 19:45:08,396 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:45:08,399 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:08,400 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:45:08,400 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:45:08,402 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:08,405 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:45:08] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 19:45:08,413 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:08,413 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user test1
2025-07-11 19:45:08,414 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:45:08,423 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:45:08,423 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:45:08,424 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:45:08,427 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:08,429 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:45:08,430 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:45:08,431 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:45:08,437 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:08,437 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user test1
2025-07-11 19:45:08,438 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=14, topic_count=10
2025-07-11 19:45:08,438 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:45:08,439 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:45:08,439 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:45:08,441 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:45:08,441 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-11 19:45:08,442 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:45:08,450 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:08,455 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:45:08,456 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:45:08,456 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:45:08,457 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:45:08] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:45:08,458 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:08,461 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:08,461 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user test1
2025-07-11 19:45:08,461 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:45:08,465 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:08,466 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:08,466 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user test1
2025-07-11 19:45:08,466 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=14, topic_count=10
2025-07-11 19:45:08,466 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:45:08,466 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:45:08,466 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:45:08,467 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:45:08,467 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-11 19:45:08,467 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:45:08,468 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:09,921 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:09,925 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['definite article', 'noun', 'personal pronoun', 'preposition', 'verb']
2025-07-11 19:45:09,926 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 19:45:09,937 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=gap-fill
2025-07-11 19:45:09,947 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:45:09,953 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=preposition, skill=gap-fill
2025-07-11 19:45:09,960 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 19:45:09,965 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 9 words from exercise ex3 for user test1
2025-07-11 19:45:09,967 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:11,214 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:11,217 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:45:11,218 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1203 characters
2025-07-11 19:45:11,219 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:45:11,220 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:45:11,221 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:45:11,221 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:45:11,221 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:45:11,221 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:45:11,221 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:45:11,222 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:45:11,222 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:45:11,225 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:45:11,406 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:11,421 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:13,343 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:13,353 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:14,177 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:14,178 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:14,182 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:45:14,184 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1054 characters
2025-07-11 19:45:14,184 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:45:14,183 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:45:14,185 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1049 characters
2025-07-11 19:45:14,185 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:45:14,185 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:45:14,186 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:45:14,187 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:45:14,187 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:45:14,187 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:45:14,186 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:45:14,188 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:45:14,188 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:45:14,188 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:45:14,189 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:45:14,188 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:45:14,190 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:45:14,190 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:45:14,190 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:45:14,191 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:45:14,191 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:45:14,198 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:45:14,203 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:45:15,980 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:15,992 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:17,204 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:17,355 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:25,183 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:25,210 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:45:25,212 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:25,995 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:25,999 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'present tense', 'profession']
2025-07-11 19:45:25,999 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 19:45:26,004 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:45:26,008 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 19:45:26,014 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=translation
2025-07-11 19:45:26,018 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=profession, skill=translation
2025-07-11 19:45:26,022 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 19:45:26,029 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:27,018 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:27,064 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:28,452 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:28,472 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:31,319 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:31,334 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:32,386 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:32,397 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:34,901 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:34,912 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 19:45:34,912 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:35,432 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:35,435 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'personal pronoun', 'present tense verb']
2025-07-11 19:45:35,435 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 19:45:35,446 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:45:35,449 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense verb, skill=gap-fill
2025-07-11 19:45:35,456 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user test1
2025-07-11 19:45:35,462 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:36,335 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:36,343 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:37,359 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:37,372 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:38,593 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:38,614 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:39,512 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:39,533 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:41,050 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:41,065 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 13 results
2025-07-11 19:45:41,066 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:45:41,070 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:45:41,076 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:45:41,076 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:45:41,076 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:41,078 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:41,078 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 9 total questions
2025-07-11 19:45:41,084 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:45:41,084 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:45:41,084 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:45:41,084 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:45:41,085 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:41,093 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:45:41.086138",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:45:41,099 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:45:41,099 - routes.ai.helpers.exercise_helpers - INFO - Got 9 recent questions for user test1
2025-07-11 19:45:41,100 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:45:41,105 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:41,106 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:45:41,106 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 9 recent questions for user test1
2025-07-11 19:45:41,107 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=14, topic_count=16
2025-07-11 19:45:41,107 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:45:41,107 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:45:41,107 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:45:41,108 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:45:41,108 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=9
2025-07-11 19:45:41,111 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:45:41,111 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:46,271 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:46,273 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:45:46,274 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1149 characters
2025-07-11 19:45:46,274 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:45:46,274 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:45:46,275 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:45:46,276 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:45:46,276 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:45:46,277 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:45:46,277 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:45:46,278 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:45:46,278 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:45:46,292 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:47:10,481 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/helpers/ai_evaluation_helpers.py', reloading
2025-07-11 19:47:10,755 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:47:11,756 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:47:11,756 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:47:11,769 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:47:11] "POST /api/support/feedback HTTP/1.1" 200 -
2025-07-11 19:47:11,783 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:47:11,784 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:47:11,784 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:47:11,785 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:47:11,786 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:47:11,786 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:47:11] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:47:31,273 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 19:47:31,519 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:47:32,443 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:47:32,444 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:48:40,935 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:48:40,937 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:48:40,937 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:48:40,938 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:48:40,938 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:48:40,940 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:48:40] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:48:40,956 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:48:40,957 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:48:40,957 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:48:40,958 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:48:40,958 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:48:40,958 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:48:40] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:49:01,574 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:49:01,576 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:49:01,576 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:49:01,578 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:49:01,578 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:49:01,581 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:49:01] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:49:14,768 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:49:14,772 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex2": "Sie habe eine Katze.",
    "ex1": "Er",
    "ex3": "Wir"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They have a cat.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Er",
          "Sie",
          "Es",
          "Wir"
        ],
        "question": "_____ ist mein Bruder. (He is my brother.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Wir",
          "Ihr",
          "Sie",
          "Er"
        ],
        "question": "_____ sind Freunde. (They are friends.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "the brother",
        "word": "der Bruder"
      },
      {
        "meaning": "the cat",
        "word": "die Katze"
      },
      {
        "meaning": "the friends",
        "word": "die Freunde"
      }
    ]
  }
}
2025-07-11 19:49:14,772 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:49:14,773 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:49:14,773 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:49:14,774 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:49:14,774 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:49:14,776 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:49:14,793 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:17,931 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:17,935 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:49:17,936 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 253 characters
2025-07-11 19:49:17,937 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:49:17,939 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:49:17,939 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 1, 'total': 3, 'mistakes': [{'question': 'They have a cat.', 'your_answer': 'Sie habe eine Katze.', 'correct_answer': 'Sie haben eine Katze.'}, {'question': '_____ sind Freunde. (They are friends.)', 'your_answer': 'Wir', 'correct_answer': 'Sie'}]}
2025-07-11 19:49:17,940 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:49:17,944 - routes.ai.exercise_routes - INFO - Got 14 vocab and 16 topic entries for user test1
2025-07-11 19:49:17,946 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:19,691 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:19,693 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:49:19,694 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:49:19,694 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:49:19.694708",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex2": "Sie habe eine Katze.",
      "ex1": "Er",
      "ex3": "Wir"
    }
  }
}
2025-07-11 19:49:19,696 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:49:19,696 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:49:19,697 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:49:19,699 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:49:19,699 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:49:19,699 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:49:19,699 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:49:19,700 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:49:19,701 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:19,703 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:19,706 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:49:19,707 - routes.ai.helpers.exercise_helpers - INFO - Got 9 recent questions for user test1
2025-07-11 19:49:19,707 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:49:19,713 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:49:19,715 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:49:19,715 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 9 recent questions for user test1
2025-07-11 19:49:19,716 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=14, topic_count=16
2025-07-11 19:49:19,716 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:49:19,716 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:49:19,716 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:49:19,717 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:49:19,717 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=9
2025-07-11 19:49:19,717 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:49:19,718 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:20,159 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:20,163 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:20,184 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:20,185 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'verb']
2025-07-11 19:49:20,186 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 19:49:20,195 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:49:20,202 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 19:49:20,209 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 19:49:20,216 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 19:49:20,219 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:21,784 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:21,784 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:21,792 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:21,821 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:22,435 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:22,441 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:49:22] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 19:49:22,455 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:49:22,455 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:49:22,456 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:49:22,458 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:49:22,458 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:49:22,459 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:49:22,465 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:49:22,465 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:49:22,466 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:49:22,467 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:49:22] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:49:22,467 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:49:22,471 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:49:22,471 - routes.ai.helpers.exercise_helpers - INFO - Got 9 recent questions for user test1
2025-07-11 19:49:22,471 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:49:22,480 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:49:22,483 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:49:22,483 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 9 recent questions for user test1
2025-07-11 19:49:22,483 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=15, topic_count=17
2025-07-11 19:49:22,483 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:49:22,483 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:49:22,484 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:49:22,484 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:49:22,484 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=9
2025-07-11 19:49:22,484 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:49:22,486 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:34,137 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:34,140 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:49:34,142 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1077 characters
2025-07-11 19:49:34,143 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:34,144 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:34,144 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:49:34,146 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:49:34,147 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:49:34,148 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1100 characters
2025-07-11 19:49:34,148 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:49:34,149 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:49:34,149 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:49:34,149 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:49:34,150 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:49:34,150 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:49:34,150 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:49:34,150 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:49:34,151 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:49:34,151 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:49:34,151 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:49:34,152 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:49:34,152 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:49:34,152 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:49:34,153 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:49:34,153 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:49:34,162 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:49:34,168 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:49:34,175 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:35,884 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:35,904 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:37,478 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:37,530 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=1, quality=5
2025-07-11 19:49:37,533 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:38,273 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:38,277 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['definite article', 'nominative case', 'personal pronoun']
2025-07-11 19:49:38,278 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 19:49:38,289 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 19:49:38,299 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:49:38,308 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 8 words from exercise ex1 for user test1
2025-07-11 19:49:38,317 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:44,528 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:44,567 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:46,380 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:46,422 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:47,625 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:47,649 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:48,989 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:49,006 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:50,086 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:50,105 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:51,728 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:51,762 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:54,595 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:54,615 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 19:49:54,616 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:55,180 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:55,183 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['personal pronoun', 'sentence structure', 'verb conjugation']
2025-07-11 19:49:55,183 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:49:55,192 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=gap-fill
2025-07-11 19:49:55,197 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 19:49:55,200 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user test1
2025-07-11 19:49:55,202 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:56,741 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:56,759 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:58,687 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:58,701 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:50:00,017 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:50:00,030 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 10 results
2025-07-11 19:50:00,030 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:50:00,032 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:50:00,034 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:50:00,034 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:50:00,034 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:50:00,035 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:50:00,035 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 12 total questions
2025-07-11 19:50:00,038 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:50:00,038 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:50:00,038 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:50:00,038 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:50:00,039 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:50:00,039 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:50:00.039390",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:50:00,040 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:50:00,040 - routes.ai.helpers.exercise_helpers - INFO - Got 12 recent questions for user test1
2025-07-11 19:50:00,040 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:50:00,042 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:50:00,042 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:50:00,043 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 12 recent questions for user test1
2025-07-11 19:50:00,043 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=20, topic_count=17
2025-07-11 19:50:00,043 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:50:00,043 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:50:00,043 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:50:00,043 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:50:00,044 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=12
2025-07-11 19:50:00,044 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:50:00,047 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:50:08,517 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:50:08,527 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:50:08,527 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1155 characters
2025-07-11 19:50:08,530 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:50:08,533 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:50:08,535 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:50:08,535 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:50:08,535 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:50:08,535 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:50:08,535 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:50:08,536 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:50:08,536 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:50:08,543 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:50:29,084 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/helpers/ai_evaluation_helpers.py', reloading
2025-07-11 19:50:29,334 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:50:30,229 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:50:30,231 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:50:40,351 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:50:40,354 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:50:40,355 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:50:40,360 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:50:40,360 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:50:40,363 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:50:40] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:50:52,997 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:50:52,998 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex1": "Sie",
    "ex2": "Sie haben eine Katzen.",
    "ex3": "Ihr"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They have a cat.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Er",
          "Sie",
          "Es",
          "Wir"
        ],
        "question": "_____ ist mein Bruder. (He is my brother.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Wir",
          "Ihr",
          "Sie",
          "Er"
        ],
        "question": "_____ sind Freunde. (They are friends.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "the brother",
        "word": "der Bruder"
      },
      {
        "meaning": "the cat",
        "word": "die Katze"
      },
      {
        "meaning": "the friends",
        "word": "die Freunde"
      }
    ]
  }
}
2025-07-11 19:50:52,998 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:50:52,998 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:50:52,999 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:50:52,999 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:50:52,999 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:50:53,000 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:50:53,011 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:00,706 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:00,710 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:51:00,711 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 253 characters
2025-07-11 19:51:00,711 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:51:00,712 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:51:00,712 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': 'They have a cat.', 'your_answer': 'Sie haben eine Katzen.', 'correct_answer': 'Sie haben eine Katze.'}, {'question': '_____ ist mein Bruder. (He is my brother.)', 'your_answer': 'Sie', 'correct_answer': 'Er'}, {'question': '_____ sind Freunde. (They are friends.)', 'your_answer': 'Ihr', 'correct_answer': 'Sie'}]}
2025-07-11 19:51:00,712 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:51:00,716 - routes.ai.exercise_routes - INFO - Got 20 vocab and 17 topic entries for user test1
2025-07-11 19:51:00,717 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:00,986 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 19:51:01,198 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:51:02,193 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:51:02,194 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:51:02,204 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:51:02,204 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:51:02,204 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:51:02,206 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:51:02,206 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:51:02,206 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:51:02,210 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:51:02,213 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:51:02,213 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:51:02,213 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:51:02,214 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:02] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:51:02,217 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:51:02,218 - routes.ai.helpers.exercise_helpers - INFO - Got 12 recent questions for user test1
2025-07-11 19:51:02,218 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:51:02,222 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:51:02,224 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:51:02,225 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 12 recent questions for user test1
2025-07-11 19:51:02,225 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=20, topic_count=17
2025-07-11 19:51:02,225 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:51:02,225 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:51:02,225 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:51:02,226 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:51:02,226 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=12
2025-07-11 19:51:02,226 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:51:02,231 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:03,254 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 19:51:03,385 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:51:04,206 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:51:04,207 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:51:23,027 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:23] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:51:23,028 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:51:23,029 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:51:23,029 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:51:23,041 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:51:23,041 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:51:23,042 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:23] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:51:23,043 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:23] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:51:23,051 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:51:23,051 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:51:23,051 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:51:23,052 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:51:23,052 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:51:23,053 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:23] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:51:35,603 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:51:35,604 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex1": "Es",
    "ex2": "Sie habe eine haus.",
    "ex3": "neben"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Sie",
          "Er",
          "Es",
          "Wir"
        ],
        "question": "_____ ist meine Schwester. (She is my sister.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "We have a house.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "auf",
          "unter",
          "neben",
          "hinter"
        ],
        "question": "Das Buch ist _____ dem Tisch. (The book is on the table.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "the sister",
        "word": "die Schwester"
      },
      {
        "meaning": "the house",
        "word": "das Haus"
      },
      {
        "meaning": "the table",
        "word": "der Tisch"
      },
      {
        "meaning": "on",
        "word": "auf"
      }
    ]
  }
}
2025-07-11 19:51:35,604 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:51:35,605 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:51:35,605 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:51:35,605 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:51:35,605 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:51:35,605 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:51:35,613 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:36,784 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:36,787 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:51:36,788 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 252 characters
2025-07-11 19:51:36,789 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:51:36,790 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:51:36,790 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ ist meine Schwester. (She is my sister.)', 'your_answer': 'Es', 'correct_answer': 'Sie'}, {'question': 'We have a house.', 'your_answer': 'Sie habe eine haus.', 'correct_answer': 'Wir haben ein Haus.'}, {'question': 'Das Buch ist _____ dem Tisch. (The book is on the table.)', 'your_answer': 'neben', 'correct_answer': 'auf'}]}
2025-07-11 19:51:36,790 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:51:36,793 - routes.ai.exercise_routes - INFO - Got 20 vocab and 17 topic entries for user test1
2025-07-11 19:51:36,794 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:40,164 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:40,168 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:51:40,168 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:51:40,169 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:51:40.168903",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "Es",
      "ex2": "Sie habe eine haus.",
      "ex3": "neben"
    }
  }
}
2025-07-11 19:51:40,172 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:51:40,172 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:51:40,172 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:51:40,173 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:51:40,173 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:51:40,173 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 19:51:40,174 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:51:40,174 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:51:40,176 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:40,180 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:40,185 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:51:40,185 - routes.ai.helpers.exercise_helpers - INFO - Got 12 recent questions for user test1
2025-07-11 19:51:40,185 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:51:40,192 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:51:40,195 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:51:40,195 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 12 recent questions for user test1
2025-07-11 19:51:40,196 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=20, topic_count=17
2025-07-11 19:51:40,196 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:51:40,196 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:51:40,196 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:51:40,197 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:51:40,197 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=12
2025-07-11 19:51:40,197 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:51:40,199 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:40,882 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:40,883 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:40,888 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['definite article', 'noun', 'personal pronoun', 'verb']
2025-07-11 19:51:40,894 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 19:51:40,901 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:40] "[35m[1mPOST /api/ai-exercise/training/submit HTTP/1.1[0m" 500 -
2025-07-11 19:51:40,917 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=gap-fill
2025-07-11 19:51:40,934 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:51:40,936 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:51:40,936 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:51:40,942 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:51:40,945 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:51:40,945 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:51:40,945 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:51:40,953 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:51:40,954 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:51:40,954 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:51:40,954 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:51:40,955 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:40] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:51:40,957 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 19:51:40,959 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:51:40,959 - routes.ai.helpers.exercise_helpers - INFO - Got 12 recent questions for user test1
2025-07-11 19:51:40,960 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:51:40,968 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 8 words from exercise ex1 for user test1
2025-07-11 19:51:40,970 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:51:40,974 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:40,975 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:51:40,975 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 12 recent questions for user test1
2025-07-11 19:51:40,975 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=20, topic_count=18
2025-07-11 19:51:40,975 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:51:40,976 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:51:40,976 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:51:40,976 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:51:40,976 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=12
2025-07-11 19:51:40,977 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:51:40,977 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:42,781 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:42,802 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:43,995 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:44,008 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:44,041 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:44,042 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:51:44,042 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1167 characters
2025-07-11 19:51:44,042 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:51:44,042 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:51:44,042 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:51:44,043 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:51:44,043 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:51:44,043 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:51:44,043 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:51:44,043 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:51:44,043 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:51:44,047 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:51:44,876 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:44,879 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:51:44,879 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1068 characters
2025-07-11 19:51:44,880 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:51:44,881 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:51:44,882 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:51:44,882 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:51:44,883 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:51:44,883 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:51:44,883 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:51:44,884 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:51:44,884 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:51:44,894 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:51:45,390 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:45,421 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:46,952 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:46,969 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:59,277 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:59,297 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:00,644 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:00,659 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:01,913 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:01,929 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:52:01,932 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:02,675 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:02,678 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'sentence structure', 'verb (haben)']
2025-07-11 19:52:02,678 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 19:52:02,685 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:52:02,690 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 19:52:02,693 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=translation
2025-07-11 19:52:02,722 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb (haben), skill=translation
2025-07-11 19:52:02,727 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 19:52:02,729 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:03,640 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:03,654 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:05,155 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:05,168 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:05,975 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:05,992 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:06,691 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:06,710 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 19:52:06,711 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:08,325 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:08,327 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['accusative case', 'dative case', 'definite article', 'nominative case', 'preposition', 'word order']
2025-07-11 19:52:08,327 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=accusative case, skill=gap-fill
2025-07-11 19:52:08,335 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=dative case, skill=gap-fill
2025-07-11 19:52:08,339 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 19:52:08,343 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 19:52:08,347 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=preposition, skill=gap-fill
2025-07-11 19:52:08,350 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=word order, skill=gap-fill
2025-07-11 19:52:08,354 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 10 words from exercise ex3 for user test1
2025-07-11 19:52:08,356 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:10,275 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:10,295 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:12,855 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:12,869 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:14,211 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:14,238 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:15,903 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:15,937 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:17,374 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:17,385 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 15 results
2025-07-11 19:52:17,385 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:52:17,387 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:52:17,389 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:52:17,389 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:52:17,389 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:17,390 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:52:17,390 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 15 total questions
2025-07-11 19:52:17,396 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:52:17,398 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:52:17,399 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:52:17,399 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:52:17,404 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:17,405 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:52:17.404665",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:52:17,412 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:52:17,412 - routes.ai.helpers.exercise_helpers - INFO - Got 15 recent questions for user test1
2025-07-11 19:52:17,414 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:52:17,427 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:17,429 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:52:17,429 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 15 recent questions for user test1
2025-07-11 19:52:17,429 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=24
2025-07-11 19:52:17,429 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:52:17,429 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:52:17,430 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:52:17,430 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:52:17,430 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=15
2025-07-11 19:52:17,430 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:52:17,432 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:21,638 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:21,640 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:52:21,640 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1084 characters
2025-07-11 19:52:21,640 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:52:21,641 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:52:21,642 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:52:21,642 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:52:21,643 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:52:21,643 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:52:21,644 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:52:21,644 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:52:21,644 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:52:21,651 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:52:24,238 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:52:24,238 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:52:24,239 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:52:24,240 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:52:24,240 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:52:24,241 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:24] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:52:24,943 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:52:24,943 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:52:24,944 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:52:24,945 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:52:24,945 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:52:24,946 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:24] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:52:34,543 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:34] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:52:34,543 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:52:34,554 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:52:34,555 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:52:34,559 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:52:34,559 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:52:34,560 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:34] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:52:34,568 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:52:34,568 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:52:34,569 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:52:34,570 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:34] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:52:34,572 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:52:34,572 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:52:34,574 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:34] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:52:45,669 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:52:45,672 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex1": "Er",
    "ex2": "Sie habe eine Haus.",
    "ex3": "unter"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Sie",
          "Er",
          "Es",
          "Wir"
        ],
        "question": "_____ ist meine Schwester. (She is my sister.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "We have a house.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "auf",
          "unter",
          "neben",
          "hinter"
        ],
        "question": "Das Buch ist _____ dem Tisch. (The book is on the table.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "the sister",
        "word": "die Schwester"
      },
      {
        "meaning": "the house",
        "word": "das Haus"
      },
      {
        "meaning": "the table",
        "word": "der Tisch"
      },
      {
        "meaning": "on",
        "word": "auf"
      }
    ]
  }
}
2025-07-11 19:52:45,672 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:52:45,672 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:52:45,673 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:52:45,673 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:52:45,673 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:52:45,673 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:52:45,677 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:46,724 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:46,726 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:52:46,726 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 252 characters
2025-07-11 19:52:46,726 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:52:46,729 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:52:46,729 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ ist meine Schwester. (She is my sister.)', 'your_answer': 'Er', 'correct_answer': 'Sie'}, {'question': 'We have a house.', 'your_answer': 'Sie habe eine Haus.', 'correct_answer': 'Wir haben ein Haus.'}, {'question': 'Das Buch ist _____ dem Tisch. (The book is on the table.)', 'your_answer': 'unter', 'correct_answer': 'auf'}]}
2025-07-11 19:52:46,730 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:52:46,733 - routes.ai.exercise_routes - INFO - Got 26 vocab and 24 topic entries for user test1
2025-07-11 19:52:46,733 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:48,055 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:48,057 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:52:48,057 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:52:48,058 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:52:48.058152",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "Er",
      "ex2": "Sie habe eine Haus.",
      "ex3": "unter"
    }
  }
}
2025-07-11 19:52:48,059 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:52:48,059 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:52:48,060 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:52:48,061 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:52:48,062 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:52:48,062 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:52:48,062 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:48,063 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:48,063 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 19:52:48,065 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:48,069 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:52:48,069 - routes.ai.helpers.exercise_helpers - INFO - Got 15 recent questions for user test1
2025-07-11 19:52:48,069 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:52:48,075 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:48,078 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:52:48,078 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 15 recent questions for user test1
2025-07-11 19:52:48,078 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=24
2025-07-11 19:52:48,078 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:52:48,079 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:52:48,079 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:52:48,079 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:52:48,079 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=15
2025-07-11 19:52:48,081 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:52:48,082 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:48,566 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:48,569 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['definite article', 'noun', 'personal pronoun', 'verb']
2025-07-11 19:52:48,570 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 19:52:48,582 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=gap-fill
2025-07-11 19:52:48,591 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:52:48,598 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 19:52:48,609 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 8 words from exercise ex1 for user test1
2025-07-11 19:52:48,612 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:48,631 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:48,638 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:48] "[35m[1mPOST /api/ai-exercise/training/submit HTTP/1.1[0m" 500 -
2025-07-11 19:52:48,659 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:52:48,659 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:52:48,659 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:52:48,662 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:52:48,662 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:52:48,662 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:52:48,668 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:52:48,668 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:52:48,669 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:52:48,670 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:48,671 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:48] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:52:48,675 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:52:48,675 - routes.ai.helpers.exercise_helpers - INFO - Got 15 recent questions for user test1
2025-07-11 19:52:48,675 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:52:48,681 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:48,682 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:52:48,682 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 15 recent questions for user test1
2025-07-11 19:52:48,682 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=24
2025-07-11 19:52:48,682 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:52:48,683 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:52:48,683 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:52:48,683 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:52:48,683 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=15
2025-07-11 19:52:48,683 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:52:48,685 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:50,720 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:50,735 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:52,263 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:52,268 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:52:52,268 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1039 characters
2025-07-11 19:52:52,269 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:52:52,269 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:52:52,270 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:52:52,270 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:52:52,271 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:52:52,271 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:52:52,271 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:52:52,271 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:52:52,271 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:52:52,279 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:52:52,342 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:52,351 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:52,576 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:52,579 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:52:52,579 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1094 characters
2025-07-11 19:52:52,580 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:52:52,581 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:52:52,582 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:52:52,582 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:52:52,583 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:52:52,583 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:52:52,583 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:52:52,584 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:52:52,584 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:52:52,594 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:52:53,862 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:53,886 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:56,775 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:56,802 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:58,093 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:58,111 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:59,819 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:59,830 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:52:59,832 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:13,501 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:13,510 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'verb']
2025-07-11 19:53:13,510 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 19:53:13,516 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:53:13,520 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 19:53:13,523 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 19:53:13,530 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 19:53:13,535 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:14,645 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:14,670 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:16,115 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:16,174 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:17,647 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:17,660 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:18,697 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:18,712 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 19:53:18,724 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:29,236 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:29,241 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['dative case', 'definite article', 'noun', 'preposition', 'verb']
2025-07-11 19:53:29,242 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=dative case, skill=gap-fill
2025-07-11 19:53:29,254 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 19:53:29,261 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=gap-fill
2025-07-11 19:53:29,269 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=preposition, skill=gap-fill
2025-07-11 19:53:29,275 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 19:53:29,279 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 10 words from exercise ex3 for user test1
2025-07-11 19:53:29,284 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:30,782 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:30,808 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:32,022 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:32,046 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:34,223 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:34,236 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 13 results
2025-07-11 19:53:34,237 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:53:34,240 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:53:34,243 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:53:34,244 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:53:34,244 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:53:34,246 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:53:34,246 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 18 total questions
2025-07-11 19:53:34,250 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:53:34,250 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:53:34,250 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:53:34,250 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:53:34,251 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:53:34,252 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:53:34.252101",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:53:34,256 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:53:34,256 - routes.ai.helpers.exercise_helpers - INFO - Got 18 recent questions for user test1
2025-07-11 19:53:34,256 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:53:34,265 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:53:34,266 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:53:34,273 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 18 recent questions for user test1
2025-07-11 19:53:34,273 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=24
2025-07-11 19:53:34,274 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:53:34,274 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:53:34,276 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:53:34,276 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:53:34,277 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=18
2025-07-11 19:53:34,280 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:53:34,283 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:35,827 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:53:35,828 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:53:35,828 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:53:35,829 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:53:35,829 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:53:35,830 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:53:35] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:53:35,854 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:53:35,854 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:53:35,854 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:53:35,855 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:53:35,856 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:53:35,856 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:53:35] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:53:38,109 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:38,114 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:53:38,115 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1043 characters
2025-07-11 19:53:38,116 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:53:38,116 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:53:38,121 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:53:38,121 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:53:38,121 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:53:38,122 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:53:38,122 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:53:38,122 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:53:38,122 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:53:38,127 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:53:48,345 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:53:48,346 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:53:48] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:53:48,347 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:53:48,348 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:53:48,354 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:53:48,356 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:53:48,357 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:53:48] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:53:48,363 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:53:48] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:53:48,365 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:53:48,365 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:53:48,365 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:53:48,366 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:53:48,367 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:53:48,367 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:53:48] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:53:59,340 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:53:59,342 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex1": "Er",
    "ex3": "m\u00f6gen",
    "ex2": "sie sein eine doktor."
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ habe ein neues Fahrrad. (I have a new bicycle.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "mag",
          "m\u00f6gen",
          "magst",
          "m\u00f6gt"
        ],
        "question": "Sie _____ Musik. (She likes music.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "He is a doctor.",
        "type": "translation"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "bicycle",
        "word": "Fahrrad"
      },
      {
        "meaning": "doctor",
        "word": "Arzt"
      },
      {
        "meaning": "likes",
        "word": "mag"
      }
    ]
  }
}
2025-07-11 19:53:59,342 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:53:59,342 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:53:59,343 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:53:59,343 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:53:59,343 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:53:59,344 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:53:59,347 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:03,146 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:03,149 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:54:03,149 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 249 characters
2025-07-11 19:54:03,150 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:54:03,151 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:54:03,152 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ habe ein neues Fahrrad. (I have a new bicycle.)', 'your_answer': 'Er', 'correct_answer': 'Ich'}, {'question': 'Sie _____ Musik. (She likes music.)', 'your_answer': 'mögen', 'correct_answer': 'mag'}, {'question': 'He is a doctor.', 'your_answer': 'sie sein eine doktor.', 'correct_answer': 'Er ist ein Arzt.'}]}
2025-07-11 19:54:03,152 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:54:03,156 - routes.ai.exercise_routes - INFO - Got 26 vocab and 24 topic entries for user test1
2025-07-11 19:54:03,157 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:05,055 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:05,059 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:54:05,059 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:54:05,059 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:54:05.059740",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "Er",
      "ex3": "m\u00f6gen",
      "ex2": "sie sein eine doktor."
    }
  }
}
2025-07-11 19:54:05,062 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:54:05,062 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:54:05,063 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:54:05,063 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:54:05,064 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:54:05,064 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:54:05,066 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:05,066 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:05,066 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 19:54:05,069 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:05,073 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:54:05,074 - routes.ai.helpers.exercise_helpers - INFO - Got 18 recent questions for user test1
2025-07-11 19:54:05,074 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:54:05,079 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:05,081 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:54:05,082 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 18 recent questions for user test1
2025-07-11 19:54:05,082 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=24
2025-07-11 19:54:05,082 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:54:05,082 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:54:05,083 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:54:05,083 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:54:05,083 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=18
2025-07-11 19:54:05,083 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:54:05,084 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:05,537 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:05,546 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:54:05] "[35m[1mPOST /api/ai-exercise/training/submit HTTP/1.1[0m" 500 -
2025-07-11 19:54:05,579 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:54:05,580 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:54:05,580 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:54:05,581 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:54:05,581 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:54:05,581 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:54:05,585 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:54:05,586 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:54:05,586 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:54:05,586 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:05,587 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:54:05] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:54:05,600 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:54:05,600 - routes.ai.helpers.exercise_helpers - INFO - Got 18 recent questions for user test1
2025-07-11 19:54:05,601 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:54:05,608 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:05,611 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:54:05,612 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 18 recent questions for user test1
2025-07-11 19:54:05,612 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=24
2025-07-11 19:54:05,612 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:54:05,612 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:54:05,613 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:54:05,613 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:54:05,614 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=18
2025-07-11 19:54:05,614 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:54:05,615 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:05,739 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:05,741 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'noun', 'personal pronoun', 'sentence structure', 'verb conjugation']
2025-07-11 19:54:05,741 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 19:54:05,748 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=gap-fill
2025-07-11 19:54:05,753 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:54:05,759 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=gap-fill
2025-07-11 19:54:05,765 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 19:54:05,770 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 9 words from exercise ex1 for user test1
2025-07-11 19:54:05,772 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:07,210 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:07,222 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:08,806 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:08,832 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:09,023 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:09,024 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:54:09,025 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1087 characters
2025-07-11 19:54:09,025 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:54:09,026 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:54:09,026 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:54:09,027 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:54:09,027 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:54:09,028 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:54:09,028 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:54:09,028 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:54:09,029 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:54:09,036 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:54:09,669 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:09,671 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:54:09,672 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1116 characters
2025-07-11 19:54:09,672 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:54:09,672 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:54:09,672 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:54:09,673 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:54:09,673 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:54:09,673 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:54:09,673 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:54:09,673 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:54:09,673 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:54:09,677 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:54:11,231 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:11,248 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:26,682 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:26,702 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:28,180 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:28,201 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:29,002 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:29,027 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 19:54:29,028 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:29,564 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:29,568 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['nominative case', 'personal pronoun', 'verb', 'word order']
2025-07-11 19:54:29,568 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 19:54:29,575 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:54:29,578 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 19:54:29,581 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=word order, skill=gap-fill
2025-07-11 19:54:29,586 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user test1
2025-07-11 19:54:29,588 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:31,070 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:31,087 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:32,955 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:32,970 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:34,757 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:34,774 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:37,418 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:37,430 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:39,467 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:39,481 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:54:39,482 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:40,083 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:40,086 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'present tense']
2025-07-11 19:54:40,086 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 19:54:40,104 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:54:40,111 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 19:54:40,114 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=translation
2025-07-11 19:54:40,117 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 19:54:40,119 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:41,721 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:41,739 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:42,641 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:42,663 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:45,926 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:45,972 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:47,865 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:47,888 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:49,300 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:49,317 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 13 results
2025-07-11 19:54:49,318 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:54:49,321 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:54:49,328 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:54:49,328 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:54:49,329 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:49,330 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:54:49,331 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 19:54:49,336 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:54:49,336 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:54:49,336 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:54:49,336 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:54:49,338 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:49,345 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:54:49,345 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 19:54:49,345 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:54:49,353 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:54:49.338518",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:54:49,358 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:49,359 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:54:49,360 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 19:54:49,360 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=32, topic_count=24
2025-07-11 19:54:49,360 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:54:49,360 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:54:49,360 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:54:49,360 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:54:49,361 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 19:54:49,361 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:54:49,362 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:53,366 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:53,374 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:54:53,379 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1091 characters
2025-07-11 19:54:53,382 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:54:53,382 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:54:53,384 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:54:53,385 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:54:53,385 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:54:53,385 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:54:53,385 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:54:53,385 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:54:53,385 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:54:53,389 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:56:47,861 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 19:56:48,135 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:56:49,133 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:56:49,134 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:57:02,053 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:57:02,055 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:57:02,055 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:57:02,058 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:57:02,058 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:57:02,060 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:02] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:57:02,172 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:57:02,172 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:57:02,172 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:57:02,173 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:57:02,174 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:57:02,174 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:02] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:57:14,455 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:14] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:57:14,455 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:57:14,457 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:57:14,458 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:57:14,462 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:57:14,462 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:57:14,463 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:14] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:57:14,465 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:14] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:57:14,468 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:57:14,469 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:57:14,469 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:57:14,470 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:57:14,470 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:57:14,470 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:14] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:57:19,986 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:57:19,988 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex3": "spielen",
    "ex2": "jj",
    "ex1": "Du"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "spielt",
          "spielen",
          "spielst",
          "spiele"
        ],
        "question": "Er _____ Fu\u00dfball. (He plays football.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They are doctors.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Du",
          "Er",
          "Sie"
        ],
        "question": "_____ habe einen Vogel. (I have a bird.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "bird",
        "word": "Vogel"
      },
      {
        "meaning": "doctors",
        "word": "\u00c4rzte"
      },
      {
        "meaning": "football",
        "word": "Fu\u00dfball"
      }
    ]
  }
}
2025-07-11 19:57:19,988 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:57:19,988 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:57:19,989 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:57:19,989 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:57:19,989 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:57:19,992 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:57:20,008 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:20,966 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:20,967 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:57:20,968 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 251 characters
2025-07-11 19:57:20,968 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:57:20,968 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:57:20,968 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': 'Er _____ Fußball. (He plays football.)', 'your_answer': 'spielen', 'correct_answer': 'spielt'}, {'question': 'They are doctors.', 'your_answer': 'jj', 'correct_answer': 'Sie sind Ärzte.'}, {'question': '_____ habe einen Vogel. (I have a bird.)', 'your_answer': 'Du', 'correct_answer': 'Ich'}]}
2025-07-11 19:57:20,969 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:57:20,971 - routes.ai.exercise_routes - INFO - Got 32 vocab and 24 topic entries for user test1
2025-07-11 19:57:20,972 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:23,911 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:23,914 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:57:23,915 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:57:23,915 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:57:23.915605",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "spielen",
      "ex2": "jj",
      "ex1": "Du"
    }
  }
}
2025-07-11 19:57:23,917 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:57:23,918 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:57:23,919 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:57:23,919 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:57:23,919 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:57:23,920 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 19:57:23,920 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:57:23,920 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:23,921 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:23,923 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:23] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 19:57:23,928 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:23,928 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 19:57:23,929 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:57:23,942 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:23,943 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:57:23,944 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:57:23,944 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:57:23,946 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:23,946 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 19:57:23,947 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:57:23,947 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:57:23,947 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:57:23,947 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=32, topic_count=24
2025-07-11 19:57:23,947 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:57:23,948 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:57:23,948 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:57:23,949 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:57:23,949 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 19:57:23,950 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:57:23,951 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:23,964 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:57:23,964 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:57:23,965 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:57:23,969 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:23] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:57:23,969 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:23,977 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:23,977 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 19:57:23,978 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:57:23,983 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:23,984 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:23,985 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 19:57:23,985 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=32, topic_count=24
2025-07-11 19:57:23,985 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:57:23,985 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:57:23,985 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:57:23,985 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:57:23,985 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 19:57:23,986 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:57:23,987 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:24,574 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:24,579 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['present tense', 'subject', 'third person singular', 'verb', 'word order']
2025-07-11 19:57:24,580 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 19:57:24,594 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject, skill=gap-fill
2025-07-11 19:57:24,600 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=third person singular, skill=gap-fill
2025-07-11 19:57:24,605 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 19:57:24,611 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=word order, skill=gap-fill
2025-07-11 19:57:24,615 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user test1
2025-07-11 19:57:24,617 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:26,145 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:26,160 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:27,815 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:27,825 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:27,827 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:57:27,827 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1049 characters
2025-07-11 19:57:27,828 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:57:27,829 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:57:27,829 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:57:27,830 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:57:27,831 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:57:27,831 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:57:27,832 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:57:27,832 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:57:27,833 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:57:27,842 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:57:27,849 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:28,632 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:28,634 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:57:28,634 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1090 characters
2025-07-11 19:57:28,635 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:57:28,636 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:57:28,636 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:57:28,637 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:57:28,638 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:57:28,638 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:57:28,638 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:57:28,639 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:57:28,639 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:57:28,646 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:57:40,017 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:40,135 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:41,590 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:41,604 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:42,660 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:42,671 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:43,723 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:43,737 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:57:43,739 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:44,165 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:44,167 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['noun', 'pronoun', 'verb']
2025-07-11 19:57:44,168 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:57:44,178 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=pronoun, skill=translation
2025-07-11 19:57:44,191 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 19:57:44,202 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex2 for user test1
2025-07-11 19:57:44,222 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:45,733 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:45,751 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:47,678 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:47,685 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:50,304 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:50,483 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:51,883 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:51,910 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 19:57:51,911 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:52,501 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:52,504 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'nominative case', 'personal pronoun', 'sentence structure', 'verb conjugation']
2025-07-11 19:57:52,504 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 19:57:52,516 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 19:57:52,526 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:57:52,533 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=gap-fill
2025-07-11 19:57:52,557 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 19:57:52,562 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user test1
2025-07-11 19:57:52,566 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:53,411 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:53,433 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:55,055 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:55,081 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:56,142 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:56,159 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:57,716 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:57,733 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:59,498 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:59,514 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 13 results
2025-07-11 19:57:59,515 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:57:59,518 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:57:59,526 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:57:59,526 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:57:59,526 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:59,528 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:59,528 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 19:57:59,534 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:57:59,534 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:57:59,534 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:57:59,534 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:57:59,535 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:59,536 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:57:59.536081",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:57:59,538 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:59,538 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 19:57:59,538 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:57:59,543 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:59,544 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:59,544 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 19:57:59,545 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=36, topic_count=28
2025-07-11 19:57:59,545 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:57:59,545 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:57:59,545 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:57:59,545 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:57:59,546 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 19:57:59,546 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:57:59,551 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:58:03,245 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:58:03,248 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:58:03,248 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1158 characters
2025-07-11 19:58:03,249 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:58:03,249 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:58:03,250 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:58:03,250 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:58:03,251 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:58:03,251 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:58:03,252 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:58:03,252 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:58:03,253 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:58:03,259 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:58:56,670 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 19:58:57,025 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:58:58,018 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:58:58,020 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:59:10,643 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:59:10,645 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:59:10,645 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:59:10,657 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:59:10,658 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:59:10,663 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:59:10] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:59:12,064 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:59:12,064 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:59:12,064 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:59:12,065 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:59:12,065 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:59:12,066 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:59:12] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:59:12,085 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:59:12,085 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:59:12,086 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:59:12,087 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:59:12,087 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:59:12,087 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:59:12] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:59:52,777 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:59:52,779 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:59:52,779 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:59:52,786 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:59:52,786 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:59:52,789 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:59:52] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:59:57,839 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:59:57,841 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex2": "kk",
    "ex3": "Ich",
    "ex1": "Wir"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Er",
          "Sie",
          "Wir",
          "Ich"
        ],
        "question": "_____ spielt Fu\u00dfball. (He plays football.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They are students.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Ich",
          "Du",
          "Er",
          "Sie"
        ],
        "question": "_____ habe einen Vogel. (I have a bird.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "plays",
        "word": "spielt"
      },
      {
        "meaning": "football",
        "word": "Fu\u00dfball"
      },
      {
        "meaning": "students",
        "word": "Sch\u00fcler"
      },
      {
        "meaning": "bird",
        "word": "Vogel"
      }
    ]
  }
}
2025-07-11 19:59:57,841 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:59:57,842 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:59:57,843 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:59:57,844 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:59:57,844 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:59:57,846 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:59:57,863 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:59:59,230 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:59:59,239 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:59:59,239 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 249 characters
2025-07-11 19:59:59,240 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:59:59,241 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:59:59,241 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 1, 'total': 3, 'mistakes': [{'question': '_____ spielt Fußball. (He plays football.)', 'your_answer': 'Wir', 'correct_answer': 'Er'}, {'question': 'They are students.', 'your_answer': 'kk', 'correct_answer': 'Sie sind Schüler.'}]}
2025-07-11 19:59:59,241 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:59:59,244 - routes.ai.exercise_routes - INFO - Got 36 vocab and 28 topic entries for user test1
2025-07-11 19:59:59,245 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:00,697 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:00,702 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 20:00:00,703 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 20:00:00,703 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:00:00.703813",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex2": "kk",
      "ex3": "Ich",
      "ex1": "Wir"
    }
  }
}
2025-07-11 20:00:00,705 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 20:00:00,706 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 20:00:00,707 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 20:00:00,705 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:00:00,707 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 20:00:00,708 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:00:00,709 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 20:00:00,709 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:00,710 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:00,711 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:00:00] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 20:00:00,716 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:00,716 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:00:00,717 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:00:00,721 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:00,724 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:00,724 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:00:00,724 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=36, topic_count=28
2025-07-11 20:00:00,725 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:00:00,725 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:00:00,725 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:00:00,726 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 20:00:00,726 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 20:00:00,725 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:00:00,727 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:00:00,727 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:00:00,727 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:00:00,728 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:00,730 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 20:00:00,730 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 20:00:00,730 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 20:00:00,738 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:00:00,741 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:00:00,742 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 20:00:00,743 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:00,755 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:00:00] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:00:00,761 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:00,762 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:00:00,763 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:00:00,769 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:00,771 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:00,771 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:00:00,771 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=36, topic_count=28
2025-07-11 20:00:00,772 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:00:00,772 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:00:00,773 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:00:00,773 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:00:00,773 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:00:00,773 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:00:00,774 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:01,416 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:01,419 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['noun', 'personal pronoun', 'verb']
2025-07-11 20:00:01,419 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 20:00:01,434 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 20:00:01,444 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 20:00:01,452 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex2 for user test1
2025-07-11 20:00:01,455 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:02,779 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:02,795 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:04,782 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:04,794 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:00:04,795 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 990 characters
2025-07-11 20:00:04,795 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:00:04,796 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:00:04,798 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:00:04,798 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:00:04,799 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:00:04,799 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:00:04,800 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:00:04,800 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:00:04,801 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:00:04,809 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:00:04,866 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:04,901 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:05,211 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:05,213 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:00:05,214 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1099 characters
2025-07-11 20:00:05,214 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:00:05,215 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:00:05,216 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:00:05,217 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:00:05,217 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:00:05,217 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:00:05,217 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:00:05,217 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:00:05,217 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:00:05,221 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:00:06,794 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:06,818 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:08,883 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:08,905 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=1, quality=5
2025-07-11 20:00:08,906 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:09,912 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:09,914 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['indefinite article', 'nominative case', 'personal pronoun', 'sentence structure', 'verb conjugation']
2025-07-11 20:00:09,914 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 20:00:09,924 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 20:00:09,931 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:00:09,963 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=gap-fill
2025-07-11 20:00:09,968 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:00:09,972 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex3 for user test1
2025-07-11 20:00:09,979 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:11,551 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:11,569 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:13,496 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:13,508 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:16,058 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:16,080 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:18,207 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:18,217 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 20:00:18,218 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:18,730 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:18,734 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['subject pronoun', 'verb conjugation', 'word order']
2025-07-11 20:00:18,736 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject pronoun, skill=gap-fill
2025-07-11 20:00:18,747 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:00:18,752 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=word order, skill=gap-fill
2025-07-11 20:00:18,757 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex1 for user test1
2025-07-11 20:00:18,760 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:19,900 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:19,914 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:21,282 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:21,315 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:23,721 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:23,735 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:25,992 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:26,005 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 11 results
2025-07-11 20:00:26,005 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 20:00:26,010 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 20:00:26,016 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 20:00:26,017 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 20:00:26,017 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:26,019 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:26,019 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 20:00:26,024 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 20:00:26,024 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 20:00:26,024 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 20:00:26,025 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:00:26,026 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:26,026 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:00:26.026604",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 20:00:26,032 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:26,032 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:00:26,032 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:00:26,036 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:26,037 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:26,037 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:00:26,038 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=38, topic_count=25
2025-07-11 20:00:26,038 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:00:26,038 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:00:26,038 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:00:26,038 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:00:26,039 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:00:26,044 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:00:26,045 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:30,708 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:30,713 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:00:30,713 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1094 characters
2025-07-11 20:00:30,714 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:00:30,714 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:00:30,715 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:00:30,716 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:00:30,716 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:00:30,716 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:00:30,716 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:00:30,716 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:00:30,716 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:00:30,721 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:00:31,824 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:00:31,826 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:00:31,826 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:00:31,825 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:00:31] "GET /api/me HTTP/1.1" 200 -
2025-07-11 20:00:31,828 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:00:31,828 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:00:31,829 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:00:31] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:00:31,835 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:00:31] "GET /api/role HTTP/1.1" 200 -
2025-07-11 20:00:31,835 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:00:31,836 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:00:31,836 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:00:31,838 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:00:31,839 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:00:31,840 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:00:31] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:01:22,812 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 20:01:22,814 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex3": "Sie",
    "ex1": "Sie",
    "ex2": "jjj"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ spiele Klavier. (I play piano.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Er",
          "Sie",
          "Wir",
          "Ich"
        ],
        "question": "_____ trinkt Wasser. (He drinks water.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They are engineers.",
        "type": "translation"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "drinks",
        "word": "trinkt"
      },
      {
        "meaning": "water",
        "word": "Wasser"
      },
      {
        "meaning": "engineers",
        "word": "Ingenieure"
      },
      {
        "meaning": "play",
        "word": "spiele"
      },
      {
        "meaning": "piano",
        "word": "Klavier"
      }
    ]
  }
}
2025-07-11 20:01:22,814 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 20:01:22,814 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 20:01:22,815 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 20:01:22,815 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 20:01:22,815 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 20:01:22,815 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 20:01:22,818 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:23,905 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:23,907 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 20:01:23,908 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 252 characters
2025-07-11 20:01:23,908 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 20:01:23,910 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 20:01:23,911 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ spiele Klavier. (I play piano.)', 'your_answer': 'Sie', 'correct_answer': 'Ich'}, {'question': '_____ trinkt Wasser. (He drinks water.)', 'your_answer': 'Sie', 'correct_answer': 'Er'}, {'question': 'They are engineers.', 'your_answer': 'jjj', 'correct_answer': 'Sie sind Ingenieure.'}]}
2025-07-11 20:01:23,912 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 20:01:23,916 - routes.ai.exercise_routes - INFO - Got 38 vocab and 25 topic entries for user test1
2025-07-11 20:01:23,917 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:25,584 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:25,585 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 20:01:25,586 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 20:01:25,586 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:01:25.586419",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "Sie",
      "ex1": "Sie",
      "ex2": "jjj"
    }
  }
}
2025-07-11 20:01:25,587 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 20:01:25,587 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:01:25,587 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 20:01:25,588 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:01:25,588 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 20:01:25,588 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 20:01:25,591 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:01:25] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 20:01:25,591 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 20:01:25,593 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:25,589 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:01:25,597 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:01:25,597 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:01:25,598 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:01:25,607 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:01:25,608 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 20:01:25,608 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 20:01:25,612 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:01:25,613 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 20:01:25,613 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 20:01:25,613 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 20:01:25,615 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:01:25,616 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:01:25,616 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=38, topic_count=25
2025-07-11 20:01:25,616 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:01:25,616 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:01:25,617 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:01:25,617 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:01:25,617 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:01:25,618 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:01:25,618 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:25,622 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:01:25,622 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:01:25,622 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 20:01:25,622 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:01:25,623 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:01:25] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:01:25,626 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:01:25,626 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:01:25,626 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:01:25,633 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:01:25,634 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:01:25,634 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:01:25,635 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=38, topic_count=25
2025-07-11 20:01:25,635 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:01:25,635 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:01:25,635 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:01:25,636 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:01:25,636 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:01:25,637 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:01:25,638 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:26,141 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:26,144 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['subject pronoun', 'verb conjugation', 'word order']
2025-07-11 20:01:26,144 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject pronoun, skill=gap-fill
2025-07-11 20:01:26,157 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:01:26,170 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=word order, skill=gap-fill
2025-07-11 20:01:26,180 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user test1
2025-07-11 20:01:26,183 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:27,328 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:27,342 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:28,949 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:28,968 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:29,685 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:29,688 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:01:29,690 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1302 characters
2025-07-11 20:01:29,691 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:01:29,691 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:01:29,692 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:01:29,693 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:01:29,694 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:01:29,694 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:01:29,695 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:01:29,695 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:01:29,696 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:01:29,705 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:01:30,502 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:30,526 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:32,552 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:32,579 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:32,601 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:32,602 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:01:32,602 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1118 characters
2025-07-11 20:01:32,603 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:01:32,603 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:01:32,604 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:01:32,604 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:01:32,604 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:01:32,604 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:01:32,605 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:01:32,605 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:01:32,605 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:01:32,612 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:01:35,174 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:35,183 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 20:01:35,184 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:35,725 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:35,727 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['personal pronoun', 'present tense', 'subject-verb agreement']
2025-07-11 20:01:35,728 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:01:35,740 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 20:01:35,749 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject-verb agreement, skill=gap-fill
2025-07-11 20:01:35,758 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex1 for user test1
2025-07-11 20:01:35,761 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:37,574 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:37,597 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:39,923 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:39,938 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:41,145 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:41,155 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:42,760 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:42,779 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:44,184 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:44,192 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 20:01:44,192 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:44,633 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:44,636 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['noun', 'personal pronoun', 'verb']
2025-07-11 20:01:44,636 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 20:01:44,643 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 20:01:44,647 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 20:01:44,651 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex2 for user test1
2025-07-11 20:01:44,656 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:48,973 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:48,993 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:50,377 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:50,396 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:56,001 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:56,036 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:10,083 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:02:10,097 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 9 results
2025-07-11 20:02:10,097 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 20:02:10,099 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 20:02:10,101 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 20:02:10,101 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 20:02:10,101 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:02:10,102 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:02:10,102 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 20:02:10,105 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 20:02:10,105 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 20:02:10,105 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 20:02:10,106 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:02:10,107 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:02:10,107 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:02:10.107272",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 20:02:10,113 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:02:10,113 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:02:10,113 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:02:10,116 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:02:10,117 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:02:10,117 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:02:10,117 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=43, topic_count=27
2025-07-11 20:02:10,117 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:02:10,117 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:02:10,117 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:02:10,117 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:02:10,118 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:02:10,118 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:02:10,119 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:13,671 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:02:13,672 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:02:13,673 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1098 characters
2025-07-11 20:02:13,674 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:02:13,675 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:02:13,676 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:02:13,676 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:02:13,676 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:02:13,677 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:02:13,678 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:02:13,678 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:02:13,678 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:02:13,681 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:02:34,299 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 20:02:34,687 - werkzeug - INFO -  * Restarting with stat
2025-07-11 20:02:35,669 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 20:02:35,670 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 20:02:48,264 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:02:48,268 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:02:48,268 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:02:48,271 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:02:48,272 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:02:48,274 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:02:48] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:02:52,386 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 20:02:52,388 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex3": "Sie",
    "ex1": "Wir",
    "ex2": "kk"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ spiele Klavier. (I play piano.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Er",
          "Sie",
          "Wir",
          "Ich"
        ],
        "question": "_____ trinkt Wasser. (He drinks water.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They are engineers.",
        "type": "translation"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "drinks",
        "word": "trinkt"
      },
      {
        "meaning": "water",
        "word": "Wasser"
      },
      {
        "meaning": "engineers",
        "word": "Ingenieure"
      },
      {
        "meaning": "play",
        "word": "spiele"
      },
      {
        "meaning": "piano",
        "word": "Klavier"
      }
    ]
  }
}
2025-07-11 20:02:52,388 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 20:02:52,388 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 20:02:52,388 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 20:02:52,389 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 20:02:52,389 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 20:02:52,389 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 20:02:52,404 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:53,376 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:02:53,384 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 20:02:53,384 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 252 characters
2025-07-11 20:02:53,385 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 20:02:53,386 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 20:02:53,386 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ spiele Klavier. (I play piano.)', 'your_answer': 'Sie', 'correct_answer': 'Ich'}, {'question': '_____ trinkt Wasser. (He drinks water.)', 'your_answer': 'Wir', 'correct_answer': 'Er'}, {'question': 'They are engineers.', 'your_answer': 'kk', 'correct_answer': 'Sie sind Ingenieure.'}]}
2025-07-11 20:02:53,386 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 20:02:53,390 - routes.ai.exercise_routes - INFO - Got 43 vocab and 27 topic entries for user test1
2025-07-11 20:02:53,392 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:58,053 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:02:58,057 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 20:02:58,058 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 20:02:58,059 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:02:58.058740",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "Sie",
      "ex1": "Wir",
      "ex2": "kk"
    }
  }
}
2025-07-11 20:02:58,060 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 20:02:58,061 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:02:58,061 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 20:02:58,061 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:02:58,061 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 20:02:58,062 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 20:02:58,062 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:02:58,061 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 20:02:58,063 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:58,063 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:58,065 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:02:58,065 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:02:58,065 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:02:58,070 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:02:58,072 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:02:58,072 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:02:58,072 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=43, topic_count=27
2025-07-11 20:02:58,072 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:02:58,073 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:02:58,073 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:02:58,073 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:02:58,073 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:02:58,073 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:02:58,074 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:58,670 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:02:58,670 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:02:58,673 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['subject pronoun', 'verb conjugation', 'word order']
2025-07-11 20:02:58,677 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject pronoun, skill=gap-fill
2025-07-11 20:02:58,677 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:58,686 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:02:58,692 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=word order, skill=gap-fill
2025-07-11 20:02:58,699 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user test1
2025-07-11 20:02:58,702 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:00,716 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:00,743 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:00,768 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:00,770 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:01,331 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:01,335 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:02,049 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:02,051 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:02,058 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:03:02,058 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1029 characters
2025-07-11 20:03:02,059 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:03:02,059 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:03:02,060 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:03:02,061 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:03:02,061 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:03:02,061 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:03:02,062 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:03:02,062 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:03:02,062 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:03:02,072 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:02,077 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:03:02,790 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:02,795 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:03,480 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:03,499 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 20:03:03,500 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:03,566 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:03,569 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:03,995 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:03,998 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['personal pronoun', 'present tense', 'subject-verb agreement']
2025-07-11 20:03:03,998 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:03:04,010 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 20:03:04,018 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject-verb agreement, skill=gap-fill
2025-07-11 20:03:04,025 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex1 for user test1
2025-07-11 20:03:04,028 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:04,915 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:04,937 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:06,554 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:06,569 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:07,168 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:07,174 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:03:07] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 20:03:07,206 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:03:07,206 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 20:03:07,207 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 20:03:07,208 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 20:03:07,208 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 20:03:07,209 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 20:03:07,214 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:03:07,215 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:03:07,215 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 20:03:07,215 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:03:07,217 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:03:07] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:03:07,229 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:03:07,230 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:03:07,230 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:03:07,239 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:03:07,241 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:03:07,242 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:03:07,242 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=43, topic_count=27
2025-07-11 20:03:07,242 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:03:07,242 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:03:07,243 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:03:07,243 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:03:07,243 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:03:07,243 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:03:07,249 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:08,205 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:08,216 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:09,730 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:09,750 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 20:03:09,751 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:10,212 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:10,216 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['noun', 'personal pronoun', 'verb']
2025-07-11 20:03:10,216 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 20:03:10,228 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 20:03:10,237 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 20:03:10,243 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex2 for user test1
2025-07-11 20:03:10,246 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:10,296 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:10,297 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:03:10,297 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1024 characters
2025-07-11 20:03:10,298 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:03:10,298 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:03:10,299 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:03:10,299 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:03:10,300 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:03:10,300 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:03:10,300 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:03:10,300 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:03:10,301 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:03:10,311 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:03:11,707 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:11,731 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:13,056 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:13,079 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:14,573 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:14,585 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:16,078 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:16,086 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 9 results
2025-07-11 20:03:16,086 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 20:03:16,089 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 20:03:16,092 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 20:03:16,092 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 20:03:16,092 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:03:16,093 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:03:16,094 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 20:03:16,114 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 20:03:16,114 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 20:03:16,114 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 20:03:16,114 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:03:16,115 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:03:16,115 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:03:16.115261",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 20:03:16,116 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:03:16,116 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:03:16,116 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:03:16,118 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:03:16,118 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:03:16,118 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:03:16,118 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=43, topic_count=27
2025-07-11 20:03:16,119 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:03:16,119 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:03:16,119 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:03:16,119 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:03:16,119 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:03:16,119 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:03:16,120 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:19,688 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:19,691 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:03:19,691 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1034 characters
2025-07-11 20:03:19,692 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:03:19,692 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:03:19,694 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:03:19,695 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:03:19,695 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:03:19,695 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:03:19,696 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:03:19,697 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:03:19,697 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:03:19,706 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:06:42,670 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:06:42,671 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:06:42,672 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:06:42,679 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:06:42,680 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:06:42,683 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:06:42] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:06:44,100 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:06:44,102 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:06:44,103 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:06:44,104 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:06:44,104 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:06:44,105 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:06:44] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:06:44,116 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:06:44,116 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:06:44,116 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:06:44,117 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:06:44,124 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:06:44,124 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:06:44] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:07:18,867 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:07:18,869 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:07:18,869 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:07:18,870 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:07:18,871 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:07:18,872 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:07:18] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:07:23,723 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 20:07:23,723 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex1": "Sie",
    "ex2": "gg",
    "ex3": "Ich"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ habe einen Hund. (I have a dog.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is a teacher.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ liest ein Buch. (She reads a book.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "dog",
        "word": "Hund"
      },
      {
        "meaning": "teacher",
        "word": "Lehrerin"
      },
      {
        "meaning": "reads",
        "word": "liest"
      }
    ]
  }
}
2025-07-11 20:07:23,724 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 20:07:23,724 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 20:07:23,725 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 20:07:23,726 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 20:07:23,726 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 20:07:23,727 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 20:07:23,740 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:24,892 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:24,895 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 20:07:24,896 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 255 characters
2025-07-11 20:07:24,896 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 20:07:24,898 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 20:07:24,898 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ habe einen Hund. (I have a dog.)', 'your_answer': 'Sie', 'correct_answer': 'Ich'}, {'question': 'She is a teacher.', 'your_answer': 'gg', 'correct_answer': 'Sie ist eine Lehrerin.'}, {'question': '_____ liest ein Buch. (She reads a book.)', 'your_answer': 'Ich', 'correct_answer': 'Sie'}]}
2025-07-11 20:07:24,898 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 20:07:24,903 - routes.ai.exercise_routes - INFO - Got 43 vocab and 27 topic entries for user test1
2025-07-11 20:07:24,903 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:26,128 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:26,130 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 20:07:26,130 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 20:07:26,131 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:07:26.131376",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "Sie",
      "ex2": "gg",
      "ex3": "Ich"
    }
  }
}
2025-07-11 20:07:26,133 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 20:07:26,134 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 20:07:26,135 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 20:07:26,134 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:07:26,135 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 20:07:26,135 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:07:26,136 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 20:07:26,136 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:26,137 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:26,137 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:26,141 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:26,142 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:07:26,142 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:07:26,148 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:26,149 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:26,149 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:07:26,150 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=43, topic_count=27
2025-07-11 20:07:26,150 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:07:26,150 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:07:26,150 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:07:26,151 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:07:26,151 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:07:26,151 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:07:26,152 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:26,652 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:26,655 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:26,782 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:26,784 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'nominative case', 'personal pronoun', 'verb conjugation']
2025-07-11 20:07:26,784 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 20:07:26,794 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 20:07:26,801 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:07:26,806 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:07:26,812 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user test1
2025-07-11 20:07:26,814 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:27,880 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:27,885 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:28,039 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:28,049 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:30,643 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:30,647 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:30,952 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:30,972 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:31,217 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:31,219 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:07:31,219 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1081 characters
2025-07-11 20:07:31,220 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:07:31,220 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:07:31,221 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:07:31,222 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:07:31,222 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:07:31,222 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:07:31,222 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:07:31,222 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:07:31,223 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:07:31,227 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:07:32,192 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:32,193 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:32,405 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:32,422 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:32,821 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:32,827 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:33,410 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:33,430 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 20:07:33,431 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:33,944 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:33,949 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'verb']
2025-07-11 20:07:33,950 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 20:07:33,961 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 20:07:33,970 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 20:07:33,979 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 20:07:33,986 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 20:07:33,989 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:33,992 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:33,999 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:07:33] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 20:07:34,009 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:07:34,009 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 20:07:34,010 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 20:07:34,011 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 20:07:34,011 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 20:07:34,011 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 20:07:34,014 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:07:34,015 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:07:34,015 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 20:07:34,015 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:34,016 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:07:34] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:07:34,019 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:34,019 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:07:34,019 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:07:34,024 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:34,028 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:34,028 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:07:34,028 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=43, topic_count=29
2025-07-11 20:07:34,028 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:07:34,029 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:07:34,029 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:07:34,029 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:07:34,030 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:07:34,030 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:07:34,031 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:35,204 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:35,224 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:36,688 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:36,700 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:37,504 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:37,506 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:07:37,506 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1023 characters
2025-07-11 20:07:37,507 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:07:37,507 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:07:37,508 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:07:37,510 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:07:37,511 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:07:37,511 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:07:37,511 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:07:37,511 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:07:37,512 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:07:37,515 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:07:37,655 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:37,669 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:38,874 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:38,893 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:40,168 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:40,180 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 20:07:40,181 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:40,886 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:40,888 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['personal pronoun', 'present tense', 'subject-verb agreement']
2025-07-11 20:07:40,889 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:07:40,900 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 20:07:40,908 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject-verb agreement, skill=gap-fill
2025-07-11 20:07:40,915 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex3 for user test1
2025-07-11 20:07:40,918 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:43,305 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:43,340 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:44,673 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:44,681 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:46,417 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:46,426 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 11 results
2025-07-11 20:07:46,426 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 20:07:46,428 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 20:07:46,430 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 20:07:46,430 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 20:07:46,430 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:46,431 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:46,431 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 20:07:46,434 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 20:07:46,434 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 20:07:46,434 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 20:07:46,434 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:07:46,435 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:46,435 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:07:46.435302",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 20:07:46,436 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:46,436 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:07:46,436 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:07:46,439 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:46,440 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:46,440 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:07:46,440 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=44, topic_count=29
2025-07-11 20:07:46,440 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:07:46,440 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:07:46,441 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:07:46,441 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:07:46,441 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:07:46,441 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:07:46,442 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:50,196 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:50,211 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:07:50,212 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1124 characters
2025-07-11 20:07:50,213 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:07:50,213 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:07:50,214 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:07:50,215 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:07:50,216 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:07:50,216 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:07:50,216 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:07:50,216 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:07:50,216 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:07:50,224 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:09:16,882 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 20:09:17,105 - werkzeug - INFO -  * Restarting with stat
2025-07-11 20:09:18,149 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 20:09:18,151 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 20:09:24,133 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:09:24,135 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:09:24,135 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:09:24,137 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:09:24,137 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:09:24,143 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:09:24] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:09:42,621 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 20:09:42,623 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex1": "Er",
    "ex2": "Sie ist ein Lehrer.",
    "ex3": "Er"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ habe einen Hund. (I have a dog.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is a teacher.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ liest ein Buch. (She reads a book.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "dog",
        "word": "Hund"
      },
      {
        "meaning": "teacher",
        "word": "Lehrerin"
      },
      {
        "meaning": "reads",
        "word": "liest"
      }
    ]
  }
}
2025-07-11 20:09:42,623 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 20:09:42,624 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 20:09:42,624 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 20:09:42,624 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 20:09:42,624 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 20:09:42,625 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 20:09:42,644 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:43,782 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:43,784 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 20:09:43,785 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 255 characters
2025-07-11 20:09:43,785 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 20:09:43,786 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 20:09:43,787 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ habe einen Hund. (I have a dog.)', 'your_answer': 'Er', 'correct_answer': 'Ich'}, {'question': 'She is a teacher.', 'your_answer': 'Sie ist ein Lehrer.', 'correct_answer': 'Sie ist eine Lehrerin.'}, {'question': '_____ liest ein Buch. (She reads a book.)', 'your_answer': 'Er', 'correct_answer': 'Sie'}]}
2025-07-11 20:09:43,787 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 20:09:43,792 - routes.ai.exercise_routes - INFO - Got 44 vocab and 29 topic entries for user test1
2025-07-11 20:09:43,793 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:45,914 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:45,916 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 20:09:45,917 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 20:09:45,917 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:09:45.917647",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "Er",
      "ex2": "Sie ist ein Lehrer.",
      "ex3": "Er"
    }
  }
}
2025-07-11 20:09:45,918 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 20:09:45,919 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 20:09:45,920 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 20:09:45,921 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 20:09:45,918 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:09:45,922 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:45,923 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:09:45,923 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 20:09:45,924 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:09:45,926 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:45,934 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:09:45,934 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:09:45,934 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:09:45,941 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:09:45,943 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:09:45,944 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:09:45,945 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=44, topic_count=29
2025-07-11 20:09:45,946 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:09:45,947 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:09:45,948 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:09:45,948 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:09:45,948 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:09:45,948 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:09:45,949 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:46,401 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:46,405 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:46,516 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:46,518 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['definite article', 'nominative case', 'personal pronoun', 'sentence structure', 'verb conjugation']
2025-07-11 20:09:46,519 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 20:09:46,531 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 20:09:46,538 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:09:46,545 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=gap-fill
2025-07-11 20:09:46,553 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:09:46,560 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user test1
2025-07-11 20:09:46,564 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:47,293 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:47,299 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:48,046 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:48,053 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:48,053 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:48,080 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:49,703 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:49,709 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:50,349 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:50,395 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:50,810 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:50,813 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:09:50,815 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1084 characters
2025-07-11 20:09:50,816 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:09:50,816 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:09:50,817 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:09:50,818 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:09:50,818 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:09:50,819 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:09:50,819 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:09:50,819 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:09:50,820 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:09:50,823 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:09:51,017 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:51,022 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:51,382 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:51,394 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:52,218 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:52,226 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:09:52] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 20:09:52,264 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:09:52,264 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 20:09:52,265 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 20:09:52,267 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 20:09:52,267 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 20:09:52,267 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 20:09:52,275 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:09:52,275 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:09:52,275 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 20:09:52,276 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:09:52,278 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:09:52] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:09:52,297 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:09:52,297 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:09:52,298 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:09:52,312 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:09:52,315 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:09:52,316 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:09:52,316 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=44, topic_count=30
2025-07-11 20:09:52,316 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:09:52,316 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:09:52,316 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:09:52,317 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:09:52,317 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:09:52,317 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:09:52,318 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:54,453 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:54,466 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 20:09:54,467 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:55,026 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:55,028 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'verb']
2025-07-11 20:09:55,028 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 20:09:55,040 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 20:09:55,049 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 20:09:55,056 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 20:09:55,061 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 20:09:55,069 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:55,949 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:55,952 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:09:55,953 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1020 characters
2025-07-11 20:09:55,953 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:09:55,953 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:09:55,955 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:09:55,956 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:09:55,956 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:09:55,957 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:09:55,957 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:09:55,957 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:09:55,957 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:09:55,962 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:09:56,364 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:56,377 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:58,284 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:58,297 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:59,843 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:59,862 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:01,276 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:01,298 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:06,679 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:06,695 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 20:10:06,696 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:07,432 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:07,438 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['definite article', 'nominative case', 'personal pronoun', 'present tense']
2025-07-11 20:10:07,438 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 20:10:07,448 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 20:10:07,453 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:10:07,461 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 20:10:07,466 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex3 for user test1
2025-07-11 20:10:07,469 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:10,084 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:10,106 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:11,825 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:11,853 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:13,156 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:13,172 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 13 results
2025-07-11 20:10:13,172 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 20:10:13,177 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 20:10:13,181 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 20:10:13,181 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 20:10:13,181 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:10:13,182 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:10:13,183 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 20:10:13,188 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 20:10:13,188 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 20:10:13,188 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 20:10:13,189 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:10:13,190 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:10:13,193 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:10:13.190483",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 20:10:13,196 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:10:13,197 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:10:13,197 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:10:13,200 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:10:13,202 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:10:13,202 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:10:13,202 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=45, topic_count=30
2025-07-11 20:10:13,202 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:10:13,202 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:10:13,203 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:10:13,203 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:10:13,203 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:10:13,203 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:10:13,204 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:16,840 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:16,841 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:10:16,841 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1075 characters
2025-07-11 20:10:16,841 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:10:16,842 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:10:16,842 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:10:16,842 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:10:16,843 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:10:16,843 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:10:16,843 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:10:16,843 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:10:16,844 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:10:16,849 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:12:19,774 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/helpers/ai_evaluation_helpers.py', reloading
2025-07-11 20:12:20,003 - werkzeug - INFO -  * Restarting with stat
2025-07-11 20:12:20,927 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 20:12:20,928 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 20:12:56,677 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:12:56,679 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:12:56,679 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:12:56,685 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:12:56,686 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:12:56,688 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:12:56] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:13:11,036 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 20:13:11,038 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex2": "sie ist lehererin.",
    "ex1": "Wir",
    "ex3": "Er"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ malt ein Bild. (She paints a picture.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They are teachers.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ habe einen Hund. (I have a dog.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "dog",
        "word": "Hund"
      },
      {
        "meaning": "teacher",
        "word": "Lehrer"
      },
      {
        "meaning": "paints",
        "word": "malt"
      },
      {
        "meaning": "picture",
        "word": "Bild"
      }
    ]
  }
}
2025-07-11 20:13:11,039 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 20:13:11,039 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 20:13:11,041 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 20:13:11,041 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 20:13:11,041 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 20:13:11,042 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 20:13:11,057 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:12,085 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:12,087 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 20:13:12,087 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 249 characters
2025-07-11 20:13:12,088 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 20:13:12,089 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 20:13:12,089 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ malt ein Bild. (She paints a picture.)', 'your_answer': 'Er', 'correct_answer': 'Sie'}, {'question': 'They are teachers.', 'your_answer': 'sie ist lehererin.', 'correct_answer': 'Sie sind Lehrer.'}, {'question': '_____ habe einen Hund. (I have a dog.)', 'your_answer': 'Wir', 'correct_answer': 'Ich'}]}
2025-07-11 20:13:12,090 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 20:13:12,096 - routes.ai.exercise_routes - INFO - Got 45 vocab and 30 topic entries for user test1
2025-07-11 20:13:12,097 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:14,818 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:14,821 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 20:13:14,827 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 20:13:14,827 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:13:14.827538",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex2": "sie ist lehererin.",
      "ex1": "Wir",
      "ex3": "Er"
    }
  }
}
2025-07-11 20:13:14,829 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 20:13:14,829 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:13:14,829 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 20:13:14,830 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:13:14,830 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 20:13:14,830 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 20:13:14,831 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:14,832 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:14,832 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 20:13:14,835 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:14,840 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:14,840 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:13:14,840 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:13:14,846 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:14,848 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:14,848 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:13:14,848 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=45, topic_count=30
2025-07-11 20:13:14,848 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:13:14,848 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:13:14,848 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:13:14,849 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:13:14,849 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:13:14,849 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:13:14,850 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:15,296 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:15,298 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:15,302 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:15,303 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['noun', 'personal pronoun', 'verb conjugation']
2025-07-11 20:13:15,304 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 20:13:15,313 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 20:13:15,321 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=translation
2025-07-11 20:13:15,329 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex2 for user test1
2025-07-11 20:13:15,337 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:17,686 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:17,686 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:17,691 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:17,701 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:18,205 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:18,211 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:18,733 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:18,747 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:20,552 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:20,552 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:20,554 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:20,558 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:13:20,559 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1169 characters
2025-07-11 20:13:20,561 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:20,561 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:13:20,562 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:13:20,563 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:13:20,564 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:13:20,565 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:13:20,565 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:13:20,566 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:13:20,566 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:13:20,568 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:13:20,581 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:13:20,583 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:21,134 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:21,139 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:21,874 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:21,894 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 20:13:21,895 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:22,307 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:22,313 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:13:22] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 20:13:22,331 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:13:22,331 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 20:13:22,332 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 20:13:22,334 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 20:13:22,334 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 20:13:22,335 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 20:13:22,339 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:13:22,339 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:13:22,339 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 20:13:22,340 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:22,341 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:13:22] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:13:22,346 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:22,347 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:13:22,347 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:13:22,357 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:22,359 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:22,359 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:13:22,359 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=45, topic_count=31
2025-07-11 20:13:22,360 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:13:22,360 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:13:22,360 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:13:22,360 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:13:22,360 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:13:22,361 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:13:22,362 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:22,441 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:22,443 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'nominative case', 'personal pronoun', 'verb conjugation']
2025-07-11 20:13:22,443 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 20:13:22,451 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 20:13:22,456 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:13:22,461 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:13:22,466 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user test1
2025-07-11 20:13:22,482 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:23,449 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:23,476 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:25,093 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:25,107 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:25,737 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:25,740 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:13:25,741 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 962 characters
2025-07-11 20:13:25,741 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:13:25,742 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:13:25,744 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:13:25,745 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:13:25,745 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:13:25,746 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:13:25,746 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:13:25,746 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:13:25,746 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:13:25,751 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:13:26,127 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:26,136 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:27,806 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:27,820 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 20:13:27,821 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:28,406 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:28,410 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['indefinite article', 'personal pronoun', 'present tense', 'verb']
2025-07-11 20:13:28,411 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 20:13:28,418 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:13:28,422 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 20:13:28,427 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 20:13:28,433 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex3 for user test1
2025-07-11 20:13:28,435 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:30,079 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:30,098 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:31,945 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:31,972 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:33,299 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:33,332 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:34,778 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:34,791 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:36,213 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:36,227 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 11 results
2025-07-11 20:13:36,228 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 20:13:36,233 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 20:13:36,238 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 20:13:36,238 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 20:13:36,238 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:36,240 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:36,240 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 20:13:36,246 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 20:13:36,246 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 20:13:36,247 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 20:13:36,247 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:13:36,247 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:36,248 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:13:36.248044",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 20:13:36,250 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:36,250 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:13:36,250 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:13:36,261 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:36,262 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:36,262 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:13:36,262 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=47, topic_count=31
2025-07-11 20:13:36,263 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:13:36,263 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:13:36,263 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:13:36,263 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:13:36,263 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:13:36,264 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:13:36,264 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:40,515 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:40,517 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:13:40,517 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1122 characters
2025-07-11 20:13:40,517 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:13:40,517 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:13:40,518 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:13:40,518 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:13:40,518 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:13:40,518 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:13:40,518 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:13:40,519 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:13:40,519 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:13:40,523 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:16:21,183 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:16:21,185 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:16:21,185 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:16:21,186 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:16:21,186 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:16:21,188 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:16:21] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:16:23,930 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:16:23,931 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:16:23,931 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:16:23,933 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:16:23,933 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:16:23,934 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:16:23] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:16:23,942 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:16:23,942 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:16:23,942 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:16:23,943 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:16:23,943 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:16:23,944 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:16:23] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:21:25,100 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:21:25] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:30:42,142 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:30:42] "GET /api/me HTTP/1.1" 200 -
2025-07-11 20:30:42,144 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:30:42] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:30:42,150 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:30:42] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:30:42,171 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:30:42] "GET /api/role HTTP/1.1" 200 -
2025-07-11 20:30:42,181 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:30:42] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:33:21,190 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:33:21] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:34:28,288 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-11 20:34:28,292 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-11 20:34:28,295 - werkzeug - INFO -  * Restarting with stat
2025-07-11 20:34:29,747 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 20:34:29,749 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 20:36:39,873 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-11 20:36:39,874 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-11 20:36:39,874 - werkzeug - INFO -  * Restarting with stat
2025-07-11 20:36:40,705 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 20:36:40,706 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 20:41:47,311 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:41:47] "GET /api/me HTTP/1.1" 200 -
2025-07-11 20:41:47,373 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:41:47] "GET /api/role HTTP/1.1" 200 -
2025-07-11 20:42:51,079 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:42:51] "GET /api/me HTTP/1.1" 200 -
2025-07-11 20:42:51,119 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:42:51] "GET /api/role HTTP/1.1" 200 -
2025-07-11 20:43:25,077 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:43:25] "GET /api/me HTTP/1.1" 200 -
2025-07-11 20:43:25,086 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:43:25] "GET /api/role HTTP/1.1" 200 -
2025-07-11 20:43:25,096 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:43:25] "GET /api/me HTTP/1.1" 200 -
2025-07-11 20:43:25,102 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:43:25] "GET /api/role HTTP/1.1" 200 -
2025-07-11 20:43:40,224 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:43:40] "[31m[1mPOST /api/signup HTTP/1.1[0m" 400 -
2025-07-11 20:43:43,754 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:43:43] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-11 20:43:43,849 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:43:43] "POST /api/login HTTP/1.1" 200 -
2025-07-11 20:43:43,857 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:43:43] "GET /api/me HTTP/1.1" 200 -
2025-07-11 20:43:43,864 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:43:43] "GET /api/role HTTP/1.1" 200 -
2025-07-11 20:43:47,392 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:43:47] "POST /api/user-level HTTP/1.1" 200 -
2025-07-11 20:43:47,479 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:43:47] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:45:47,221 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:45:47] "GET /api/me HTTP/1.1" 200 -
2025-07-11 20:45:47,231 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:45:47] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:45:47,276 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:45:47] "GET /api/role HTTP/1.1" 200 -
2025-07-11 20:45:47,281 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:45:47] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:45:47,298 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:45:47] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:47:37,220 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:47:37] "GET /api/me HTTP/1.1" 200 -
2025-07-11 20:47:37,238 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:47:37] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:47:37,254 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:47:37] "GET /api/role HTTP/1.1" 200 -
2025-07-11 20:47:37,262 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:47:37] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:47:37,275 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:47:37] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:49:06,584 - routes.ai.training_routes - INFO - Training exercises request from user: test4
2025-07-11 20:49:06,585 - routes.ai.training_routes - INFO - Training request data for user test4: answers_count=0
2025-07-11 20:49:06,585 - routes.ai.training_routes - INFO - User test4 has no answers, checking cached exercises
2025-07-11 20:49:06,587 - routes.ai.training_routes - INFO - Generating new training exercises for user test4
2025-07-11 20:49:06,587 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_training_exercises for user test4
2025-07-11 20:49:06,588 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test4, limit=20
2025-07-11 20:49:06,589 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user test4
2025-07-11 20:49:06,589 - routes.ai.helpers.exercise_helpers - INFO - Detected new user test4, generating two unique blocks with different contexts
2025-07-11 20:49:06,590 - routes.ai.helpers.exercise_helpers - INFO - Generating blocks for new user test4
2025-07-11 20:49:06,590 - routes.ai.helpers.exercise_helpers - INFO - Generating first block for new user test4
2025-07-11 20:49:06,595 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test4, limit=20
2025-07-11 20:49:06,595 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user test4
2025-07-11 20:49:06,596 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 0 recent questions for user test4
2025-07-11 20:49:06,596 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-11 20:49:06,596 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:49:06,596 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-11 20:49:06,596 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:49:06,597 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:49:06,597 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=0
2025-07-11 20:49:06,597 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:49:06,618 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:49:08,147 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:49:08] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:49:10,694 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:49:10,697 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:49:10,697 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1159 characters
2025-07-11 20:49:10,698 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:49:10,699 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:49:10,699 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test4
2025-07-11 20:49:10,700 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test4
2025-07-11 20:49:10,701 - routes.ai.helpers.exercise_helpers - INFO - Generated first block for new user test4 with 3 exercises
2025-07-11 20:49:10,701 - routes.ai.helpers.exercise_helpers - INFO - Extracted 3 questions from first block for new user test4
2025-07-11 20:49:10,702 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test4 with 3 new questions, limit=20
2025-07-11 20:49:10,702 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test4, limit=20
2025-07-11 20:49:10,705 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user test4
2025-07-11 20:49:10,705 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test4: 3 total questions
2025-07-11 20:49:10,717 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test4
2025-07-11 20:49:10,717 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test4
2025-07-11 20:49:10,719 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for test4 after after updating exercise history: {
  "username": "test4",
  "exercises": null,
  "next_exercises": null,
  "exercises_updated_at": null,
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Wir ____ im Park. Es ist sch\\u00f6n hier.\", \"She has a cat.\", \"Ich ____ einen Hund. Er ist sehr freundlich.\"]"
}
2025-07-11 20:49:10,821 - routes.ai.helpers.exercise_helpers - INFO - Generating second block for new user test4 with different context
2025-07-11 20:49:10,822 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block with variation for new user test4 with 3 exclude questions
2025-07-11 20:49:10,832 - routes.ai.helpers.exercise_helpers - INFO - Using 3 exclude questions as recent questions for variation
2025-07-11 20:49:10,832 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-11 20:49:10,833 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:49:10,833 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-11 20:49:10,833 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:49:10,834 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:49:10,834 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-11 20:49:10,834 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:49:10,836 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:49:14,383 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:49:14] "GET /api/me HTTP/1.1" 200 -
2025-07-11 20:49:14,404 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:49:14] "GET /api/role HTTP/1.1" 200 -
2025-07-11 20:49:14,414 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:49:14] "GET /api/profile HTTP/1.1" 200 -
2025-07-11 20:49:15,199 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:49:15,203 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:49:15,203 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1105 characters
2025-07-11 20:49:15,204 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:49:15,204 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:49:15,207 - routes.ai.helpers.exercise_helpers - INFO - Generated 3 exercises in variation block for new user test4
2025-07-11 20:49:15,207 - routes.ai.helpers.exercise_helpers - INFO - Successfully created AI block with variation for new user test4: 3 exercises
2025-07-11 20:49:15,208 - routes.ai.helpers.exercise_helpers - INFO - Generated second block for new user test4 with 3 exercises
2025-07-11 20:49:15,208 - routes.ai.helpers.exercise_helpers - INFO - After filtering duplicates for new user test4: 3 exercises remain
2025-07-11 20:49:15,208 - routes.ai.helpers.exercise_helpers - INFO - Final second block for new user test4: 3 exercises
2025-07-11 20:49:15,209 - routes.ai.helpers.exercise_helpers - INFO - Storing exercise blocks for new user test4
2025-07-11 20:49:15,220 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for test4 after after storing both blocks: {
  "username": "test4",
  "exercises": "{\"lessonId\": \"dynamic-ai-lesson\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"Wir ____ im Park. Es ist sch\\u00f6n hier.\", \"explanation\": \"No explanation.\", \"options\": [\"haben\", \"sind\", \"hat\", \"ist\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"She has a cat.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich ____ einen Hund. Er ist sehr freundlich.\", \"explanation\": \"No explanation.\", \"options\": [\"bin\", \"habe\", \"hat\", \"ist\"]}], \"feedbackPrompt\": \"Wie gut kennst du die W\\u00f6rter und die Grammatik?\", \"vocabHelp\": [{\"word\": \"einen Hund\", \"meaning\": \"a dog\"}, {\"word\": \"freundlich\", \"meaning\": \"friendly\"}, {\"word\": \"eine Katze\", \"meaning\": \"a cat\"}, {\"word\": \"im Park\", \"meaning\": \"in the park\"}, {\"word\": \"sch\\u00f6n\", \"meaning\": \"beautiful\"}]}",
  "next_exercises": "{\"lessonId\": \"dynamic-ai-lesson\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"He is in the house.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"____ bist du? Ich bin hier.\", \"explanation\": \"No explanation.\", \"options\": [\"Wo\", \"Was\", \"Wer\", \"Wie\"]}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich ____ eine Schwester. Sie ist sehr nett.\", \"explanation\": \"No explanation.\", \"options\": [\"hat\", \"hast\", \"haben\", \"habe\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you notice any patterns or common mistakes?\", \"vocabHelp\": [{\"word\": \"die Schwester\", \"meaning\": \"the sister\"}, {\"word\": \"nett\", \"meaning\": \"nice\"}, {\"word\": \"das Haus\", \"meaning\": \"the house\"}, {\"word\": \"Wo\", \"meaning\": \"Where\"}]}",
  "exercises_updated_at": "2025-07-11T20:49:15.209665",
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Wir ____ im Park. Es ist sch\\u00f6n hier.\", \"She has a cat.\", \"Ich ____ einen Hund. Er ist sehr freundlich.\"]"
}
2025-07-11 20:49:15,221 - routes.ai.helpers.exercise_helpers - INFO - Successfully completed generate_training_exercises for new user test4
2025-07-11 20:49:15,221 - routes.ai.training_routes - INFO - Returning new training exercises for user test4
2025-07-11 20:49:15,221 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:49:15] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:49:15,231 - routes.ai.training_routes - INFO - Training exercises request from user: test4
2025-07-11 20:49:15,231 - routes.ai.training_routes - INFO - Training request data for user test4: answers_count=0
2025-07-11 20:49:15,231 - routes.ai.training_routes - INFO - User test4 has no answers, checking cached exercises
2025-07-11 20:49:15,233 - routes.ai.training_routes - INFO - Found cached exercises for user test4
2025-07-11 20:49:15,233 - routes.ai.training_routes - INFO - Returning cached exercises for user test4
2025-07-11 20:49:15,234 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:49:15] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:49:17,092 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:49:17] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:49:20,287 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:49:20] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 20:51:42,481 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:51:42,694 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:51:42,749 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:51:42] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-11 20:51:59,195 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:51:59,513 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:51:59,873 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:51:59] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-11 20:52:33,576 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:52:33] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 21:00:28,172 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 21:00:28] "GET /api/me HTTP/1.1" 200 -
2025-07-11 21:00:28,175 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 21:00:28] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 21:00:28,189 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 21:00:28] "GET /api/role HTTP/1.1" 200 -
2025-07-11 21:00:28,195 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 21:00:28] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 21:00:28,205 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 21:00:28] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:03:37,249 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:03:37] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:03:37,252 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:03:37] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:03:37,264 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:03:37] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:03:37,264 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:03:37] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:03:37,278 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:03:37] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:05:00,858 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:00] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:05:00,877 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:00] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:05:00,887 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:00] "GET /api/profile HTTP/1.1" 200 -
2025-07-12 07:05:04,035 - app - INFO - User test4 requesting account deactivation
2025-07-12 07:05:04,039 - app - INFO - Deleted 1 records from ai_user_data for user test4
2025-07-12 07:05:04,039 - app - INFO - Deleted 0 records from vocab_log for user test4
2025-07-12 07:05:04,040 - app - INFO - Deleted 3 records from topic_memory for user test4
2025-07-12 07:05:04,040 - app - INFO - Deleted 0 records from results for user test4
2025-07-12 07:05:04,040 - app - INFO - Deleted 0 records from exercise_submissions for user test4
2025-07-12 07:05:04,041 - app - INFO - Deleted 0 records from lesson_progress for user test4
2025-07-12 07:05:04,041 - app - INFO - Deleted 1 records from users for user test4
2025-07-12 07:05:04,047 - app - INFO - Destroyed all sessions for user test4
2025-07-12 07:05:04,047 - app - INFO - Account deactivation completed for user test4. Deleted: AI data=1, vocab=0, topic_memory=3, results=0, exercise_submissions=0, lesson_progress=0, user=1
2025-07-12 07:05:04,049 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:04] "POST /api/settings/deactivate HTTP/1.1" 200 -
2025-07-12 07:05:16,061 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:16] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 07:05:16,181 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:16] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:05:16,189 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:16] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:05:16,197 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:16] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:05:20,491 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:20] "POST /api/user-level HTTP/1.1" 200 -
2025-07-12 07:05:20,524 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:20] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:05:37,317 - routes.ai.training_routes - INFO - Training exercises request from user: test4
2025-07-12 07:05:37,318 - routes.ai.training_routes - INFO - Training request data for user test4: answers_count=0
2025-07-12 07:05:37,319 - routes.ai.training_routes - INFO - User test4 has no answers, checking cached exercises
2025-07-12 07:05:37,321 - routes.ai.training_routes - INFO - Generating new training exercises for user test4
2025-07-12 07:05:37,321 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_training_exercises for user test4
2025-07-12 07:05:37,321 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test4, limit=20
2025-07-12 07:05:37,322 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user test4
2025-07-12 07:05:37,322 - routes.ai.helpers.exercise_helpers - INFO - Detected new user test4, generating two unique blocks with different contexts
2025-07-12 07:05:37,323 - routes.ai.helpers.exercise_helpers - INFO - Generating blocks for new user test4
2025-07-12 07:05:37,323 - routes.ai.helpers.exercise_helpers - INFO - Generating first block for new user test4
2025-07-12 07:05:37,327 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test4, limit=20
2025-07-12 07:05:37,328 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user test4
2025-07-12 07:05:37,328 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 0 recent questions for user test4
2025-07-12 07:05:37,328 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 07:05:37,329 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:05:37,329 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 07:05:37,329 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:05:37,330 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:05:37,330 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=0
2025-07-12 07:05:37,331 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:05:37,336 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:05:41,301 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:05:41,319 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:05:41,321 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1166 characters
2025-07-12 07:05:41,321 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:05:41,322 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:05:41,324 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test4
2025-07-12 07:05:41,324 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test4
2025-07-12 07:05:41,325 - routes.ai.helpers.exercise_helpers - INFO - Generated first block for new user test4 with 3 exercises
2025-07-12 07:05:41,325 - routes.ai.helpers.exercise_helpers - INFO - Extracted 3 questions from first block for new user test4
2025-07-12 07:05:41,326 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test4 with 3 new questions, limit=20
2025-07-12 07:05:41,326 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test4, limit=20
2025-07-12 07:05:41,329 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user test4
2025-07-12 07:05:41,329 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test4: 3 total questions
2025-07-12 07:05:41,338 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test4
2025-07-12 07:05:41,339 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test4
2025-07-12 07:05:41,350 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for test4 after after updating exercise history: {
  "username": "test4",
  "exercises": null,
  "next_exercises": null,
  "exercises_updated_at": null,
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Ich _____ einen Hund. Er ist sehr freundlich.\", \"Wir _____ im Park. Es ist sch\\u00f6n hier.\", \"She has a cat.\"]"
}
2025-07-12 07:05:41,453 - routes.ai.helpers.exercise_helpers - INFO - Generating second block for new user test4 with different context
2025-07-12 07:05:41,454 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block with variation for new user test4 with 3 exclude questions
2025-07-12 07:05:41,465 - routes.ai.helpers.exercise_helpers - INFO - Using 3 exclude questions as recent questions for variation
2025-07-12 07:05:41,466 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 07:05:41,466 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:05:41,466 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 07:05:41,466 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:05:41,466 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:05:41,467 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 07:05:41,467 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:05:41,471 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:05:45,484 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:05:45,490 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:05:45,491 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1198 characters
2025-07-12 07:05:45,492 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:05:45,492 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:05:45,494 - routes.ai.helpers.exercise_helpers - INFO - Generated 3 exercises in variation block for new user test4
2025-07-12 07:05:45,494 - routes.ai.helpers.exercise_helpers - INFO - Successfully created AI block with variation for new user test4: 3 exercises
2025-07-12 07:05:45,495 - routes.ai.helpers.exercise_helpers - INFO - Generated second block for new user test4 with 3 exercises
2025-07-12 07:05:45,495 - routes.ai.helpers.exercise_helpers - INFO - After filtering duplicates for new user test4: 3 exercises remain
2025-07-12 07:05:45,496 - routes.ai.helpers.exercise_helpers - INFO - Final second block for new user test4: 3 exercises
2025-07-12 07:05:45,496 - routes.ai.helpers.exercise_helpers - INFO - Storing exercise blocks for new user test4
2025-07-12 07:05:45,507 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for test4 after after storing both blocks: {
  "username": "test4",
  "exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich _____ einen Hund. Er ist sehr freundlich.\", \"explanation\": \"No explanation.\", \"options\": [\"bin\", \"habe\", \"hat\", \"ist\"]}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"Wir _____ im Park. Es ist sch\\u00f6n hier.\", \"explanation\": \"No explanation.\", \"options\": [\"haben\", \"sind\", \"hat\", \"ist\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"She has a cat.\", \"explanation\": \"No explanation.\"}], \"feedbackPrompt\": \"How did you find these exercises? Did you encounter any difficulties?\", \"vocabHelp\": [{\"word\": \"freundlich\", \"meaning\": \"friendly\"}, {\"word\": \"sch\\u00f6n\", \"meaning\": \"beautiful, nice\"}, {\"word\": \"Park\", \"meaning\": \"park\"}, {\"word\": \"Hund\", \"meaning\": \"dog\"}, {\"word\": \"Katze\", \"meaning\": \"cat\"}]}",
  "next_exercises": "{\"lessonId\": \"dynamic-ai-lesson\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich _____ eine Katze. Sie ist sehr s\\u00fc\\u00df.\", \"explanation\": \"No explanation.\", \"options\": [\"hat\", \"hast\", \"haben\", \"habe\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"We are in the garden.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"_____ ist mein Bruder. Er hei\\u00dft Tom.\", \"explanation\": \"No explanation.\", \"options\": [\"Das\", \"Er\", \"Sie\", \"Es\"]}], \"feedbackPrompt\": \"How did these exercises go? Let me know if you need more help with pronouns or verbs!\", \"vocabHelp\": [{\"word\": \"die Katze\", \"meaning\": \"the cat\"}, {\"word\": \"s\\u00fc\\u00df\", \"meaning\": \"cute\"}, {\"word\": \"der Garten\", \"meaning\": \"the garden\"}, {\"word\": \"der Bruder\", \"meaning\": \"the brother\"}, {\"word\": \"hei\\u00dfen\", \"meaning\": \"to be called\"}]}",
  "exercises_updated_at": "2025-07-12T07:05:45.497238",
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Ich _____ einen Hund. Er ist sehr freundlich.\", \"Wir _____ im Park. Es ist sch\\u00f6n hier.\", \"She has a cat.\"]"
}
2025-07-12 07:05:45,507 - routes.ai.helpers.exercise_helpers - INFO - Successfully completed generate_training_exercises for new user test4
2025-07-12 07:05:45,508 - routes.ai.training_routes - INFO - Returning new training exercises for user test4
2025-07-12 07:05:45,510 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:45] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:05:45,553 - routes.ai.training_routes - INFO - Training exercises request from user: test4
2025-07-12 07:05:45,554 - routes.ai.training_routes - INFO - Training request data for user test4: answers_count=0
2025-07-12 07:05:45,555 - routes.ai.training_routes - INFO - User test4 has no answers, checking cached exercises
2025-07-12 07:05:45,557 - routes.ai.training_routes - INFO - Found cached exercises for user test4
2025-07-12 07:05:45,557 - routes.ai.training_routes - INFO - Returning cached exercises for user test4
2025-07-12 07:05:45,559 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:45] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:05:49,134 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:49] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:05:49,147 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:49] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:05:49,160 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:49] "GET /api/profile HTTP/1.1" 200 -
2025-07-12 07:05:52,010 - app - INFO - User test4 requesting account deactivation
2025-07-12 07:05:52,014 - app - INFO - Deleted 1 records from ai_user_data for user test4
2025-07-12 07:05:52,014 - app - INFO - Deleted 0 records from vocab_log for user test4
2025-07-12 07:05:52,015 - app - INFO - Deleted 3 records from topic_memory for user test4
2025-07-12 07:05:52,015 - app - INFO - Deleted 0 records from results for user test4
2025-07-12 07:05:52,016 - app - INFO - Deleted 0 records from exercise_submissions for user test4
2025-07-12 07:05:52,016 - app - INFO - Deleted 0 records from lesson_progress for user test4
2025-07-12 07:05:52,017 - app - INFO - Deleted 1 records from users for user test4
2025-07-12 07:05:52,021 - app - INFO - Destroyed all sessions for user test4
2025-07-12 07:05:52,021 - app - INFO - Account deactivation completed for user test4. Deleted: AI data=1, vocab=0, topic_memory=3, results=0, exercise_submissions=0, lesson_progress=0, user=1
2025-07-12 07:05:52,022 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:52] "POST /api/settings/deactivate HTTP/1.1" 200 -
2025-07-12 07:05:57,910 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:57] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 07:05:58,011 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:58] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:05:58,022 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:58] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:05:58,028 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:05:58] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:06:01,260 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:06:01] "POST /api/user-level HTTP/1.1" 200 -
2025-07-12 07:06:01,284 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:06:01] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:06:06,071 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:06:06] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:06:06,076 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:06:06] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:06:06,081 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:06:06] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:06:06,083 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:06:06] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:06:06,092 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:06:06] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:08:24,648 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:08:24] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:08:24,650 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:08:24] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:08:24,666 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:08:24] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:08:24,691 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:08:24] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:08:24,700 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:08:24] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:08:39,042 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:08:39] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:08:39,045 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:08:39] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:08:39,051 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:08:39] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:08:39,085 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:08:39] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:08:39,096 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:08:39] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:09:44,149 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:09:44] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:09:44,162 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:09:44] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:09:44,180 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:09:44] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:09:44,182 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:09:44] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:09:44,210 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:09:44] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:15:37,903 - routes.ai.training_routes - INFO - Training exercises request from user: hello
2025-07-12 07:15:37,905 - routes.ai.training_routes - INFO - Training request data for user hello: answers_count=0
2025-07-12 07:15:37,905 - routes.ai.training_routes - INFO - User hello has no answers, checking cached exercises
2025-07-12 07:15:37,906 - routes.ai.training_routes - INFO - Generating new training exercises for user hello
2025-07-12 07:15:37,907 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_training_exercises for user hello
2025-07-12 07:15:37,907 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user hello, limit=20
2025-07-12 07:15:37,908 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user hello
2025-07-12 07:15:37,908 - routes.ai.helpers.exercise_helpers - INFO - Detected new user hello, generating two unique blocks with different contexts
2025-07-12 07:15:37,908 - routes.ai.helpers.exercise_helpers - INFO - Generating blocks for new user hello
2025-07-12 07:15:37,908 - routes.ai.helpers.exercise_helpers - INFO - Generating first block for new user hello
2025-07-12 07:15:37,912 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user hello, limit=20
2025-07-12 07:15:37,913 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user hello
2025-07-12 07:15:37,914 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 0 recent questions for user hello
2025-07-12 07:15:37,914 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 07:15:37,914 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:15:37,915 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 07:15:37,915 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:15:37,915 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:15:37,915 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=0
2025-07-12 07:15:37,916 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:15:37,921 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:15:39,614 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:15:39] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:15:42,071 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:15:42,076 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:15:42,077 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1153 characters
2025-07-12 07:15:42,077 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:15:42,078 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:15:42,080 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user hello
2025-07-12 07:15:42,081 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user hello
2025-07-12 07:15:42,082 - routes.ai.helpers.exercise_helpers - INFO - Generated first block for new user hello with 3 exercises
2025-07-12 07:15:42,082 - routes.ai.helpers.exercise_helpers - INFO - Extracted 3 questions from first block for new user hello
2025-07-12 07:15:42,084 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user hello with 3 new questions, limit=20
2025-07-12 07:15:42,084 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user hello, limit=20
2025-07-12 07:15:42,088 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user hello
2025-07-12 07:15:42,089 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user hello: 3 total questions
2025-07-12 07:15:42,098 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user hello
2025-07-12 07:15:42,098 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user hello
2025-07-12 07:15:42,100 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for hello after after updating exercise history: {
  "username": "hello",
  "exercises": null,
  "next_exercises": null,
  "exercises_updated_at": null,
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"She is a teacher.\", \"____ bist du? (Where are you?)\", \"Ich ____ einen Bruder. (I have a brother.)\"]"
}
2025-07-12 07:15:42,207 - routes.ai.helpers.exercise_helpers - INFO - Generating second block for new user hello with different context
2025-07-12 07:15:42,207 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block with variation for new user hello with 3 exclude questions
2025-07-12 07:15:42,212 - routes.ai.helpers.exercise_helpers - INFO - Using 3 exclude questions as recent questions for variation
2025-07-12 07:15:42,212 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 07:15:42,212 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:15:42,213 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 07:15:42,213 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:15:42,213 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:15:42,213 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 07:15:42,214 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:15:42,216 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:15:45,889 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:15:45,892 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:15:45,892 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 994 characters
2025-07-12 07:15:45,893 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:15:45,893 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:15:45,894 - routes.ai.helpers.exercise_helpers - INFO - Generated 3 exercises in variation block for new user hello
2025-07-12 07:15:45,894 - routes.ai.helpers.exercise_helpers - INFO - Successfully created AI block with variation for new user hello: 3 exercises
2025-07-12 07:15:45,894 - routes.ai.helpers.exercise_helpers - INFO - Generated second block for new user hello with 3 exercises
2025-07-12 07:15:45,895 - routes.ai.helpers.exercise_helpers - INFO - After filtering duplicates for new user hello: 3 exercises remain
2025-07-12 07:15:45,895 - routes.ai.helpers.exercise_helpers - INFO - Final second block for new user hello: 3 exercises
2025-07-12 07:15:45,895 - routes.ai.helpers.exercise_helpers - INFO - Storing exercise blocks for new user hello
2025-07-12 07:15:45,902 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for hello after after storing both blocks: {
  "username": "hello",
  "exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"She is a teacher.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"____ bist du? (Where are you?)\", \"explanation\": \"No explanation.\", \"options\": [\"Wo\", \"Was\", \"Wie\", \"Wann\"]}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich ____ einen Bruder. (I have a brother.)\", \"explanation\": \"No explanation.\", \"options\": [\"bin\", \"habe\", \"ist\", \"hat\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you encounter any difficulties?\", \"vocabHelp\": [{\"word\": \"habe\", \"meaning\": \"have\"}, {\"word\": \"ist\", \"meaning\": \"is\"}, {\"word\": \"Wo\", \"meaning\": \"Where\"}, {\"word\": \"Lehrerin\", \"meaning\": \"teacher (female)\"}, {\"word\": \"Bruder\", \"meaning\": \"brother\"}]}",
  "next_exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"____ habe einen Hund. (I have a dog.)\", \"explanation\": \"No explanation.\", \"options\": [\"Ich\", \"Du\", \"Er\", \"Sie\"]}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"____ sind wir? (Where are we?)\", \"explanation\": \"No explanation.\", \"options\": [\"Wo\", \"Wer\", \"Was\", \"Wann\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"He is a doctor.\", \"explanation\": \"No explanation.\"}], \"feedbackPrompt\": \"How did you find these exercises? Did you learn any new words?\", \"vocabHelp\": [{\"word\": \"Hund\", \"meaning\": \"dog\"}, {\"word\": \"Arzt\", \"meaning\": \"doctor\"}, {\"word\": \"Wo\", \"meaning\": \"where\"}]}",
  "exercises_updated_at": "2025-07-12T07:15:45.896289",
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"She is a teacher.\", \"____ bist du? (Where are you?)\", \"Ich ____ einen Bruder. (I have a brother.)\"]"
}
2025-07-12 07:15:45,902 - routes.ai.helpers.exercise_helpers - INFO - Successfully completed generate_training_exercises for new user hello
2025-07-12 07:15:45,903 - routes.ai.training_routes - INFO - Returning new training exercises for user hello
2025-07-12 07:15:45,904 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:15:45] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:15:45,941 - routes.ai.training_routes - INFO - Training exercises request from user: hello
2025-07-12 07:15:45,941 - routes.ai.training_routes - INFO - Training request data for user hello: answers_count=0
2025-07-12 07:15:45,941 - routes.ai.training_routes - INFO - User hello has no answers, checking cached exercises
2025-07-12 07:15:45,943 - routes.ai.training_routes - INFO - Found cached exercises for user hello
2025-07-12 07:15:45,943 - routes.ai.training_routes - INFO - Returning cached exercises for user hello
2025-07-12 07:15:45,944 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:15:45] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:16:25,543 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:16:25] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:16:25,553 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:16:25] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:16:25,565 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:16:25] "GET /api/profile HTTP/1.1" 200 -
2025-07-12 07:16:29,276 - app - INFO - User hello requesting account deactivation
2025-07-12 07:16:29,281 - app - INFO - Deleted 1 records from ai_user_data for user hello
2025-07-12 07:16:29,282 - app - INFO - Deleted 0 records from vocab_log for user hello
2025-07-12 07:16:29,282 - app - INFO - Deleted 3 records from topic_memory for user hello
2025-07-12 07:16:29,283 - app - INFO - Deleted 0 records from results for user hello
2025-07-12 07:16:29,283 - app - INFO - Deleted 0 records from exercise_submissions for user hello
2025-07-12 07:16:29,283 - app - INFO - Deleted 0 records from lesson_progress for user hello
2025-07-12 07:16:29,285 - app - INFO - Deleted 1 records from users for user hello
2025-07-12 07:16:29,290 - app - INFO - Destroyed all sessions for user hello
2025-07-12 07:16:29,290 - app - INFO - Account deactivation completed for user hello. Deleted: AI data=1, vocab=0, topic_memory=3, results=0, exercise_submissions=0, lesson_progress=0, user=1
2025-07-12 07:16:29,291 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:16:29] "POST /api/settings/deactivate HTTP/1.1" 200 -
2025-07-12 07:16:35,491 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:16:35] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 07:16:35,592 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:16:35] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:16:35,600 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:16:35] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:16:35,619 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:16:35] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:16:39,167 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:16:39] "POST /api/user-level HTTP/1.1" 200 -
2025-07-12 07:16:39,271 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:16:39] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:19:01,118 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 07:19:01,118 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 07:19:01,119 - werkzeug - INFO -  * Restarting with stat
2025-07-12 07:19:02,491 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 07:19:02,495 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 07:19:07,425 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:07] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:19:07,426 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:07] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:19:07,449 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:07] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:19:07,456 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:07] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:19:07,473 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:07] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:19:10,588 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:10] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:19:10,599 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:10] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:19:10,605 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:10] "GET /api/profile HTTP/1.1" 200 -
2025-07-12 07:19:14,586 - app - INFO - User hello requesting account deactivation
2025-07-12 07:19:14,589 - app - INFO - Deleted 0 records from ai_user_data for user hello
2025-07-12 07:19:14,590 - app - INFO - Deleted 0 records from vocab_log for user hello
2025-07-12 07:19:14,592 - app - INFO - Deleted 3 records from topic_memory for user hello
2025-07-12 07:19:14,592 - app - INFO - Deleted 0 records from results for user hello
2025-07-12 07:19:14,593 - app - INFO - Deleted 0 records from exercise_submissions for user hello
2025-07-12 07:19:14,593 - app - INFO - Deleted 0 records from lesson_progress for user hello
2025-07-12 07:19:14,594 - app - INFO - Deleted 1 records from users for user hello
2025-07-12 07:19:14,602 - app - INFO - Destroyed all sessions for user hello
2025-07-12 07:19:14,602 - app - INFO - Account deactivation completed for user hello. Deleted: AI data=0, vocab=0, topic_memory=3, results=0, exercise_submissions=0, lesson_progress=0, user=1
2025-07-12 07:19:14,603 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:14] "POST /api/settings/deactivate HTTP/1.1" 200 -
2025-07-12 07:19:24,580 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:24] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 07:19:24,678 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:24] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:19:24,690 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:24] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:19:24,699 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:24] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:19:27,570 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:27] "POST /api/user-level HTTP/1.1" 200 -
2025-07-12 07:19:27,600 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:19:27] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:21:34,307 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:21:34] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:21:34,321 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:21:34] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:21:34,327 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:21:34] "GET /api/profile HTTP/1.1" 200 -
2025-07-12 07:21:43,923 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:21:43] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:22:07,295 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:22:07] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:22:07,306 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:22:07] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:22:07,313 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:22:07] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:22:07,335 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:22:07] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:22:17,653 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:22:17,655 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:22:17,655 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:22:17,657 - routes.ai.training_routes - INFO - Generating new training exercises for user dh
2025-07-12 07:22:17,658 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_training_exercises for user dh
2025-07-12 07:22:17,659 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:22:17,660 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user dh
2025-07-12 07:22:17,660 - routes.ai.helpers.exercise_helpers - INFO - Detected new user dh, generating two unique blocks with different contexts
2025-07-12 07:22:17,660 - routes.ai.helpers.exercise_helpers - INFO - Generating blocks for new user dh
2025-07-12 07:22:17,661 - routes.ai.helpers.exercise_helpers - INFO - Generating first block for new user dh
2025-07-12 07:22:17,667 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:22:17,669 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user dh
2025-07-12 07:22:17,669 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 0 recent questions for user dh
2025-07-12 07:22:17,670 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 07:22:17,670 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:22:17,670 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 07:22:17,671 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:22:17,671 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:22:17,672 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=0
2025-07-12 07:22:17,672 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:22:17,698 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:21,834 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:21,839 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:22:21,840 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1055 characters
2025-07-12 07:22:21,841 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:22:21,841 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:22:21,842 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user dh
2025-07-12 07:22:21,843 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user dh
2025-07-12 07:22:21,843 - routes.ai.helpers.exercise_helpers - INFO - Generated first block for new user dh with 3 exercises
2025-07-12 07:22:21,844 - routes.ai.helpers.exercise_helpers - INFO - Extracted 3 questions from first block for new user dh
2025-07-12 07:22:21,844 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user dh with 3 new questions, limit=20
2025-07-12 07:22:21,844 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:22:21,847 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user dh
2025-07-12 07:22:21,847 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user dh: 3 total questions
2025-07-12 07:22:21,855 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user dh
2025-07-12 07:22:21,855 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user dh
2025-07-12 07:22:21,857 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for dh after after updating exercise history: {
  "username": "dh",
  "exercises": null,
  "next_exercises": null,
  "exercises_updated_at": null,
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Ich ___ einen Bruder. (I have a brother.)\", \"She is a teacher.\", \"___ du m\\u00fcde? (Are you tired?)\"]"
}
2025-07-12 07:22:21,963 - routes.ai.helpers.exercise_helpers - INFO - Generating second block for new user dh with different context
2025-07-12 07:22:21,965 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block with variation for new user dh with 3 exclude questions
2025-07-12 07:22:21,972 - routes.ai.helpers.exercise_helpers - INFO - Using 3 exclude questions as recent questions for variation
2025-07-12 07:22:21,973 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 07:22:21,973 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:22:21,974 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 07:22:21,974 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:22:21,974 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:22:21,975 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 07:22:21,975 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:22:21,977 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:25,522 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:25,523 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:22:25,523 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1033 characters
2025-07-12 07:22:25,523 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:22:25,524 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:22:25,524 - routes.ai.helpers.exercise_helpers - INFO - Generated 3 exercises in variation block for new user dh
2025-07-12 07:22:25,524 - routes.ai.helpers.exercise_helpers - INFO - Successfully created AI block with variation for new user dh: 3 exercises
2025-07-12 07:22:25,524 - routes.ai.helpers.exercise_helpers - INFO - Generated second block for new user dh with 3 exercises
2025-07-12 07:22:25,525 - routes.ai.helpers.exercise_helpers - INFO - After filtering duplicates for new user dh: 3 exercises remain
2025-07-12 07:22:25,525 - routes.ai.helpers.exercise_helpers - INFO - Final second block for new user dh: 3 exercises
2025-07-12 07:22:25,525 - routes.ai.helpers.exercise_helpers - INFO - Storing exercise blocks for new user dh
2025-07-12 07:22:25,530 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for dh after after storing both blocks: {
  "username": "dh",
  "exercises": "{\"lessonId\": \"dynamic-ai-lesson\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich ___ einen Bruder. (I have a brother.)\", \"explanation\": \"No explanation.\", \"options\": [\"bin\", \"hast\", \"hat\", \"habe\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"She is a teacher.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"___ du m\\u00fcde? (Are you tired?)\", \"explanation\": \"No explanation.\", \"options\": [\"Bist\", \"Hast\", \"Hat\", \"Hab\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you notice any patterns or have any questions?\", \"vocabHelp\": [{\"word\": \"habe\", \"meaning\": \"have (I)\"}, {\"word\": \"Lehrerin\", \"meaning\": \"teacher (female)\"}, {\"word\": \"m\\u00fcde\", \"meaning\": \"tired\"}]}",
  "next_exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"___ habe einen Hund. (I have a dog.)\", \"explanation\": \"No explanation.\", \"options\": [\"Ich\", \"Du\", \"Er\", \"Sie\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"He is a doctor.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"___ bist gl\\u00fccklich. (You are happy.)\", \"explanation\": \"No explanation.\", \"options\": [\"Ich\", \"Du\", \"Er\", \"Wir\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you notice any patterns in the grammar or vocabulary?\", \"vocabHelp\": [{\"word\": \"Hund\", \"meaning\": \"dog\"}, {\"word\": \"Arzt\", \"meaning\": \"doctor\"}, {\"word\": \"gl\\u00fccklich\", \"meaning\": \"happy\"}]}",
  "exercises_updated_at": "2025-07-12T07:22:25.525456",
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Ich ___ einen Bruder. (I have a brother.)\", \"She is a teacher.\", \"___ du m\\u00fcde? (Are you tired?)\"]"
}
2025-07-12 07:22:25,530 - routes.ai.helpers.exercise_helpers - INFO - Successfully completed generate_training_exercises for new user dh
2025-07-12 07:22:25,530 - routes.ai.training_routes - INFO - Returning new training exercises for user dh
2025-07-12 07:22:25,531 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:22:25] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:22:25,542 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:22:25,542 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:22:25,543 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:22:25,544 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:22:25,544 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:22:25,544 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:22:25] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:22:39,119 - routes.ai.exercise_routes - INFO - Exercise submission request for user dh, block training
2025-07-12 07:22:39,121 - routes.ai.exercise_routes - INFO - Received submission data for user dh: {
  "answers": {
    "ex1": "habe",
    "ex2": "Sie ist ein Lehrer.",
    "ex3": "Hast"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "bin",
          "hast",
          "hat",
          "habe"
        ],
        "question": "Ich ___ einen Bruder. (I have a brother.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is a teacher.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Bist",
          "Hast",
          "Hat",
          "Hab"
        ],
        "question": "___ du m\u00fcde? (Are you tired?)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "have (I)",
        "word": "habe"
      },
      {
        "meaning": "teacher (female)",
        "word": "Lehrerin"
      },
      {
        "meaning": "tired",
        "word": "m\u00fcde"
      }
    ]
  }
}
2025-07-12 07:22:39,122 - routes.ai.exercise_routes - INFO - Parsed submission for user dh: 3 exercises, 3 answers
2025-07-12 07:22:39,122 - routes.ai.exercise_routes - INFO - Evaluating exercises for user dh
2025-07-12 07:22:39,123 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-12 07:22:39,124 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-12 07:22:39,124 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-12 07:22:39,124 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-12 07:22:39,128 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:42,227 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:42,229 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-12 07:22:42,230 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 257 characters
2025-07-12 07:22:42,230 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-12 07:22:42,231 - routes.ai.exercise_routes - INFO - Evaluation successful for user dh
2025-07-12 07:22:42,232 - routes.ai.exercise_routes - INFO - Summary for user dh: {'correct': 1, 'total': 3, 'mistakes': [{'question': 'She is a teacher.', 'your_answer': 'Sie ist ein Lehrer.', 'correct_answer': 'Sie ist eine Lehrerin.'}, {'question': '___ du müde? (Are you tired?)', 'your_answer': 'Hast', 'correct_answer': 'Bist'}]}
2025-07-12 07:22:42,232 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user dh
2025-07-12 07:22:42,237 - routes.ai.exercise_routes - INFO - Got 0 vocab and 3 topic entries for user dh
2025-07-12 07:22:42,239 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:44,553 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:44,555 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user dh
2025-07-12 07:22:44,556 - routes.ai.exercise_routes - INFO - Saving exercise submission for user dh
2025-07-12 07:22:44,556 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T07:22:44.556777",
  "event_type": "submission_start",
  "username": "dh",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "habe",
      "ex2": "Sie ist ein Lehrer.",
      "ex3": "Hast"
    }
  }
}
2025-07-12 07:22:44,557 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user dh, block training
2025-07-12 07:22:44,558 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user dh
2025-07-12 07:22:44,558 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user dh, block training, answers_count=3
2025-07-12 07:22:44,560 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user dh
2025-07-12 07:22:44,560 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user dh: correct=1, quality=5
2025-07-12 07:22:44,562 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user dh
2025-07-12 07:22:44,562 - routes.ai.exercise_routes - INFO - Exercise submission completed for user dh, passed=False
2025-07-12 07:22:44,563 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:44,564 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:22:44,567 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:44,572 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user dh
2025-07-12 07:22:44,572 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user dh
2025-07-12 07:22:44,572 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user dh
2025-07-12 07:22:44,580 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:22:44,584 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user dh
2025-07-12 07:22:44,585 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user dh
2025-07-12 07:22:44,585 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 07:22:44,585 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:22:44,586 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 07:22:44,586 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:22:44,586 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:22:44,587 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 07:22:44,587 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:22:44,588 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:45,076 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:45,081 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:45,270 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:45,273 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'nominative case', 'present tense', 'verb conjugation']
2025-07-12 07:22:45,273 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=indefinite article, skill=gap-fill
2025-07-12 07:22:45,290 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=nominative case, skill=gap-fill
2025-07-12 07:22:45,299 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=present tense, skill=gap-fill
2025-07-12 07:22:45,305 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=verb conjugation, skill=gap-fill
2025-07-12 07:22:45,321 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user dh
2025-07-12 07:22:45,323 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:46,173 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:46,177 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:46,816 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:46,821 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:46,955 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:46,967 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:47,992 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:47,994 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:22:47,995 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1024 characters
2025-07-12 07:22:47,995 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:22:47,996 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:22:47,997 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user dh
2025-07-12 07:22:47,998 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user dh
2025-07-12 07:22:47,998 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user dh: True
2025-07-12 07:22:47,998 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user dh to avoid duplicates
2025-07-12 07:22:47,999 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user dh
2025-07-12 07:22:47,999 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user dh: 3 exercises
2025-07-12 07:22:47,999 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user dh
2025-07-12 07:22:48,004 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user dh
2025-07-12 07:22:48,223 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:48,227 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:48,509 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:48,523 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:48,820 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:48,823 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:49,797 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:49,830 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:50,383 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:50,388 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:22:50] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-12 07:22:50,417 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:22:50,418 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=3
2025-07-12 07:22:50,418 - routes.ai.training_routes - INFO - User dh has answers, checking cached next exercises
2025-07-12 07:22:50,420 - routes.ai.training_routes - INFO - Found cached next exercises for user dh
2025-07-12 07:22:50,420 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user dh
2025-07-12 07:22:50,420 - routes.ai.training_routes - INFO - Storing exercises for user dh
2025-07-12 07:22:50,424 - routes.ai.training_routes - INFO - Running prefetch next exercises for user dh
2025-07-12 07:22:50,425 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user dh
2025-07-12 07:22:50,425 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user dh
2025-07-12 07:22:50,426 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:22:50,427 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:22:50] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:22:50,429 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user dh
2025-07-12 07:22:50,430 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user dh
2025-07-12 07:22:50,431 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user dh
2025-07-12 07:22:50,434 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:22:50,459 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user dh
2025-07-12 07:22:50,459 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user dh
2025-07-12 07:22:50,460 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=3, topic_count=3
2025-07-12 07:22:50,460 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:22:50,460 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 07:22:50,460 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:22:50,461 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:22:50,461 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 07:22:50,474 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:22:50,476 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:22:53,886 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:22:53,890 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:22:53,892 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1009 characters
2025-07-12 07:22:53,892 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:22:53,892 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:22:53,893 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user dh
2025-07-12 07:22:53,893 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user dh
2025-07-12 07:22:53,893 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user dh: True
2025-07-12 07:22:53,893 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user dh to avoid duplicates
2025-07-12 07:22:53,894 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user dh
2025-07-12 07:22:53,894 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user dh: 3 exercises
2025-07-12 07:22:53,894 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user dh
2025-07-12 07:22:53,897 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user dh
2025-07-12 07:23:01,514 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:01,554 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:02,674 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:02,686 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user dh: correct=0, quality=2
2025-07-12 07:23:02,687 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:03,521 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:03,523 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'verb']
2025-07-12 07:23:03,523 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=indefinite article, skill=translation
2025-07-12 07:23:03,532 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=noun, skill=translation
2025-07-12 07:23:03,537 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=personal pronoun, skill=translation
2025-07-12 07:23:03,542 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=verb, skill=translation
2025-07-12 07:23:03,546 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user dh
2025-07-12 07:23:03,548 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:06,483 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:06,506 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:07,198 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:23:07,198 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:23:07,199 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:23:07,200 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:23:07,200 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:23:07,201 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:23:07] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:23:07,771 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:07,781 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:13,427 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:13,452 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:15,484 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:15,517 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:16,922 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:16,936 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:18,105 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:18,112 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user dh: correct=0, quality=2
2025-07-12 07:23:18,112 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:18,714 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:18,717 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['adjective', 'personal pronoun', 'question formation', 'subject-verb inversion', 'verb conjugation']
2025-07-12 07:23:18,718 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=adjective, skill=gap-fill
2025-07-12 07:23:18,730 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=personal pronoun, skill=gap-fill
2025-07-12 07:23:18,735 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=question formation, skill=gap-fill
2025-07-12 07:23:18,741 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=subject-verb inversion, skill=gap-fill
2025-07-12 07:23:18,746 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=verb conjugation, skill=gap-fill
2025-07-12 07:23:18,750 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user dh
2025-07-12 07:23:18,754 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:20,098 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:20,122 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:21,237 - routes.ai.exercise_routes - INFO - Exercise submission request for user dh, block training
2025-07-12 07:23:21,238 - routes.ai.exercise_routes - INFO - Received submission data for user dh: {
  "answers": {
    "ex2": "Sie ist ein Lehrer.",
    "ex3": "Hast",
    "ex1": "hat"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "bin",
          "hast",
          "hat",
          "habe"
        ],
        "question": "Ich ___ einen Bruder. (I have a brother.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is a teacher.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Bist",
          "Hast",
          "Hat",
          "Hab"
        ],
        "question": "___ du m\u00fcde? (Are you tired?)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "have (I)",
        "word": "habe"
      },
      {
        "meaning": "teacher (female)",
        "word": "Lehrerin"
      },
      {
        "meaning": "tired",
        "word": "m\u00fcde"
      }
    ]
  }
}
2025-07-12 07:23:21,238 - routes.ai.exercise_routes - INFO - Parsed submission for user dh: 3 exercises, 3 answers
2025-07-12 07:23:21,238 - routes.ai.exercise_routes - INFO - Evaluating exercises for user dh
2025-07-12 07:23:21,239 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-12 07:23:21,239 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-12 07:23:21,239 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-12 07:23:21,239 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-12 07:23:21,245 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:22,408 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:22,410 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-12 07:23:22,410 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 257 characters
2025-07-12 07:23:22,410 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-12 07:23:22,412 - routes.ai.exercise_routes - INFO - Evaluation successful for user dh
2025-07-12 07:23:22,412 - routes.ai.exercise_routes - INFO - Summary for user dh: {'correct': 0, 'total': 3, 'mistakes': [{'question': 'Ich ___ einen Bruder. (I have a brother.)', 'your_answer': 'hat', 'correct_answer': 'habe'}, {'question': 'She is a teacher.', 'your_answer': 'Sie ist ein Lehrer.', 'correct_answer': 'Sie ist eine Lehrerin.'}, {'question': '___ du müde? (Are you tired?)', 'your_answer': 'Hast', 'correct_answer': 'Bist'}]}
2025-07-12 07:23:22,413 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user dh
2025-07-12 07:23:22,416 - routes.ai.exercise_routes - INFO - Got 9 vocab and 12 topic entries for user dh
2025-07-12 07:23:22,417 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:25,110 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:25,112 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user dh
2025-07-12 07:23:25,113 - routes.ai.exercise_routes - INFO - Saving exercise submission for user dh
2025-07-12 07:23:25,114 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T07:23:25.113970",
  "event_type": "submission_start",
  "username": "dh",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex2": "Sie ist ein Lehrer.",
      "ex3": "Hast",
      "ex1": "hat"
    }
  }
}
2025-07-12 07:23:25,115 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user dh, block training
2025-07-12 07:23:25,116 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user dh, block training, answers_count=3
2025-07-12 07:23:25,116 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user dh
2025-07-12 07:23:25,117 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user dh: correct=0, quality=2
2025-07-12 07:23:25,116 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user dh
2025-07-12 07:23:25,120 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:25,120 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user dh
2025-07-12 07:23:25,120 - routes.ai.exercise_routes - INFO - Exercise submission completed for user dh, passed=False
2025-07-12 07:23:25,122 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:25,122 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:23:25,127 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user dh
2025-07-12 07:23:25,127 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user dh
2025-07-12 07:23:25,127 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user dh
2025-07-12 07:23:25,135 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:23:25,137 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user dh
2025-07-12 07:23:25,137 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user dh
2025-07-12 07:23:25,137 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=9, topic_count=12
2025-07-12 07:23:25,137 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:23:25,137 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 07:23:25,138 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:23:25,138 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:23:25,138 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 07:23:25,139 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:23:25,139 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:25,730 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:25,734 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:27,060 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:27,061 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:27,570 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:27,571 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:28,690 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:28,694 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:23:28,695 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1039 characters
2025-07-12 07:23:28,695 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:23:28,696 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:23:28,696 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user dh
2025-07-12 07:23:28,697 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user dh
2025-07-12 07:23:28,697 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user dh: True
2025-07-12 07:23:28,697 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user dh to avoid duplicates
2025-07-12 07:23:28,697 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user dh
2025-07-12 07:23:28,697 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user dh: 3 exercises
2025-07-12 07:23:28,698 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user dh
2025-07-12 07:23:28,703 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user dh
2025-07-12 07:23:28,996 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:29,001 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:29,645 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:29,647 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:29,647 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:29,650 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'sentence structure', 'verb']
2025-07-12 07:23:29,652 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=indefinite article, skill=translation
2025-07-12 07:23:29,652 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:29,673 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=noun, skill=translation
2025-07-12 07:23:29,685 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:29,691 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=personal pronoun, skill=translation
2025-07-12 07:23:29,699 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=sentence structure, skill=translation
2025-07-12 07:23:29,704 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=verb, skill=translation
2025-07-12 07:23:29,708 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user dh
2025-07-12 07:23:29,709 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:31,037 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:31,049 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:23:31] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-12 07:23:31,084 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:23:31,085 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=3
2025-07-12 07:23:31,085 - routes.ai.training_routes - INFO - User dh has answers, checking cached next exercises
2025-07-12 07:23:31,091 - routes.ai.training_routes - INFO - Found cached next exercises for user dh
2025-07-12 07:23:31,091 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user dh
2025-07-12 07:23:31,091 - routes.ai.training_routes - INFO - Storing exercises for user dh
2025-07-12 07:23:31,116 - routes.ai.training_routes - INFO - Running prefetch next exercises for user dh
2025-07-12 07:23:31,122 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user dh
2025-07-12 07:23:31,122 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user dh
2025-07-12 07:23:31,137 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:23:31,140 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:23:31] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:23:31,145 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user dh
2025-07-12 07:23:31,145 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user dh
2025-07-12 07:23:31,145 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user dh
2025-07-12 07:23:31,151 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:23:31,152 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user dh
2025-07-12 07:23:31,152 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user dh
2025-07-12 07:23:31,152 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=10, topic_count=13
2025-07-12 07:23:31,153 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:23:31,153 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 07:23:31,153 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:23:31,153 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:23:31,153 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 07:23:31,157 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:23:31,158 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:31,990 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:32,005 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:32,786 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:32,797 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:33,131 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:33,159 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:23:33,160 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:23:33,160 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:23:33,165 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:33,171 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:23:33,172 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:23:33,173 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:23:33] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:23:34,512 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:34,533 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:34,925 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:34,936 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:35,798 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:35,817 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:35,979 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:35,983 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:23:35,984 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1022 characters
2025-07-12 07:23:35,984 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:23:35,985 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:23:35,986 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user dh
2025-07-12 07:23:35,987 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user dh
2025-07-12 07:23:35,988 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user dh: True
2025-07-12 07:23:35,988 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user dh to avoid duplicates
2025-07-12 07:23:35,989 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user dh
2025-07-12 07:23:35,989 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user dh: 3 exercises
2025-07-12 07:23:35,990 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user dh
2025-07-12 07:23:35,987 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:35,994 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user dh
2025-07-12 07:23:36,004 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user dh: 13 results
2025-07-12 07:23:36,004 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user dh
2025-07-12 07:23:36,008 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user dh, block training
2025-07-12 07:23:36,010 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user dh with 3 new questions
2025-07-12 07:23:36,010 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user dh with 3 new questions, limit=20
2025-07-12 07:23:36,010 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:23:36,012 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user dh
2025-07-12 07:23:36,012 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user dh: 6 total questions
2025-07-12 07:23:36,016 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user dh
2025-07-12 07:23:36,016 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user dh
2025-07-12 07:23:36,017 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user dh
2025-07-12 07:23:36,017 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user dh
2025-07-12 07:23:36,017 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:23:36,018 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T07:23:36.017956",
  "event_type": "submission_complete",
  "username": "dh",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-12 07:23:36,019 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user dh
2025-07-12 07:23:36,019 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user dh
2025-07-12 07:23:36,020 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user dh
2025-07-12 07:23:36,022 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:23:36,023 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user dh
2025-07-12 07:23:36,023 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user dh
2025-07-12 07:23:36,024 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=12, topic_count=13
2025-07-12 07:23:36,024 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:23:36,024 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 07:23:36,024 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:23:36,024 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:23:36,024 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-12 07:23:36,024 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:23:36,028 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:36,839 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:36,848 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user dh: correct=0, quality=2
2025-07-12 07:23:36,849 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:37,509 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:37,513 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['adjective', 'personal pronoun', 'question formation', 'subject-verb inversion', 'verb conjugation']
2025-07-12 07:23:37,513 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=adjective, skill=gap-fill
2025-07-12 07:23:37,527 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=personal pronoun, skill=gap-fill
2025-07-12 07:23:37,535 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=question formation, skill=gap-fill
2025-07-12 07:23:37,541 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=subject-verb inversion, skill=gap-fill
2025-07-12 07:23:37,547 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=verb conjugation, skill=gap-fill
2025-07-12 07:23:37,552 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user dh
2025-07-12 07:23:37,559 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:39,351 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:39,382 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:39,908 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:39,911 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:23:39,911 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1051 characters
2025-07-12 07:23:39,911 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:23:39,913 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:23:39,916 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user dh
2025-07-12 07:23:39,916 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user dh
2025-07-12 07:23:39,916 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user dh: True
2025-07-12 07:23:39,917 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user dh to avoid duplicates
2025-07-12 07:23:39,918 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user dh
2025-07-12 07:23:39,919 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user dh: 3 exercises
2025-07-12 07:23:39,919 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user dh
2025-07-12 07:23:39,928 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user dh
2025-07-12 07:23:40,941 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:41,047 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user dh: correct=0, quality=2
2025-07-12 07:23:41,055 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:41,882 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:41,885 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'nominative case', 'present tense', 'verb conjugation']
2025-07-12 07:23:41,885 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=indefinite article, skill=gap-fill
2025-07-12 07:23:41,891 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=nominative case, skill=gap-fill
2025-07-12 07:23:41,900 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=present tense, skill=gap-fill
2025-07-12 07:23:41,907 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user dh, feature=verb conjugation, skill=gap-fill
2025-07-12 07:23:41,914 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user dh
2025-07-12 07:23:41,919 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:43,453 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:43,477 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:44,982 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:44,994 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:46,417 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:46,432 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:51,665 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:51,692 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:52,780 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:52,796 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user dh: 14 results
2025-07-12 07:23:52,797 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user dh
2025-07-12 07:23:52,802 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user dh, block training
2025-07-12 07:23:52,810 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user dh with 3 new questions
2025-07-12 07:23:52,810 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user dh with 3 new questions, limit=20
2025-07-12 07:23:52,810 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:23:52,812 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user dh
2025-07-12 07:23:52,812 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user dh: 9 total questions
2025-07-12 07:23:52,815 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user dh
2025-07-12 07:23:52,815 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user dh
2025-07-12 07:23:52,815 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user dh
2025-07-12 07:23:52,815 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user dh
2025-07-12 07:23:52,816 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:23:52,816 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T07:23:52.816091",
  "event_type": "submission_complete",
  "username": "dh",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-12 07:23:52,817 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user dh
2025-07-12 07:23:52,817 - routes.ai.helpers.exercise_helpers - INFO - Got 9 recent questions for user dh
2025-07-12 07:23:52,817 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user dh
2025-07-12 07:23:52,820 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:23:52,821 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user dh
2025-07-12 07:23:52,821 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 9 recent questions for user dh
2025-07-12 07:23:52,821 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=12, topic_count=16
2025-07-12 07:23:52,821 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:23:52,821 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 07:23:52,822 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:23:52,822 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:23:52,822 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=9
2025-07-12 07:23:52,822 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:23:52,823 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:23:56,962 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:23:56,965 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:23:56,965 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1101 characters
2025-07-12 07:23:56,965 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:23:56,966 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:23:56,967 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user dh
2025-07-12 07:23:56,967 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user dh
2025-07-12 07:23:56,969 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user dh: True
2025-07-12 07:23:56,969 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user dh to avoid duplicates
2025-07-12 07:23:56,970 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user dh
2025-07-12 07:23:56,970 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user dh: 3 exercises
2025-07-12 07:23:56,971 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user dh
2025-07-12 07:23:56,975 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user dh
2025-07-12 07:24:58,286 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:24:58,287 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:24:58,288 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:24:58,289 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:24:58,289 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:24:58,291 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:24:58] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:24:58,332 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:24:58,332 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:24:58,332 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:24:58,333 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:24:58,333 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:24:58,334 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:24:58] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:25:10,847 - routes.ai.exercise_routes - INFO - Exercise submission request for user dh, block training
2025-07-12 07:25:10,850 - routes.ai.exercise_routes - INFO - Received submission data for user dh: {
  "answers": {},
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Ich",
          "Du",
          "Wir",
          "Sie"
        ],
        "question": "___ bist gl\u00fccklich. (You are happy.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Du",
          "Er",
          "Sie"
        ],
        "question": "___ habe einen Hund. (I have a dog.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "He is a doctor.",
        "type": "translation"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "dog",
        "word": "Hund"
      },
      {
        "meaning": "doctor",
        "word": "Arzt"
      },
      {
        "meaning": "happy",
        "word": "gl\u00fccklich"
      }
    ]
  }
}
2025-07-12 07:25:10,856 - routes.ai.exercise_routes - INFO - Parsed submission for user dh: 3 exercises, 0 answers
2025-07-12 07:25:10,857 - routes.ai.exercise_routes - INFO - Evaluating exercises for user dh
2025-07-12 07:25:10,857 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=0
2025-07-12 07:25:10,858 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-12 07:25:10,858 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-12 07:25:10,858 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-12 07:25:10,860 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:25:12,225 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:25:12,229 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-12 07:25:12,229 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 375 characters
2025-07-12 07:25:12,229 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-12 07:25:12,231 - routes.ai.exercise_routes - INFO - Evaluation successful for user dh
2025-07-12 07:25:12,231 - routes.ai.exercise_routes - INFO - Summary for user dh: {'correct': 0, 'total': 3, 'mistakes': [{'question': '___ bist glücklich. (You are happy.)', 'your_answer': '', 'correct_answer': 'Du'}, {'question': '___ habe einen Hund. (I have a dog.)', 'your_answer': '', 'correct_answer': 'Ich'}, {'question': 'He is a doctor.', 'your_answer': '', 'correct_answer': 'Er ist ein Arzt.'}]}
2025-07-12 07:25:12,231 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user dh
2025-07-12 07:25:12,236 - routes.ai.exercise_routes - INFO - Got 12 vocab and 16 topic entries for user dh
2025-07-12 07:25:12,236 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:25:14,096 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:25:14,099 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user dh
2025-07-12 07:25:14,100 - routes.ai.exercise_routes - INFO - Saving exercise submission for user dh
2025-07-12 07:25:14,100 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T07:25:14.100743",
  "event_type": "submission_start",
  "username": "dh",
  "details": {
    "block_id": "training",
    "answers_count": 0,
    "exercises_count": 3,
    "answers": {}
  }
}
2025-07-12 07:25:14,105 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user dh, block training
2025-07-12 07:25:14,106 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user dh, block training, answers_count=0
2025-07-12 07:25:14,106 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user dh
2025-07-12 07:25:14,106 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user dh: 0 results
2025-07-12 07:25:14,107 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user dh
2025-07-12 07:25:14,105 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user dh
2025-07-12 07:25:14,109 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user dh
2025-07-12 07:25:14,109 - routes.ai.exercise_routes - INFO - Exercise submission completed for user dh, passed=False
2025-07-12 07:25:14,110 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:25:14,111 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:25:14,113 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user dh
2025-07-12 07:25:14,113 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user dh, block training
2025-07-12 07:25:14,113 - routes.ai.helpers.exercise_helpers - INFO - Got 9 recent questions for user dh
2025-07-12 07:25:14,114 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user dh
2025-07-12 07:25:14,123 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user dh with 3 new questions
2025-07-12 07:25:14,124 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user dh with 3 new questions, limit=20
2025-07-12 07:25:14,124 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:25:14,126 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user dh
2025-07-12 07:25:14,127 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user dh: 12 total questions
2025-07-12 07:25:14,127 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:25:14,129 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user dh
2025-07-12 07:25:14,129 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 9 recent questions for user dh
2025-07-12 07:25:14,129 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=12, topic_count=16
2025-07-12 07:25:14,130 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:25:14,130 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 07:25:14,130 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:25:14,131 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:25:14,131 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=9
2025-07-12 07:25:14,131 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:25:14,132 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:25:14,134 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user dh
2025-07-12 07:25:14,134 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user dh
2025-07-12 07:25:14,134 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user dh
2025-07-12 07:25:14,134 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user dh
2025-07-12 07:25:14,137 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:25:14,137 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T07:25:14.137279",
  "event_type": "submission_complete",
  "username": "dh",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-12 07:25:14,140 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user dh
2025-07-12 07:25:14,140 - routes.ai.helpers.exercise_helpers - INFO - Got 12 recent questions for user dh
2025-07-12 07:25:14,140 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user dh
2025-07-12 07:25:14,145 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user dh, limit=20
2025-07-12 07:25:14,148 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user dh
2025-07-12 07:25:14,148 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 12 recent questions for user dh
2025-07-12 07:25:14,149 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=12, topic_count=16
2025-07-12 07:25:14,149 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 07:25:14,149 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 07:25:14,149 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 07:25:14,149 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 07:25:14,149 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=12
2025-07-12 07:25:14,150 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 07:25:14,151 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:25:14,599 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:25:14,600 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:25:15,606 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:25:15,607 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:25:17,910 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:25:17,912 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:25:17,915 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1081 characters
2025-07-12 07:25:17,915 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:25:17,915 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:25:17,916 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user dh
2025-07-12 07:25:17,916 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user dh
2025-07-12 07:25:17,916 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user dh: True
2025-07-12 07:25:17,916 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user dh to avoid duplicates
2025-07-12 07:25:17,916 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user dh
2025-07-12 07:25:17,917 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user dh: 3 exercises
2025-07-12 07:25:17,917 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user dh
2025-07-12 07:25:17,920 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user dh
2025-07-12 07:25:18,176 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:25:18,178 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 07:25:18,179 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1079 characters
2025-07-12 07:25:18,179 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 07:25:18,180 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 07:25:18,180 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user dh
2025-07-12 07:25:18,181 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user dh
2025-07-12 07:25:18,181 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user dh: True
2025-07-12 07:25:18,181 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user dh to avoid duplicates
2025-07-12 07:25:18,181 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user dh
2025-07-12 07:25:18,181 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user dh: 3 exercises
2025-07-12 07:25:18,181 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user dh
2025-07-12 07:25:18,184 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user dh
2025-07-12 07:25:23,418 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:25:23,425 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:25:26,159 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:25:26,163 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:25:26,619 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:25:26,624 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 07:25:27,730 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 07:25:27,735 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:25:27] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-12 07:25:27,760 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:25:27,760 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:25:27,760 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:25:27,762 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:25:27,763 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:25:27,763 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:25:27] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:25:30,713 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:25:30,715 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:25:30,716 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:25:30,723 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:25:30,724 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:25:30,734 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:25:30] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:25:32,422 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:25:32] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:25:32,431 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:25:32] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:25:32,438 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:25:32] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:25:32,449 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:25:32] "GET /api/profile HTTP/1.1" 200 -
2025-07-12 07:25:48,164 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:25:48] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:25:48,178 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:25:48] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:25:48,186 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:25:48] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:25:48,209 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:25:48] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:26:03,994 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:26:03,995 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:26:03,995 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:26:03,996 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:26:03,997 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:26:03,998 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:26:03] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:26:04,011 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:26:04,012 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:26:04,012 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:26:04,015 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:26:04,015 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:26:04,016 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:26:04] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:26:26,784 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:26:26] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:26:26,795 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:26:26] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:26:26,807 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:26:26] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:26:26,824 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:26:26] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:26:51,848 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:26:51,849 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:26:51,849 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:26:51,851 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:26:51,852 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:26:51,853 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:26:51] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:26:51,877 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:26:51,877 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:26:51,878 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:26:51,880 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:26:51,880 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:26:51,881 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:26:51] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:29:05,093 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:29:05] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:29:05,486 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:29:05] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:29:06,059 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:29:06] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:29:06,647 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:29:06] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:29:14,121 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:29:14,122 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:29:14,122 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:29:14,125 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:29:14,126 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:29:14,127 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:29:14] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:29:14,682 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:29:14,682 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:29:14,682 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:29:14,683 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:29:14,683 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:29:14,684 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:29:14] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:29:38,572 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:29:38] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:29:40,158 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:29:40] "GET /api/vocab-train HTTP/1.1" 200 -
2025-07-12 07:29:42,609 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:29:42] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:31:00,290 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:31:00] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:31:01,073 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:31:01] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:31:01,205 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:31:01] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:31:01,909 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:31:01] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:31:24,618 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:31:24,621 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:31:24,623 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:31:24,625 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:31:24,625 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:31:24,626 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:31:24] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:31:25,160 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:31:25,160 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:31:25,160 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:31:25,162 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:31:25,162 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:31:25,162 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:31:25] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:32:12,297 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:32:12,299 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:32:12,300 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:32:12,310 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:32:12] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:32:12,316 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:32:12,317 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:32:12,320 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:32:12] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:32:12,777 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:32:12] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:32:47,290 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:32:47] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:32:47,713 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:32:47] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:32:48,279 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:32:48] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:32:48,987 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:32:48] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:32:52,213 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:32:52,213 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:32:52,213 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:32:52,215 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:32:52,216 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:32:52,216 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:32:52] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:32:52,801 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:32:52,801 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:32:52,802 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:32:52,804 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:32:52,804 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:32:52,805 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:32:52] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:33:47,147 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:33:47,150 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:33:47] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:33:47,151 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:33:47,153 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:33:47,164 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:33:47,165 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:33:47,172 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:33:47] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:33:47,610 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:33:47,610 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:33:47,611 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:33:47,615 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:33:47,615 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:33:47,616 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:33:47] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:33:47,616 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:33:47] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:33:56,543 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:33:56] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:33:56,983 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:33:56] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:33:57,564 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:33:57] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:33:58,272 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:33:58] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:34:03,177 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:34:03,178 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:34:03,179 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:34:03,182 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:34:03,182 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:34:03,185 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:34:03] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:34:03,729 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:34:03,729 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:34:03,730 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:34:03,733 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:34:03,733 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:34:03,734 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:34:03] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:34:20,001 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:34:20,003 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:34:20] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:34:20,003 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:34:20,005 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:34:20,010 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:34:20,011 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:34:20,011 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:34:20] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:34:20,544 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:34:20,544 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:34:20,544 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:34:20,546 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:34:20] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:34:20,551 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:34:20,551 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:34:20,551 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:34:20] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:34:29,261 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:34:29] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:34:29,686 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:34:29] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:34:30,265 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:34:30] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:34:31,059 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:34:31] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:34:38,026 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:34:38,027 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:34:38,027 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:34:38,029 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:34:38,029 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:34:38,032 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:34:38] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:34:38,589 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:34:38,590 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:34:38,590 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:34:38,594 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:34:38,594 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:34:38,595 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:34:38] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:36:44,910 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:36:44,911 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:36:44,913 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:36:44,913 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:36:44,913 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:36:44,915 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:36:44,920 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:36:44,921 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:36:44,921 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:36:44,921 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:36:44,926 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:36:44] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:36:44,930 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:36:44] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:37:11,215 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:37:11,216 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:37:11,217 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:37:11,217 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:37:11] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:37:11,221 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:37:11,221 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:37:11,221 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:37:11] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:37:11,732 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:37:11] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:37:11,744 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:37:11,745 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:37:11,746 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:37:11,748 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:37:11,748 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:37:11,749 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:37:11] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:37:20,286 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:37:20] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:37:20,712 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:37:20] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:37:21,282 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:37:21] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:37:21,940 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:37:21] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:37:32,873 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:37:32,873 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:37:32,873 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:37:32,877 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:37:32,877 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:37:32,879 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:37:32] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:37:33,397 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:37:33,397 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:37:33,398 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:37:33,400 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:37:33,400 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:37:33,401 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:37:33] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:38:56,470 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:38:56,473 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:38:56,476 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:38:56,482 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:38:56,482 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:38:56,485 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:38:56] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:38:56,572 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:38:56,572 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:38:56,572 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:38:56,573 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:38:56,573 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:38:56,574 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 07:38:56] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:39:37,849 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 07:39:37,849 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 07:39:37,850 - werkzeug - INFO -  * Restarting with stat
2025-07-12 07:39:39,398 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 07:39:39,400 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 07:39:46,302 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:39:46,304 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:39:46] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:39:46,304 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:39:46,307 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:39:46,309 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:39:46,309 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:39:46,310 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:39:46] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:39:46,858 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:39:46] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:39:46,862 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:39:46,863 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:39:46,863 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:39:46,865 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:39:46,865 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:39:46,866 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:39:46] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:39:54,952 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:39:54] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:39:55,360 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:39:55] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:39:55,932 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:39:55] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:39:56,562 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:39:56] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:40:02,216 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:40:02,217 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:40:02,217 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:40:02,221 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:40:02,222 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:40:02,226 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:40:02] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:40:02,756 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:40:02,757 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:40:02,757 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:40:02,759 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:40:02,759 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:40:02,760 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:40:02] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:41:15,178 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:41:15,179 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:41:15,180 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:41:15,184 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:41:15,184 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:41:15,187 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:41:15] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:41:17,227 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:41:17,231 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:41:17,232 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:41:17,236 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:41:17,237 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:41:17,239 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:41:17] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:41:17,576 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:41:17,576 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:41:17,576 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:41:17,578 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:41:17,580 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:41:17,581 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:41:17] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:41:46,101 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:41:46] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:41:46,553 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:41:46] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:41:47,122 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:41:47] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:41:47,752 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:41:47] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:41:47,775 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:41:47,776 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:41:47,776 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:41:47,779 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:41:47,780 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:41:47,780 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:41:47] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:41:48,362 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:41:48,362 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:41:48,362 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:41:48,364 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:41:48,364 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:41:48,365 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:41:48] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:44:31,189 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:44:31] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:44:31,864 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:44:31] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:44:31,931 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:44:31] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:44:32,661 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:44:32] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:44:36,313 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:44:36,314 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:44:36,314 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:44:36,321 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:44:36,321 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:44:36,322 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:44:36] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:44:36,902 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:44:36,902 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:44:36,903 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:44:36,905 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:44:36,905 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:44:36,906 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:44:36] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:46:13,480 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:46:13] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:46:13,480 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:46:13,482 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:46:13,482 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:46:13,493 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:46:13,493 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:46:13,495 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:46:13] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:46:14,047 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:46:14] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:46:38,368 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:46:38] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:46:38,368 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:46:38,370 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:46:38,371 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:46:38,375 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:46:38,375 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:46:38,376 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:46:38] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:46:38,884 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:46:38] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:46:38,895 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:46:38,895 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:46:38,895 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:46:38,901 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:46:38,902 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:46:38,902 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:46:38] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:46:51,868 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:46:51] "POST /api/login HTTP/1.1" 200 -
2025-07-12 07:46:52,278 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:46:52] "GET /api/me HTTP/1.1" 200 -
2025-07-12 07:46:52,854 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:46:52] "GET /api/role HTTP/1.1" 200 -
2025-07-12 07:46:53,476 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:46:53] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 07:46:57,152 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:46:57,153 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:46:57,153 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:46:57,154 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:46:57,155 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:46:57,156 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:46:57] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 07:46:57,723 - routes.ai.training_routes - INFO - Training exercises request from user: dh
2025-07-12 07:46:57,724 - routes.ai.training_routes - INFO - Training request data for user dh: answers_count=0
2025-07-12 07:46:57,724 - routes.ai.training_routes - INFO - User dh has no answers, checking cached exercises
2025-07-12 07:46:57,727 - routes.ai.training_routes - INFO - Found cached exercises for user dh
2025-07-12 07:46:57,727 - routes.ai.training_routes - INFO - Returning cached exercises for user dh
2025-07-12 07:46:57,728 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 07:46:57] "POST /api/training-exercises HTTP/1.1" 200 -
