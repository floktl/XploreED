2025-07-11 19:38:55,554 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:38:55] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:38:55,569 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:38:55] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:38:55,586 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:38:55] "GET /api/profile HTTP/1.1" 200 -
2025-07-11 19:38:59,210 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:38:59] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:39:01,574 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:39:01] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:39:40,399 - werkzeug - INFO -  * Detected change in '/app/src/routes/settings.py', reloading
2025-07-11 19:39:40,845 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:39:41,917 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:39:41,918 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:39:51,436 - app - INFO - User test2 requesting account deactivation
2025-07-11 19:39:51,436 - app - ERROR - Error deactivating account for user test2: name 'get_db_connection' is not defined
2025-07-11 19:39:51,440 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:39:51] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:40:07,635 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:07] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-11 19:40:07,712 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:07] "POST /api/login HTTP/1.1" 200 -
2025-07-11 19:40:07,723 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:07] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:40:07,732 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:07] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:40:11,137 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:11] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:40:11,144 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:11] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:40:11,150 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:11] "GET /api/profile HTTP/1.1" 200 -
2025-07-11 19:40:14,252 - app - INFO - User test3 requesting account deactivation
2025-07-11 19:40:14,253 - app - ERROR - Error deactivating account for user test3: name 'get_db_connection' is not defined
2025-07-11 19:40:14,254 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:14] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:40:46,630 - werkzeug - INFO -  * Detected change in '/app/src/routes/settings.py', reloading
2025-07-11 19:40:46,894 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:40:47,936 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:40:47,937 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:40:53,357 - app - INFO - User test3 requesting account deactivation
2025-07-11 19:40:53,359 - app - ERROR - Error deactivating account for user test3: 'sqlite3.Cursor' object does not support the context manager protocol
2025-07-11 19:40:53,367 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:53] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:40:57,872 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:57] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:40:57,882 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:57] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:40:59,525 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:59] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:40:59,548 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:40:59] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:41:00,567 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:41:00] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:41:00,574 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:41:00] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:41:03,550 - app - INFO - User test3 requesting account deactivation
2025-07-11 19:41:03,551 - app - ERROR - Error deactivating account for user test3: 'sqlite3.Cursor' object does not support the context manager protocol
2025-07-11 19:41:03,552 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:41:03] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:41:26,960 - werkzeug - INFO -  * Detected change in '/app/src/routes/settings.py', reloading
2025-07-11 19:41:27,246 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:41:28,278 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:41:28,279 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:41:34,373 - app - INFO - User test3 requesting account deactivation
2025-07-11 19:41:34,375 - app - ERROR - Error deactivating account for user test3: near "%": syntax error
2025-07-11 19:41:34,383 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:41:34] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:41:54,950 - werkzeug - INFO -  * Detected change in '/app/src/routes/settings.py', reloading
2025-07-11 19:41:55,208 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:41:56,246 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:41:56,247 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:41:59,522 - app - INFO - User test3 requesting account deactivation
2025-07-11 19:41:59,525 - app - INFO - Deleted 0 records from ai_user_data for user test3
2025-07-11 19:41:59,525 - app - INFO - Deleted 0 records from vocab_log for user test3
2025-07-11 19:41:59,527 - app - INFO - Deleted 3 records from topic_memory for user test3
2025-07-11 19:41:59,528 - app - ERROR - Error deactivating account for user test3: no such table: submissions
2025-07-11 19:41:59,531 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:41:59] "[35m[1mPOST /api/settings/deactivate HTTP/1.1[0m" 500 -
2025-07-11 19:43:23,754 - werkzeug - INFO -  * Detected change in '/app/src/routes/settings.py', reloading
2025-07-11 19:43:24,017 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:43:25,080 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:43:25,081 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:43:33,491 - app - INFO - User test3 requesting account deactivation
2025-07-11 19:43:33,494 - app - INFO - Deleted 0 records from ai_user_data for user test3
2025-07-11 19:43:33,494 - app - INFO - Deleted 0 records from vocab_log for user test3
2025-07-11 19:43:33,496 - app - INFO - Deleted 3 records from topic_memory for user test3
2025-07-11 19:43:33,496 - app - INFO - Deleted 0 records from results for user test3
2025-07-11 19:43:33,496 - app - INFO - Deleted 0 records from exercise_submissions for user test3
2025-07-11 19:43:33,497 - app - INFO - Deleted 0 records from lesson_progress for user test3
2025-07-11 19:43:33,498 - app - INFO - Deleted 1 records from users for user test3
2025-07-11 19:43:33,502 - app - INFO - Destroyed all sessions for user test3
2025-07-11 19:43:33,504 - app - INFO - Account deactivation completed for user test3. Deleted: AI data=0, vocab=0, topic_memory=3, results=0, exercise_submissions=0, lesson_progress=0, user=1
2025-07-11 19:43:33,506 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:33] "POST /api/settings/deactivate HTTP/1.1" 200 -
2025-07-11 19:43:43,472 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:43] "[31m[1mPOST /api/signup HTTP/1.1[0m" 400 -
2025-07-11 19:43:48,089 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:48] "POST /api/login HTTP/1.1" 200 -
2025-07-11 19:43:48,099 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:48] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:43:48,112 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:48] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:43:48,141 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:48] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 19:43:51,437 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:43:51,437 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:43:51,437 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:43:51,439 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:43:51,439 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:43:51,440 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:51] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:43:51,447 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:43:51,447 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:43:51,447 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:43:51,448 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:43:51,448 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:43:51,449 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:51] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:43:54,496 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:54] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:43:54,504 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:54] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:43:54,511 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:54] "GET /api/profile HTTP/1.1" 200 -
2025-07-11 19:43:57,867 - app - INFO - User test1 requesting account deactivation
2025-07-11 19:43:57,871 - app - INFO - Deleted 1 records from ai_user_data for user test1
2025-07-11 19:43:57,872 - app - INFO - Deleted 0 records from vocab_log for user test1
2025-07-11 19:43:57,874 - app - INFO - Deleted 24 records from topic_memory for user test1
2025-07-11 19:43:57,874 - app - INFO - Deleted 0 records from results for user test1
2025-07-11 19:43:57,875 - app - INFO - Deleted 7 records from exercise_submissions for user test1
2025-07-11 19:43:57,876 - app - INFO - Deleted 0 records from lesson_progress for user test1
2025-07-11 19:43:57,877 - app - INFO - Deleted 1 records from users for user test1
2025-07-11 19:43:57,885 - app - INFO - Destroyed all sessions for user test1
2025-07-11 19:43:57,885 - app - INFO - Account deactivation completed for user test1. Deleted: AI data=1, vocab=0, topic_memory=24, results=0, exercise_submissions=7, lesson_progress=0, user=1
2025-07-11 19:43:57,889 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:43:57] "POST /api/settings/deactivate HTTP/1.1" 200 -
2025-07-11 19:44:04,462 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:04] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-11 19:44:04,538 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:04] "POST /api/login HTTP/1.1" 200 -
2025-07-11 19:44:04,544 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:04] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:44:04,552 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:04] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:44:07,482 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:07] "POST /api/user-level HTTP/1.1" 200 -
2025-07-11 19:44:07,502 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:07] "GET /api/user-level HTTP/1.1" 200 -
2025-07-11 19:44:08,417 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:44:08,418 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:44:08,418 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:44:08,419 - routes.ai.training_routes - INFO - Generating new training exercises for user test1
2025-07-11 19:44:08,420 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_training_exercises for user test1
2025-07-11 19:44:08,420 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:08,421 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user test1
2025-07-11 19:44:08,421 - routes.ai.helpers.exercise_helpers - INFO - Detected new user test1, generating two unique blocks with different contexts
2025-07-11 19:44:08,421 - routes.ai.helpers.exercise_helpers - INFO - Generating blocks for new user test1
2025-07-11 19:44:08,422 - routes.ai.helpers.exercise_helpers - INFO - Generating first block for new user test1
2025-07-11 19:44:08,425 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:08,426 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user test1
2025-07-11 19:44:08,426 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 0 recent questions for user test1
2025-07-11 19:44:08,426 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-11 19:44:08,426 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:44:08,426 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-11 19:44:08,426 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:44:08,426 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:44:08,427 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=0
2025-07-11 19:44:08,429 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:44:08,435 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:12,939 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:12,942 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:44:12,942 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1197 characters
2025-07-11 19:44:12,943 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:44:12,943 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:44:12,945 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:44:12,945 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:44:12,946 - routes.ai.helpers.exercise_helpers - INFO - Generated first block for new user test1 with 3 exercises
2025-07-11 19:44:12,946 - routes.ai.helpers.exercise_helpers - INFO - Extracted 3 questions from first block for new user test1
2025-07-11 19:44:12,946 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:44:12,947 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:12,949 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user test1
2025-07-11 19:44:12,949 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 3 total questions
2025-07-11 19:44:12,958 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:44:12,959 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:44:12,960 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for test1 after after updating exercise history: {
  "username": "test1",
  "exercises": null,
  "next_exercises": null,
  "exercises_updated_at": null,
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Wir _____ im Park. (We are in the park.)\", \"She is a teacher.\", \"Ich _____ einen Hund. (I have a dog.)\"]"
}
2025-07-11 19:44:13,062 - routes.ai.helpers.exercise_helpers - INFO - Generating second block for new user test1 with different context
2025-07-11 19:44:13,062 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block with variation for new user test1 with 3 exclude questions
2025-07-11 19:44:13,073 - routes.ai.helpers.exercise_helpers - INFO - Using 3 exclude questions as recent questions for variation
2025-07-11 19:44:13,073 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-11 19:44:13,073 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:44:13,073 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-11 19:44:13,074 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:44:13,074 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:44:13,074 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-11 19:44:13,075 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:44:13,076 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:17,818 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:17,822 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:44:17,822 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1087 characters
2025-07-11 19:44:17,823 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:44:17,823 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:44:17,824 - routes.ai.helpers.exercise_helpers - INFO - Generated 3 exercises in variation block for new user test1
2025-07-11 19:44:17,825 - routes.ai.helpers.exercise_helpers - INFO - Successfully created AI block with variation for new user test1: 3 exercises
2025-07-11 19:44:17,825 - routes.ai.helpers.exercise_helpers - INFO - Generated second block for new user test1 with 3 exercises
2025-07-11 19:44:17,826 - routes.ai.helpers.exercise_helpers - INFO - After filtering duplicates for new user test1: 3 exercises remain
2025-07-11 19:44:17,826 - routes.ai.helpers.exercise_helpers - INFO - Final second block for new user test1: 3 exercises
2025-07-11 19:44:17,827 - routes.ai.helpers.exercise_helpers - INFO - Storing exercise blocks for new user test1
2025-07-11 19:44:17,839 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for test1 after after storing both blocks: {
  "username": "test1",
  "exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"Wir _____ im Park. (We are in the park.)\", \"explanation\": \"No explanation.\", \"options\": [\"sind\", \"haben\", \"bist\", \"hat\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"She is a teacher.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich _____ einen Hund. (I have a dog.)\", \"explanation\": \"No explanation.\", \"options\": [\"ist\", \"bin\", \"habe\", \"hat\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you notice any patterns or common mistakes?\", \"vocabHelp\": [{\"word\": \"habe\", \"meaning\": \"have (I)\"}, {\"word\": \"ist\", \"meaning\": \"is (he/she/it)\"}, {\"word\": \"sind\", \"meaning\": \"are (we/they)\"}, {\"word\": \"Lehrerin\", \"meaning\": \"teacher (female)\"}, {\"word\": \"Park\", \"meaning\": \"park\"}]}",
  "next_exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"_____ seid sehr nett. (You are very nice.)\", \"explanation\": \"No explanation.\", \"options\": [\"Sie\", \"Ihr\", \"Wir\", \"Du\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"I have a cat.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"_____ ist mein Bruder. (He is my brother.)\", \"explanation\": \"No explanation.\", \"options\": [\"Er\", \"Sie\", \"Es\", \"Wir\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you notice any patterns or have any questions about the grammar or vocabulary?\", \"vocabHelp\": [{\"word\": \"der Bruder\", \"meaning\": \"the brother\"}, {\"word\": \"die Katze\", \"meaning\": \"the cat\"}, {\"word\": \"nett\", \"meaning\": \"nice\"}]}",
  "exercises_updated_at": "2025-07-11T19:44:17.828360",
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Wir _____ im Park. (We are in the park.)\", \"She is a teacher.\", \"Ich _____ einen Hund. (I have a dog.)\"]"
}
2025-07-11 19:44:17,839 - routes.ai.helpers.exercise_helpers - INFO - Successfully completed generate_training_exercises for new user test1
2025-07-11 19:44:17,840 - routes.ai.training_routes - INFO - Returning new training exercises for user test1
2025-07-11 19:44:17,842 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:17] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:44:17,856 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:44:17,856 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:44:17,856 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:44:17,858 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:44:17,858 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:44:17,860 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:17] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:44:31,150 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:44:31,153 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex3": "sind",
    "ex2": "Sie ist eine Lehererin.",
    "ex1": "bin"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "sind",
          "haben",
          "bist",
          "hat"
        ],
        "question": "Wir _____ im Park. (We are in the park.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is a teacher.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "ist",
          "bin",
          "habe",
          "hat"
        ],
        "question": "Ich _____ einen Hund. (I have a dog.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "have (I)",
        "word": "habe"
      },
      {
        "meaning": "is (he/she/it)",
        "word": "ist"
      },
      {
        "meaning": "are (we/they)",
        "word": "sind"
      },
      {
        "meaning": "teacher (female)",
        "word": "Lehrerin"
      },
      {
        "meaning": "park",
        "word": "Park"
      }
    ]
  }
}
2025-07-11 19:44:31,153 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:44:31,153 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:44:31,154 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:44:31,156 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:44:31,156 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:44:31,157 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:44:31,170 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:33,053 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:33,056 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:44:33,057 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 393 characters
2025-07-11 19:44:33,057 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:44:33,058 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:44:33,059 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 1, 'total': 3, 'mistakes': [{'question': 'She is a teacher.', 'your_answer': 'Sie ist eine Lehererin.', 'correct_answer': 'Sie ist eine Lehrerin.'}, {'question': 'Ich _____ einen Hund. (I have a dog.)', 'your_answer': 'bin', 'correct_answer': 'habe'}]}
2025-07-11 19:44:33,059 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:44:33,062 - routes.ai.exercise_routes - INFO - Got 0 vocab and 3 topic entries for user test1
2025-07-11 19:44:33,064 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:34,617 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:34,622 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:44:34,623 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:44:34,623 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:44:34.623490",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "sind",
      "ex2": "Sie ist eine Lehererin.",
      "ex1": "bin"
    }
  }
}
2025-07-11 19:44:34,625 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:44:34,626 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:44:34,626 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:44:34,626 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=1, quality=5
2025-07-11 19:44:34,626 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:44:34,628 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:34,628 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:44:34,628 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:44:34,630 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:34,632 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:34] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 19:44:34,636 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user test1
2025-07-11 19:44:34,636 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user test1
2025-07-11 19:44:34,636 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:44:34,643 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:34,647 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user test1
2025-07-11 19:44:34,647 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user test1
2025-07-11 19:44:34,648 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-11 19:44:34,649 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:44:34,649 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-11 19:44:34,649 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:44:34,650 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:44:34,650 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-11 19:44:34,651 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:44:34,652 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:34,649 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:44:34,653 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:44:34,653 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:44:34,662 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:44:34,664 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:44:34,665 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:44:34,679 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:44:34,680 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:44:34,680 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:44:34,683 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:34] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:44:34,683 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:34,688 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user test1
2025-07-11 19:44:34,688 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user test1
2025-07-11 19:44:34,688 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:44:34,693 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:44:34,695 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user test1
2025-07-11 19:44:34,695 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user test1
2025-07-11 19:44:34,695 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-11 19:44:34,695 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:44:34,695 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-11 19:44:34,696 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:44:34,696 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:44:34,696 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-11 19:44:34,696 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:44:34,697 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:35,139 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:35,143 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['personal pronoun', 'present tense', 'sentence structure', 'verb conjugation']
2025-07-11 19:44:35,143 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:44:35,153 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 19:44:35,161 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=gap-fill
2025-07-11 19:44:35,167 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 19:44:35,173 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 9 words from exercise ex3 for user test1
2025-07-11 19:44:35,175 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:36,433 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:36,462 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:37,967 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:37,992 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:38,008 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:38,009 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:44:38,009 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1019 characters
2025-07-11 19:44:38,010 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:44:38,010 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:44:38,011 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:44:38,011 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:44:38,011 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:44:38,012 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:44:38,012 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:44:38,012 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:44:38,013 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:44:38,016 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:44:38,236 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:38,239 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:44:38,240 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1073 characters
2025-07-11 19:44:38,241 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:44:38,241 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:44:38,242 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:44:38,243 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:44:38,243 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:44:38,243 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:44:38,244 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:44:38,244 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:44:38,245 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:44:38,249 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:44:39,522 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:39,549 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:40,528 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:40,563 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:41,563 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:41,586 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:43,396 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:43,420 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:44:43,423 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:43,989 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:43,993 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'present tense']
2025-07-11 19:44:43,993 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 19:44:44,010 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:44:44,017 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 19:44:44,022 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=translation
2025-07-11 19:44:44,032 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 19:44:44,038 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:46,904 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:46,926 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:49,168 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:49,180 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:50,696 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:44:50,697 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:44:50,698 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:44:50,700 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:44:50,700 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:44:50,703 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:44:50] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:44:50,768 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:50,779 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:53,122 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:53,137 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:54,149 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:54,170 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:56,319 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:56,326 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 19:44:56,326 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:56,973 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:56,978 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'personal pronoun', 'verb conjugation']
2025-07-11 19:44:56,979 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 19:44:56,996 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:44:57,005 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 19:44:57,012 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user test1
2025-07-11 19:44:57,016 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:58,128 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:58,147 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:44:59,072 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:44:59,095 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:00,188 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:00,206 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:03,056 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:03,072 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:04,016 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:04,034 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:05,512 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:45:05,513 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex3": "haben",
    "ex2": "Sie ist keine Leherein.",
    "ex1": "bin"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "sind",
          "haben",
          "bist",
          "hat"
        ],
        "question": "Wir _____ im Park. (We are in the park.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is a teacher.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "ist",
          "bin",
          "habe",
          "hat"
        ],
        "question": "Ich _____ einen Hund. (I have a dog.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "have (I)",
        "word": "habe"
      },
      {
        "meaning": "is (he/she/it)",
        "word": "ist"
      },
      {
        "meaning": "are (we/they)",
        "word": "sind"
      },
      {
        "meaning": "teacher (female)",
        "word": "Lehrerin"
      },
      {
        "meaning": "park",
        "word": "Park"
      }
    ]
  }
}
2025-07-11 19:45:05,513 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:45:05,513 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:45:05,513 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:45:05,513 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:45:05,514 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:45:05,514 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:45:05,515 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:05,526 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:05,534 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 11 results
2025-07-11 19:45:05,535 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:45:05,537 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:45:05,541 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:45:05,542 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:45:05,542 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:05,544 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user test1
2025-07-11 19:45:05,544 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 6 total questions
2025-07-11 19:45:05,549 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:45:05,550 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:45:05,550 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:45:05,551 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:45:05,552 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:05,553 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:45:05.553236",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:45:05,563 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:05,563 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user test1
2025-07-11 19:45:05,564 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:45:05,569 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:05,570 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:05,570 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user test1
2025-07-11 19:45:05,570 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=14, topic_count=10
2025-07-11 19:45:05,570 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:45:05,571 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:45:05,572 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:45:05,572 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:45:05,572 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-11 19:45:05,572 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:45:05,573 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:06,536 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:06,540 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:45:06,540 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 257 characters
2025-07-11 19:45:06,540 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:45:06,542 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:45:06,542 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': 'Wir _____ im Park. (We are in the park.)', 'your_answer': 'haben', 'correct_answer': 'sind'}, {'question': 'She is a teacher.', 'your_answer': 'Sie ist keine Leherein.', 'correct_answer': 'Sie ist eine Lehrerin.'}, {'question': 'Ich _____ einen Hund. (I have a dog.)', 'your_answer': 'bin', 'correct_answer': 'habe'}]}
2025-07-11 19:45:06,542 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:45:06,547 - routes.ai.exercise_routes - INFO - Got 14 vocab and 10 topic entries for user test1
2025-07-11 19:45:06,548 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:08,389 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:08,394 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:45:08,395 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:45:08,395 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:45:08.395421",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "haben",
      "ex2": "Sie ist keine Leherein.",
      "ex1": "bin"
    }
  }
}
2025-07-11 19:45:08,396 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:45:08,396 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:45:08,397 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:45:08,397 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 19:45:08,396 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:45:08,399 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:08,400 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:45:08,400 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:45:08,402 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:08,405 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:45:08] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 19:45:08,413 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:08,413 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user test1
2025-07-11 19:45:08,414 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:45:08,423 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:45:08,423 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:45:08,424 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:45:08,427 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:08,429 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:45:08,430 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:45:08,431 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:45:08,437 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:08,437 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user test1
2025-07-11 19:45:08,438 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=14, topic_count=10
2025-07-11 19:45:08,438 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:45:08,439 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:45:08,439 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:45:08,441 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:45:08,441 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-11 19:45:08,442 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:45:08,450 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:08,455 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:45:08,456 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:45:08,456 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:45:08,457 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:45:08] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:45:08,458 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:08,461 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:08,461 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user test1
2025-07-11 19:45:08,461 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:45:08,465 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:08,466 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:08,466 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user test1
2025-07-11 19:45:08,466 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=14, topic_count=10
2025-07-11 19:45:08,466 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:45:08,466 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:45:08,466 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:45:08,467 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:45:08,467 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-11 19:45:08,467 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:45:08,468 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:09,921 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:09,925 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['definite article', 'noun', 'personal pronoun', 'preposition', 'verb']
2025-07-11 19:45:09,926 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 19:45:09,937 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=gap-fill
2025-07-11 19:45:09,947 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:45:09,953 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=preposition, skill=gap-fill
2025-07-11 19:45:09,960 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 19:45:09,965 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 9 words from exercise ex3 for user test1
2025-07-11 19:45:09,967 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:11,214 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:11,217 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:45:11,218 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1203 characters
2025-07-11 19:45:11,219 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:45:11,220 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:45:11,221 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:45:11,221 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:45:11,221 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:45:11,221 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:45:11,221 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:45:11,222 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:45:11,222 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:45:11,225 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:45:11,406 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:11,421 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:13,343 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:13,353 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:14,177 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:14,178 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:14,182 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:45:14,184 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1054 characters
2025-07-11 19:45:14,184 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:45:14,183 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:45:14,185 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1049 characters
2025-07-11 19:45:14,185 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:45:14,185 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:45:14,186 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:45:14,187 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:45:14,187 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:45:14,187 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:45:14,186 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:45:14,188 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:45:14,188 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:45:14,188 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:45:14,189 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:45:14,188 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:45:14,190 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:45:14,190 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:45:14,190 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:45:14,191 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:45:14,191 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:45:14,198 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:45:14,203 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:45:15,980 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:15,992 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:17,204 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:17,355 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:25,183 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:25,210 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:45:25,212 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:25,995 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:25,999 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'present tense', 'profession']
2025-07-11 19:45:25,999 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 19:45:26,004 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:45:26,008 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 19:45:26,014 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=translation
2025-07-11 19:45:26,018 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=profession, skill=translation
2025-07-11 19:45:26,022 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 19:45:26,029 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:27,018 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:27,064 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:28,452 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:28,472 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:31,319 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:31,334 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:32,386 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:32,397 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:34,901 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:34,912 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 19:45:34,912 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:35,432 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:35,435 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'personal pronoun', 'present tense verb']
2025-07-11 19:45:35,435 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 19:45:35,446 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:45:35,449 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense verb, skill=gap-fill
2025-07-11 19:45:35,456 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user test1
2025-07-11 19:45:35,462 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:36,335 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:36,343 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:37,359 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:37,372 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:38,593 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:38,614 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:39,512 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:39,533 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:41,050 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:41,065 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 13 results
2025-07-11 19:45:41,066 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:45:41,070 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:45:41,076 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:45:41,076 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:45:41,076 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:41,078 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user test1
2025-07-11 19:45:41,078 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 9 total questions
2025-07-11 19:45:41,084 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:45:41,084 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:45:41,084 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:45:41,084 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:45:41,085 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:41,093 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:45:41.086138",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:45:41,099 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:45:41,099 - routes.ai.helpers.exercise_helpers - INFO - Got 9 recent questions for user test1
2025-07-11 19:45:41,100 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:45:41,105 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:45:41,106 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:45:41,106 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 9 recent questions for user test1
2025-07-11 19:45:41,107 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=14, topic_count=16
2025-07-11 19:45:41,107 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:45:41,107 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:45:41,107 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:45:41,108 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:45:41,108 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=9
2025-07-11 19:45:41,111 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:45:41,111 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:45:46,271 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:45:46,273 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:45:46,274 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1149 characters
2025-07-11 19:45:46,274 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:45:46,274 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:45:46,275 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:45:46,276 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:45:46,276 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:45:46,277 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:45:46,277 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:45:46,278 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:45:46,278 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:45:46,292 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:47:10,481 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/helpers/ai_evaluation_helpers.py', reloading
2025-07-11 19:47:10,755 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:47:11,756 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:47:11,756 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:47:11,769 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:47:11] "POST /api/support/feedback HTTP/1.1" 200 -
2025-07-11 19:47:11,783 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:47:11,784 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:47:11,784 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:47:11,785 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:47:11,786 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:47:11,786 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:47:11] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:47:31,273 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 19:47:31,519 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:47:32,443 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:47:32,444 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:48:40,935 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:48:40,937 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:48:40,937 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:48:40,938 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:48:40,938 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:48:40,940 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:48:40] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:48:40,956 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:48:40,957 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:48:40,957 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:48:40,958 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:48:40,958 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:48:40,958 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:48:40] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:49:01,574 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:49:01,576 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:49:01,576 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:49:01,578 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:49:01,578 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:49:01,581 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:49:01] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:49:14,768 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:49:14,772 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex2": "Sie habe eine Katze.",
    "ex1": "Er",
    "ex3": "Wir"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They have a cat.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Er",
          "Sie",
          "Es",
          "Wir"
        ],
        "question": "_____ ist mein Bruder. (He is my brother.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Wir",
          "Ihr",
          "Sie",
          "Er"
        ],
        "question": "_____ sind Freunde. (They are friends.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "the brother",
        "word": "der Bruder"
      },
      {
        "meaning": "the cat",
        "word": "die Katze"
      },
      {
        "meaning": "the friends",
        "word": "die Freunde"
      }
    ]
  }
}
2025-07-11 19:49:14,772 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:49:14,773 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:49:14,773 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:49:14,774 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:49:14,774 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:49:14,776 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:49:14,793 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:17,931 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:17,935 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:49:17,936 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 253 characters
2025-07-11 19:49:17,937 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:49:17,939 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:49:17,939 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 1, 'total': 3, 'mistakes': [{'question': 'They have a cat.', 'your_answer': 'Sie habe eine Katze.', 'correct_answer': 'Sie haben eine Katze.'}, {'question': '_____ sind Freunde. (They are friends.)', 'your_answer': 'Wir', 'correct_answer': 'Sie'}]}
2025-07-11 19:49:17,940 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:49:17,944 - routes.ai.exercise_routes - INFO - Got 14 vocab and 16 topic entries for user test1
2025-07-11 19:49:17,946 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:19,691 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:19,693 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:49:19,694 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:49:19,694 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:49:19.694708",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex2": "Sie habe eine Katze.",
      "ex1": "Er",
      "ex3": "Wir"
    }
  }
}
2025-07-11 19:49:19,696 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:49:19,696 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:49:19,697 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:49:19,699 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:49:19,699 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:49:19,699 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:49:19,699 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:49:19,700 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:49:19,701 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:19,703 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:19,706 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:49:19,707 - routes.ai.helpers.exercise_helpers - INFO - Got 9 recent questions for user test1
2025-07-11 19:49:19,707 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:49:19,713 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:49:19,715 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:49:19,715 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 9 recent questions for user test1
2025-07-11 19:49:19,716 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=14, topic_count=16
2025-07-11 19:49:19,716 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:49:19,716 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:49:19,716 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:49:19,717 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:49:19,717 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=9
2025-07-11 19:49:19,717 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:49:19,718 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:20,159 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:20,163 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:20,184 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:20,185 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'verb']
2025-07-11 19:49:20,186 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 19:49:20,195 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:49:20,202 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 19:49:20,209 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 19:49:20,216 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 19:49:20,219 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:21,784 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:21,784 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:21,792 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:21,821 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:22,435 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:22,441 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:49:22] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 19:49:22,455 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:49:22,455 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:49:22,456 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:49:22,458 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:49:22,458 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:49:22,459 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:49:22,465 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:49:22,465 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:49:22,466 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:49:22,467 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:49:22] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:49:22,467 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:49:22,471 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:49:22,471 - routes.ai.helpers.exercise_helpers - INFO - Got 9 recent questions for user test1
2025-07-11 19:49:22,471 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:49:22,480 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:49:22,483 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:49:22,483 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 9 recent questions for user test1
2025-07-11 19:49:22,483 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=15, topic_count=17
2025-07-11 19:49:22,483 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:49:22,483 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:49:22,484 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:49:22,484 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:49:22,484 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=9
2025-07-11 19:49:22,484 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:49:22,486 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:34,137 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:34,140 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:49:34,142 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1077 characters
2025-07-11 19:49:34,143 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:34,144 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:34,144 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:49:34,146 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:49:34,147 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:49:34,148 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1100 characters
2025-07-11 19:49:34,148 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:49:34,149 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:49:34,149 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:49:34,149 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:49:34,150 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:49:34,150 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:49:34,150 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:49:34,150 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:49:34,151 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:49:34,151 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:49:34,151 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:49:34,152 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:49:34,152 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:49:34,152 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:49:34,153 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:49:34,153 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:49:34,162 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:49:34,168 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:49:34,175 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:35,884 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:35,904 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:37,478 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:37,530 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=1, quality=5
2025-07-11 19:49:37,533 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:38,273 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:38,277 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['definite article', 'nominative case', 'personal pronoun']
2025-07-11 19:49:38,278 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 19:49:38,289 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 19:49:38,299 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:49:38,308 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 8 words from exercise ex1 for user test1
2025-07-11 19:49:38,317 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:44,528 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:44,567 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:46,380 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:46,422 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:47,625 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:47,649 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:48,989 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:49,006 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:50,086 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:50,105 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:51,728 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:51,762 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:54,595 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:54,615 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 19:49:54,616 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:55,180 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:55,183 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['personal pronoun', 'sentence structure', 'verb conjugation']
2025-07-11 19:49:55,183 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:49:55,192 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=gap-fill
2025-07-11 19:49:55,197 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 19:49:55,200 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user test1
2025-07-11 19:49:55,202 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:56,741 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:56,759 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:49:58,687 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:49:58,701 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:50:00,017 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:50:00,030 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 10 results
2025-07-11 19:50:00,030 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:50:00,032 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:50:00,034 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:50:00,034 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:50:00,034 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:50:00,035 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user test1
2025-07-11 19:50:00,035 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 12 total questions
2025-07-11 19:50:00,038 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:50:00,038 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:50:00,038 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:50:00,038 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:50:00,039 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:50:00,039 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:50:00.039390",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:50:00,040 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:50:00,040 - routes.ai.helpers.exercise_helpers - INFO - Got 12 recent questions for user test1
2025-07-11 19:50:00,040 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:50:00,042 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:50:00,042 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:50:00,043 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 12 recent questions for user test1
2025-07-11 19:50:00,043 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=20, topic_count=17
2025-07-11 19:50:00,043 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:50:00,043 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:50:00,043 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:50:00,043 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:50:00,044 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=12
2025-07-11 19:50:00,044 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:50:00,047 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:50:08,517 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:50:08,527 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:50:08,527 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1155 characters
2025-07-11 19:50:08,530 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:50:08,533 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:50:08,535 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:50:08,535 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:50:08,535 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:50:08,535 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:50:08,535 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:50:08,536 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:50:08,536 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:50:08,543 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:50:29,084 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/helpers/ai_evaluation_helpers.py', reloading
2025-07-11 19:50:29,334 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:50:30,229 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:50:30,231 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:50:40,351 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:50:40,354 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:50:40,355 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:50:40,360 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:50:40,360 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:50:40,363 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:50:40] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:50:52,997 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:50:52,998 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex1": "Sie",
    "ex2": "Sie haben eine Katzen.",
    "ex3": "Ihr"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They have a cat.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Er",
          "Sie",
          "Es",
          "Wir"
        ],
        "question": "_____ ist mein Bruder. (He is my brother.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Wir",
          "Ihr",
          "Sie",
          "Er"
        ],
        "question": "_____ sind Freunde. (They are friends.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "the brother",
        "word": "der Bruder"
      },
      {
        "meaning": "the cat",
        "word": "die Katze"
      },
      {
        "meaning": "the friends",
        "word": "die Freunde"
      }
    ]
  }
}
2025-07-11 19:50:52,998 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:50:52,998 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:50:52,999 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:50:52,999 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:50:52,999 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:50:53,000 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:50:53,011 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:00,706 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:00,710 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:51:00,711 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 253 characters
2025-07-11 19:51:00,711 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:51:00,712 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:51:00,712 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': 'They have a cat.', 'your_answer': 'Sie haben eine Katzen.', 'correct_answer': 'Sie haben eine Katze.'}, {'question': '_____ ist mein Bruder. (He is my brother.)', 'your_answer': 'Sie', 'correct_answer': 'Er'}, {'question': '_____ sind Freunde. (They are friends.)', 'your_answer': 'Ihr', 'correct_answer': 'Sie'}]}
2025-07-11 19:51:00,712 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:51:00,716 - routes.ai.exercise_routes - INFO - Got 20 vocab and 17 topic entries for user test1
2025-07-11 19:51:00,717 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:00,986 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 19:51:01,198 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:51:02,193 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:51:02,194 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:51:02,204 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:51:02,204 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:51:02,204 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:51:02,206 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:51:02,206 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:51:02,206 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:51:02,210 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:51:02,213 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:51:02,213 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:51:02,213 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:51:02,214 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:02] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:51:02,217 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:51:02,218 - routes.ai.helpers.exercise_helpers - INFO - Got 12 recent questions for user test1
2025-07-11 19:51:02,218 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:51:02,222 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:51:02,224 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:51:02,225 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 12 recent questions for user test1
2025-07-11 19:51:02,225 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=20, topic_count=17
2025-07-11 19:51:02,225 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:51:02,225 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:51:02,225 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:51:02,226 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:51:02,226 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=12
2025-07-11 19:51:02,226 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:51:02,231 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:03,254 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 19:51:03,385 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:51:04,206 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:51:04,207 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:51:23,027 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:23] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:51:23,028 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:51:23,029 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:51:23,029 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:51:23,041 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:51:23,041 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:51:23,042 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:23] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:51:23,043 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:23] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:51:23,051 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:51:23,051 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:51:23,051 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:51:23,052 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:51:23,052 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:51:23,053 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:23] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:51:35,603 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:51:35,604 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex1": "Es",
    "ex2": "Sie habe eine haus.",
    "ex3": "neben"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Sie",
          "Er",
          "Es",
          "Wir"
        ],
        "question": "_____ ist meine Schwester. (She is my sister.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "We have a house.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "auf",
          "unter",
          "neben",
          "hinter"
        ],
        "question": "Das Buch ist _____ dem Tisch. (The book is on the table.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "the sister",
        "word": "die Schwester"
      },
      {
        "meaning": "the house",
        "word": "das Haus"
      },
      {
        "meaning": "the table",
        "word": "der Tisch"
      },
      {
        "meaning": "on",
        "word": "auf"
      }
    ]
  }
}
2025-07-11 19:51:35,604 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:51:35,605 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:51:35,605 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:51:35,605 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:51:35,605 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:51:35,605 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:51:35,613 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:36,784 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:36,787 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:51:36,788 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 252 characters
2025-07-11 19:51:36,789 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:51:36,790 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:51:36,790 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ ist meine Schwester. (She is my sister.)', 'your_answer': 'Es', 'correct_answer': 'Sie'}, {'question': 'We have a house.', 'your_answer': 'Sie habe eine haus.', 'correct_answer': 'Wir haben ein Haus.'}, {'question': 'Das Buch ist _____ dem Tisch. (The book is on the table.)', 'your_answer': 'neben', 'correct_answer': 'auf'}]}
2025-07-11 19:51:36,790 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:51:36,793 - routes.ai.exercise_routes - INFO - Got 20 vocab and 17 topic entries for user test1
2025-07-11 19:51:36,794 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:40,164 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:40,168 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:51:40,168 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:51:40,169 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:51:40.168903",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "Es",
      "ex2": "Sie habe eine haus.",
      "ex3": "neben"
    }
  }
}
2025-07-11 19:51:40,172 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:51:40,172 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:51:40,172 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:51:40,173 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:51:40,173 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:51:40,173 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 19:51:40,174 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:51:40,174 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:51:40,176 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:40,180 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:40,185 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:51:40,185 - routes.ai.helpers.exercise_helpers - INFO - Got 12 recent questions for user test1
2025-07-11 19:51:40,185 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:51:40,192 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:51:40,195 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:51:40,195 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 12 recent questions for user test1
2025-07-11 19:51:40,196 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=20, topic_count=17
2025-07-11 19:51:40,196 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:51:40,196 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:51:40,196 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:51:40,197 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:51:40,197 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=12
2025-07-11 19:51:40,197 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:51:40,199 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:40,882 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:40,883 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:40,888 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['definite article', 'noun', 'personal pronoun', 'verb']
2025-07-11 19:51:40,894 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 19:51:40,901 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:40] "[35m[1mPOST /api/ai-exercise/training/submit HTTP/1.1[0m" 500 -
2025-07-11 19:51:40,917 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=gap-fill
2025-07-11 19:51:40,934 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:51:40,936 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:51:40,936 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:51:40,942 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:51:40,945 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:51:40,945 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:51:40,945 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:51:40,953 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:51:40,954 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:51:40,954 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:51:40,954 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:51:40,955 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:51:40] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:51:40,957 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 19:51:40,959 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:51:40,959 - routes.ai.helpers.exercise_helpers - INFO - Got 12 recent questions for user test1
2025-07-11 19:51:40,960 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:51:40,968 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 8 words from exercise ex1 for user test1
2025-07-11 19:51:40,970 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:51:40,974 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:40,975 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:51:40,975 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 12 recent questions for user test1
2025-07-11 19:51:40,975 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=20, topic_count=18
2025-07-11 19:51:40,975 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:51:40,976 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:51:40,976 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:51:40,976 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:51:40,976 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=12
2025-07-11 19:51:40,977 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:51:40,977 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:42,781 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:42,802 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:43,995 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:44,008 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:44,041 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:44,042 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:51:44,042 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1167 characters
2025-07-11 19:51:44,042 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:51:44,042 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:51:44,042 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:51:44,043 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:51:44,043 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:51:44,043 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:51:44,043 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:51:44,043 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:51:44,043 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:51:44,047 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:51:44,876 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:44,879 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:51:44,879 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1068 characters
2025-07-11 19:51:44,880 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:51:44,881 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:51:44,882 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:51:44,882 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:51:44,883 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:51:44,883 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:51:44,883 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:51:44,884 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:51:44,884 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:51:44,894 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:51:45,390 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:45,421 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:46,952 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:46,969 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:51:59,277 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:51:59,297 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:00,644 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:00,659 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:01,913 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:01,929 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:52:01,932 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:02,675 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:02,678 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'sentence structure', 'verb (haben)']
2025-07-11 19:52:02,678 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 19:52:02,685 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:52:02,690 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 19:52:02,693 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=translation
2025-07-11 19:52:02,722 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb (haben), skill=translation
2025-07-11 19:52:02,727 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 19:52:02,729 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:03,640 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:03,654 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:05,155 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:05,168 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:05,975 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:05,992 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:06,691 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:06,710 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 19:52:06,711 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:08,325 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:08,327 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['accusative case', 'dative case', 'definite article', 'nominative case', 'preposition', 'word order']
2025-07-11 19:52:08,327 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=accusative case, skill=gap-fill
2025-07-11 19:52:08,335 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=dative case, skill=gap-fill
2025-07-11 19:52:08,339 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 19:52:08,343 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 19:52:08,347 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=preposition, skill=gap-fill
2025-07-11 19:52:08,350 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=word order, skill=gap-fill
2025-07-11 19:52:08,354 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 10 words from exercise ex3 for user test1
2025-07-11 19:52:08,356 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:10,275 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:10,295 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:12,855 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:12,869 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:14,211 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:14,238 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:15,903 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:15,937 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:17,374 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:17,385 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 15 results
2025-07-11 19:52:17,385 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:52:17,387 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:52:17,389 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:52:17,389 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:52:17,389 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:17,390 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user test1
2025-07-11 19:52:17,390 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 15 total questions
2025-07-11 19:52:17,396 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:52:17,398 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:52:17,399 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:52:17,399 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:52:17,404 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:17,405 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:52:17.404665",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:52:17,412 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:52:17,412 - routes.ai.helpers.exercise_helpers - INFO - Got 15 recent questions for user test1
2025-07-11 19:52:17,414 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:52:17,427 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:17,429 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:52:17,429 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 15 recent questions for user test1
2025-07-11 19:52:17,429 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=24
2025-07-11 19:52:17,429 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:52:17,429 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:52:17,430 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:52:17,430 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:52:17,430 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=15
2025-07-11 19:52:17,430 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:52:17,432 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:21,638 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:21,640 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:52:21,640 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1084 characters
2025-07-11 19:52:21,640 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:52:21,641 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:52:21,642 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:52:21,642 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:52:21,643 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:52:21,643 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:52:21,644 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:52:21,644 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:52:21,644 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:52:21,651 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:52:24,238 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:52:24,238 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:52:24,239 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:52:24,240 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:52:24,240 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:52:24,241 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:24] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:52:24,943 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:52:24,943 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:52:24,944 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:52:24,945 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:52:24,945 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:52:24,946 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:24] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:52:34,543 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:34] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:52:34,543 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:52:34,554 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:52:34,555 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:52:34,559 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:52:34,559 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:52:34,560 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:34] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:52:34,568 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:52:34,568 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:52:34,569 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:52:34,570 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:34] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:52:34,572 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:52:34,572 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:52:34,574 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:34] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:52:45,669 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:52:45,672 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex1": "Er",
    "ex2": "Sie habe eine Haus.",
    "ex3": "unter"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Sie",
          "Er",
          "Es",
          "Wir"
        ],
        "question": "_____ ist meine Schwester. (She is my sister.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "We have a house.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "auf",
          "unter",
          "neben",
          "hinter"
        ],
        "question": "Das Buch ist _____ dem Tisch. (The book is on the table.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "the sister",
        "word": "die Schwester"
      },
      {
        "meaning": "the house",
        "word": "das Haus"
      },
      {
        "meaning": "the table",
        "word": "der Tisch"
      },
      {
        "meaning": "on",
        "word": "auf"
      }
    ]
  }
}
2025-07-11 19:52:45,672 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:52:45,672 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:52:45,673 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:52:45,673 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:52:45,673 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:52:45,673 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:52:45,677 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:46,724 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:46,726 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:52:46,726 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 252 characters
2025-07-11 19:52:46,726 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:52:46,729 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:52:46,729 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ ist meine Schwester. (She is my sister.)', 'your_answer': 'Er', 'correct_answer': 'Sie'}, {'question': 'We have a house.', 'your_answer': 'Sie habe eine Haus.', 'correct_answer': 'Wir haben ein Haus.'}, {'question': 'Das Buch ist _____ dem Tisch. (The book is on the table.)', 'your_answer': 'unter', 'correct_answer': 'auf'}]}
2025-07-11 19:52:46,730 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:52:46,733 - routes.ai.exercise_routes - INFO - Got 26 vocab and 24 topic entries for user test1
2025-07-11 19:52:46,733 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:48,055 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:48,057 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:52:48,057 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:52:48,058 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:52:48.058152",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "Er",
      "ex2": "Sie habe eine Haus.",
      "ex3": "unter"
    }
  }
}
2025-07-11 19:52:48,059 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:52:48,059 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:52:48,060 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:52:48,061 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:52:48,062 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:52:48,062 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:52:48,062 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:48,063 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:48,063 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 19:52:48,065 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:48,069 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:52:48,069 - routes.ai.helpers.exercise_helpers - INFO - Got 15 recent questions for user test1
2025-07-11 19:52:48,069 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:52:48,075 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:48,078 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:52:48,078 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 15 recent questions for user test1
2025-07-11 19:52:48,078 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=24
2025-07-11 19:52:48,078 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:52:48,079 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:52:48,079 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:52:48,079 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:52:48,079 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=15
2025-07-11 19:52:48,081 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:52:48,082 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:48,566 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:48,569 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['definite article', 'noun', 'personal pronoun', 'verb']
2025-07-11 19:52:48,570 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 19:52:48,582 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=gap-fill
2025-07-11 19:52:48,591 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:52:48,598 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 19:52:48,609 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 8 words from exercise ex1 for user test1
2025-07-11 19:52:48,612 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:48,631 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:48,638 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:48] "[35m[1mPOST /api/ai-exercise/training/submit HTTP/1.1[0m" 500 -
2025-07-11 19:52:48,659 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:52:48,659 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:52:48,659 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:52:48,662 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:52:48,662 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:52:48,662 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:52:48,668 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:52:48,668 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:52:48,669 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:52:48,670 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:48,671 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:52:48] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:52:48,675 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:52:48,675 - routes.ai.helpers.exercise_helpers - INFO - Got 15 recent questions for user test1
2025-07-11 19:52:48,675 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:52:48,681 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:52:48,682 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:52:48,682 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 15 recent questions for user test1
2025-07-11 19:52:48,682 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=24
2025-07-11 19:52:48,682 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:52:48,683 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:52:48,683 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:52:48,683 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:52:48,683 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=15
2025-07-11 19:52:48,683 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:52:48,685 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:50,720 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:50,735 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:52,263 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:52,268 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:52:52,268 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1039 characters
2025-07-11 19:52:52,269 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:52:52,269 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:52:52,270 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:52:52,270 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:52:52,271 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:52:52,271 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:52:52,271 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:52:52,271 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:52:52,271 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:52:52,279 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:52:52,342 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:52,351 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:52,576 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:52,579 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:52:52,579 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1094 characters
2025-07-11 19:52:52,580 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:52:52,581 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:52:52,582 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:52:52,582 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:52:52,583 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:52:52,583 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:52:52,583 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:52:52,584 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:52:52,584 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:52:52,594 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:52:53,862 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:53,886 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:56,775 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:56,802 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:58,093 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:58,111 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:52:59,819 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:52:59,830 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:52:59,832 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:13,501 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:13,510 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'verb']
2025-07-11 19:53:13,510 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 19:53:13,516 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:53:13,520 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 19:53:13,523 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 19:53:13,530 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 19:53:13,535 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:14,645 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:14,670 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:16,115 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:16,174 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:17,647 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:17,660 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:18,697 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:18,712 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 19:53:18,724 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:29,236 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:29,241 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['dative case', 'definite article', 'noun', 'preposition', 'verb']
2025-07-11 19:53:29,242 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=dative case, skill=gap-fill
2025-07-11 19:53:29,254 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 19:53:29,261 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=gap-fill
2025-07-11 19:53:29,269 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=preposition, skill=gap-fill
2025-07-11 19:53:29,275 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 19:53:29,279 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 10 words from exercise ex3 for user test1
2025-07-11 19:53:29,284 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:30,782 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:30,808 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:32,022 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:32,046 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:34,223 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:34,236 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 13 results
2025-07-11 19:53:34,237 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:53:34,240 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:53:34,243 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:53:34,244 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:53:34,244 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:53:34,246 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user test1
2025-07-11 19:53:34,246 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 18 total questions
2025-07-11 19:53:34,250 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:53:34,250 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:53:34,250 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:53:34,250 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:53:34,251 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:53:34,252 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:53:34.252101",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:53:34,256 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:53:34,256 - routes.ai.helpers.exercise_helpers - INFO - Got 18 recent questions for user test1
2025-07-11 19:53:34,256 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:53:34,265 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:53:34,266 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:53:34,273 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 18 recent questions for user test1
2025-07-11 19:53:34,273 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=24
2025-07-11 19:53:34,274 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:53:34,274 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:53:34,276 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:53:34,276 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:53:34,277 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=18
2025-07-11 19:53:34,280 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:53:34,283 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:53:35,827 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:53:35,828 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:53:35,828 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:53:35,829 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:53:35,829 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:53:35,830 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:53:35] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:53:35,854 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:53:35,854 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:53:35,854 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:53:35,855 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:53:35,856 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:53:35,856 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:53:35] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:53:38,109 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:53:38,114 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:53:38,115 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1043 characters
2025-07-11 19:53:38,116 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:53:38,116 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:53:38,121 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:53:38,121 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:53:38,121 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:53:38,122 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:53:38,122 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:53:38,122 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:53:38,122 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:53:38,127 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:53:48,345 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:53:48,346 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:53:48] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:53:48,347 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:53:48,348 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:53:48,354 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:53:48,356 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:53:48,357 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:53:48] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:53:48,363 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:53:48] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:53:48,365 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:53:48,365 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:53:48,365 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:53:48,366 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:53:48,367 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:53:48,367 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:53:48] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:53:59,340 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:53:59,342 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex1": "Er",
    "ex3": "m\u00f6gen",
    "ex2": "sie sein eine doktor."
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ habe ein neues Fahrrad. (I have a new bicycle.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "mag",
          "m\u00f6gen",
          "magst",
          "m\u00f6gt"
        ],
        "question": "Sie _____ Musik. (She likes music.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "He is a doctor.",
        "type": "translation"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "bicycle",
        "word": "Fahrrad"
      },
      {
        "meaning": "doctor",
        "word": "Arzt"
      },
      {
        "meaning": "likes",
        "word": "mag"
      }
    ]
  }
}
2025-07-11 19:53:59,342 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:53:59,342 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:53:59,343 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:53:59,343 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:53:59,343 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:53:59,344 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:53:59,347 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:03,146 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:03,149 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:54:03,149 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 249 characters
2025-07-11 19:54:03,150 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:54:03,151 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:54:03,152 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ habe ein neues Fahrrad. (I have a new bicycle.)', 'your_answer': 'Er', 'correct_answer': 'Ich'}, {'question': 'Sie _____ Musik. (She likes music.)', 'your_answer': 'mögen', 'correct_answer': 'mag'}, {'question': 'He is a doctor.', 'your_answer': 'sie sein eine doktor.', 'correct_answer': 'Er ist ein Arzt.'}]}
2025-07-11 19:54:03,152 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:54:03,156 - routes.ai.exercise_routes - INFO - Got 26 vocab and 24 topic entries for user test1
2025-07-11 19:54:03,157 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:05,055 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:05,059 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:54:05,059 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:54:05,059 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:54:05.059740",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "Er",
      "ex3": "m\u00f6gen",
      "ex2": "sie sein eine doktor."
    }
  }
}
2025-07-11 19:54:05,062 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:54:05,062 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:54:05,063 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:54:05,063 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:54:05,064 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:54:05,064 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:54:05,066 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:05,066 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:05,066 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 19:54:05,069 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:05,073 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:54:05,074 - routes.ai.helpers.exercise_helpers - INFO - Got 18 recent questions for user test1
2025-07-11 19:54:05,074 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:54:05,079 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:05,081 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:54:05,082 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 18 recent questions for user test1
2025-07-11 19:54:05,082 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=24
2025-07-11 19:54:05,082 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:54:05,082 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:54:05,083 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:54:05,083 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:54:05,083 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=18
2025-07-11 19:54:05,083 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:54:05,084 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:05,537 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:05,546 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:54:05] "[35m[1mPOST /api/ai-exercise/training/submit HTTP/1.1[0m" 500 -
2025-07-11 19:54:05,579 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:54:05,580 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:54:05,580 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:54:05,581 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:54:05,581 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:54:05,581 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:54:05,585 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:54:05,586 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:54:05,586 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:54:05,586 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:05,587 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:54:05] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:54:05,600 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:54:05,600 - routes.ai.helpers.exercise_helpers - INFO - Got 18 recent questions for user test1
2025-07-11 19:54:05,601 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:54:05,608 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:05,611 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:54:05,612 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 18 recent questions for user test1
2025-07-11 19:54:05,612 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=24
2025-07-11 19:54:05,612 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:54:05,612 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:54:05,613 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:54:05,613 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:54:05,614 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=18
2025-07-11 19:54:05,614 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:54:05,615 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:05,739 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:05,741 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'noun', 'personal pronoun', 'sentence structure', 'verb conjugation']
2025-07-11 19:54:05,741 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 19:54:05,748 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=gap-fill
2025-07-11 19:54:05,753 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:54:05,759 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=gap-fill
2025-07-11 19:54:05,765 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 19:54:05,770 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 9 words from exercise ex1 for user test1
2025-07-11 19:54:05,772 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:07,210 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:07,222 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:08,806 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:08,832 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:09,023 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:09,024 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:54:09,025 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1087 characters
2025-07-11 19:54:09,025 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:54:09,026 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:54:09,026 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:54:09,027 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:54:09,027 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:54:09,028 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:54:09,028 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:54:09,028 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:54:09,029 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:54:09,036 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:54:09,669 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:09,671 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:54:09,672 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1116 characters
2025-07-11 19:54:09,672 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:54:09,672 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:54:09,672 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:54:09,673 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:54:09,673 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:54:09,673 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:54:09,673 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:54:09,673 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:54:09,673 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:54:09,677 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:54:11,231 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:11,248 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:26,682 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:26,702 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:28,180 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:28,201 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:29,002 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:29,027 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 19:54:29,028 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:29,564 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:29,568 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['nominative case', 'personal pronoun', 'verb', 'word order']
2025-07-11 19:54:29,568 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 19:54:29,575 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:54:29,578 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 19:54:29,581 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=word order, skill=gap-fill
2025-07-11 19:54:29,586 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user test1
2025-07-11 19:54:29,588 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:31,070 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:31,087 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:32,955 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:32,970 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:34,757 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:34,774 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:37,418 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:37,430 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:39,467 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:39,481 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:54:39,482 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:40,083 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:40,086 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'present tense']
2025-07-11 19:54:40,086 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 19:54:40,104 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:54:40,111 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 19:54:40,114 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=translation
2025-07-11 19:54:40,117 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 19:54:40,119 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:41,721 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:41,739 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:42,641 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:42,663 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:45,926 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:45,972 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:47,865 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:47,888 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:49,300 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:49,317 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 13 results
2025-07-11 19:54:49,318 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:54:49,321 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:54:49,328 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:54:49,328 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:54:49,329 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:49,330 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user test1
2025-07-11 19:54:49,331 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 19:54:49,336 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:54:49,336 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:54:49,336 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:54:49,336 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:54:49,338 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:49,345 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:54:49,345 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 19:54:49,345 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:54:49,353 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:54:49.338518",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:54:49,358 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:54:49,359 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:54:49,360 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 19:54:49,360 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=32, topic_count=24
2025-07-11 19:54:49,360 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:54:49,360 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:54:49,360 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:54:49,360 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:54:49,361 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 19:54:49,361 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:54:49,362 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:54:53,366 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:54:53,374 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:54:53,379 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1091 characters
2025-07-11 19:54:53,382 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:54:53,382 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:54:53,384 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:54:53,385 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:54:53,385 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:54:53,385 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:54:53,385 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:54:53,385 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:54:53,385 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:54:53,389 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:56:47,861 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 19:56:48,135 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:56:49,133 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:56:49,134 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:57:02,053 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:57:02,055 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:57:02,055 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:57:02,058 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:57:02,058 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:57:02,060 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:02] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:57:02,172 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:57:02,172 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:57:02,172 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:57:02,173 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:57:02,174 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:57:02,174 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:02] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:57:14,455 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:14] "GET /api/me HTTP/1.1" 200 -
2025-07-11 19:57:14,455 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:57:14,457 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:57:14,458 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:57:14,462 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:57:14,462 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:57:14,463 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:14] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:57:14,465 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:14] "GET /api/role HTTP/1.1" 200 -
2025-07-11 19:57:14,468 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:57:14,469 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:57:14,469 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:57:14,470 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:57:14,470 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:57:14,470 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:14] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:57:19,986 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:57:19,988 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex3": "spielen",
    "ex2": "jj",
    "ex1": "Du"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "spielt",
          "spielen",
          "spielst",
          "spiele"
        ],
        "question": "Er _____ Fu\u00dfball. (He plays football.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They are doctors.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Du",
          "Er",
          "Sie"
        ],
        "question": "_____ habe einen Vogel. (I have a bird.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "bird",
        "word": "Vogel"
      },
      {
        "meaning": "doctors",
        "word": "\u00c4rzte"
      },
      {
        "meaning": "football",
        "word": "Fu\u00dfball"
      }
    ]
  }
}
2025-07-11 19:57:19,988 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:57:19,988 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:57:19,989 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:57:19,989 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:57:19,989 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:57:19,992 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:57:20,008 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:20,966 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:20,967 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:57:20,968 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 251 characters
2025-07-11 19:57:20,968 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:57:20,968 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:57:20,968 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': 'Er _____ Fußball. (He plays football.)', 'your_answer': 'spielen', 'correct_answer': 'spielt'}, {'question': 'They are doctors.', 'your_answer': 'jj', 'correct_answer': 'Sie sind Ärzte.'}, {'question': '_____ habe einen Vogel. (I have a bird.)', 'your_answer': 'Du', 'correct_answer': 'Ich'}]}
2025-07-11 19:57:20,969 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:57:20,971 - routes.ai.exercise_routes - INFO - Got 32 vocab and 24 topic entries for user test1
2025-07-11 19:57:20,972 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:23,911 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:23,914 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 19:57:23,915 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 19:57:23,915 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:57:23.915605",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "spielen",
      "ex2": "jj",
      "ex1": "Du"
    }
  }
}
2025-07-11 19:57:23,917 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 19:57:23,918 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:57:23,919 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 19:57:23,919 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 19:57:23,919 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:57:23,920 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 19:57:23,920 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 19:57:23,920 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:23,921 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:23,923 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:23] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 19:57:23,928 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:23,928 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 19:57:23,929 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:57:23,942 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:23,943 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:57:23,944 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 19:57:23,944 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 19:57:23,946 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:23,946 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 19:57:23,947 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 19:57:23,947 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 19:57:23,947 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 19:57:23,947 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=32, topic_count=24
2025-07-11 19:57:23,947 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:57:23,948 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:57:23,948 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:57:23,949 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:57:23,949 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 19:57:23,950 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:57:23,951 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:23,964 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 19:57:23,964 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:57:23,965 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 19:57:23,969 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:57:23] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:57:23,969 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:23,977 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:23,977 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 19:57:23,978 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:57:23,983 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:23,984 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:23,985 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 19:57:23,985 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=32, topic_count=24
2025-07-11 19:57:23,985 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:57:23,985 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:57:23,985 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:57:23,985 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:57:23,985 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 19:57:23,986 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:57:23,987 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:24,574 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:24,579 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['present tense', 'subject', 'third person singular', 'verb', 'word order']
2025-07-11 19:57:24,580 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 19:57:24,594 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject, skill=gap-fill
2025-07-11 19:57:24,600 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=third person singular, skill=gap-fill
2025-07-11 19:57:24,605 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 19:57:24,611 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=word order, skill=gap-fill
2025-07-11 19:57:24,615 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user test1
2025-07-11 19:57:24,617 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:26,145 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:26,160 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:27,815 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:27,825 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:27,827 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:57:27,827 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1049 characters
2025-07-11 19:57:27,828 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:57:27,829 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:57:27,829 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:57:27,830 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:57:27,831 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:57:27,831 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:57:27,832 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:57:27,832 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:57:27,833 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:57:27,842 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:57:27,849 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:28,632 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:28,634 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:57:28,634 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1090 characters
2025-07-11 19:57:28,635 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:57:28,636 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:57:28,636 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:57:28,637 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:57:28,638 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:57:28,638 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:57:28,638 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:57:28,639 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:57:28,639 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:57:28,646 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:57:40,017 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:40,135 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:41,590 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:41,604 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:42,660 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:42,671 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:43,723 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:43,737 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 19:57:43,739 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:44,165 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:44,167 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['noun', 'pronoun', 'verb']
2025-07-11 19:57:44,168 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 19:57:44,178 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=pronoun, skill=translation
2025-07-11 19:57:44,191 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 19:57:44,202 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex2 for user test1
2025-07-11 19:57:44,222 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:45,733 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:45,751 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:47,678 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:47,685 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:50,304 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:50,483 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:51,883 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:51,910 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 19:57:51,911 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:52,501 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:52,504 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'nominative case', 'personal pronoun', 'sentence structure', 'verb conjugation']
2025-07-11 19:57:52,504 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 19:57:52,516 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 19:57:52,526 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 19:57:52,533 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=gap-fill
2025-07-11 19:57:52,557 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 19:57:52,562 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user test1
2025-07-11 19:57:52,566 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:53,411 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:53,433 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:55,055 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:55,081 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:56,142 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:56,159 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:57,716 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:57,733 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:57:59,498 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:57:59,514 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 13 results
2025-07-11 19:57:59,515 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 19:57:59,518 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 19:57:59,526 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 19:57:59,526 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 19:57:59,526 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:59,528 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:59,528 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 19:57:59,534 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 19:57:59,534 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 19:57:59,534 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 19:57:59,534 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 19:57:59,535 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:59,536 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T19:57:59.536081",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 19:57:59,538 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:59,538 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 19:57:59,538 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 19:57:59,543 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 19:57:59,544 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 19:57:59,544 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 19:57:59,545 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=36, topic_count=28
2025-07-11 19:57:59,545 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 19:57:59,545 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 19:57:59,545 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 19:57:59,545 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 19:57:59,546 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 19:57:59,546 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 19:57:59,551 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:58:03,245 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:58:03,248 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 19:58:03,248 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1158 characters
2025-07-11 19:58:03,249 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 19:58:03,249 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 19:58:03,250 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 19:58:03,250 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 19:58:03,251 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 19:58:03,251 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 19:58:03,252 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 19:58:03,252 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 19:58:03,253 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 19:58:03,259 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 19:58:56,670 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 19:58:57,025 - werkzeug - INFO -  * Restarting with stat
2025-07-11 19:58:58,018 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 19:58:58,020 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 19:59:10,643 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:59:10,645 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:59:10,645 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:59:10,657 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:59:10,658 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:59:10,663 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:59:10] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:59:12,064 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:59:12,064 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:59:12,064 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:59:12,065 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:59:12,065 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:59:12,066 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:59:12] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:59:12,085 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:59:12,085 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:59:12,086 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:59:12,087 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:59:12,087 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:59:12,087 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:59:12] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:59:52,777 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 19:59:52,779 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 19:59:52,779 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 19:59:52,786 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 19:59:52,786 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 19:59:52,789 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 19:59:52] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 19:59:57,839 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 19:59:57,841 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex2": "kk",
    "ex3": "Ich",
    "ex1": "Wir"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Er",
          "Sie",
          "Wir",
          "Ich"
        ],
        "question": "_____ spielt Fu\u00dfball. (He plays football.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They are students.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Ich",
          "Du",
          "Er",
          "Sie"
        ],
        "question": "_____ habe einen Vogel. (I have a bird.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "plays",
        "word": "spielt"
      },
      {
        "meaning": "football",
        "word": "Fu\u00dfball"
      },
      {
        "meaning": "students",
        "word": "Sch\u00fcler"
      },
      {
        "meaning": "bird",
        "word": "Vogel"
      }
    ]
  }
}
2025-07-11 19:59:57,841 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 19:59:57,842 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 19:59:57,843 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 19:59:57,844 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 19:59:57,844 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 19:59:57,846 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 19:59:57,863 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 19:59:59,230 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 19:59:59,239 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 19:59:59,239 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 249 characters
2025-07-11 19:59:59,240 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 19:59:59,241 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 19:59:59,241 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 1, 'total': 3, 'mistakes': [{'question': '_____ spielt Fußball. (He plays football.)', 'your_answer': 'Wir', 'correct_answer': 'Er'}, {'question': 'They are students.', 'your_answer': 'kk', 'correct_answer': 'Sie sind Schüler.'}]}
2025-07-11 19:59:59,241 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 19:59:59,244 - routes.ai.exercise_routes - INFO - Got 36 vocab and 28 topic entries for user test1
2025-07-11 19:59:59,245 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:00,697 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:00,702 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 20:00:00,703 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 20:00:00,703 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:00:00.703813",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex2": "kk",
      "ex3": "Ich",
      "ex1": "Wir"
    }
  }
}
2025-07-11 20:00:00,705 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 20:00:00,706 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 20:00:00,707 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 20:00:00,705 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:00:00,707 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 20:00:00,708 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:00:00,709 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 20:00:00,709 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:00,710 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:00,711 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:00:00] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 20:00:00,716 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:00,716 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:00:00,717 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:00:00,721 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:00,724 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:00,724 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:00:00,724 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=36, topic_count=28
2025-07-11 20:00:00,725 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:00:00,725 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:00:00,725 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:00:00,726 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 20:00:00,726 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 20:00:00,725 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:00:00,727 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:00:00,727 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:00:00,727 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:00:00,728 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:00,730 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 20:00:00,730 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 20:00:00,730 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 20:00:00,738 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:00:00,741 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:00:00,742 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 20:00:00,743 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:00,755 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:00:00] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:00:00,761 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:00,762 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:00:00,763 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:00:00,769 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:00,771 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:00,771 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:00:00,771 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=36, topic_count=28
2025-07-11 20:00:00,772 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:00:00,772 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:00:00,773 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:00:00,773 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:00:00,773 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:00:00,773 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:00:00,774 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:01,416 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:01,419 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['noun', 'personal pronoun', 'verb']
2025-07-11 20:00:01,419 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 20:00:01,434 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 20:00:01,444 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 20:00:01,452 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex2 for user test1
2025-07-11 20:00:01,455 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:02,779 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:02,795 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:04,782 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:04,794 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:00:04,795 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 990 characters
2025-07-11 20:00:04,795 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:00:04,796 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:00:04,798 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:00:04,798 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:00:04,799 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:00:04,799 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:00:04,800 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:00:04,800 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:00:04,801 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:00:04,809 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:00:04,866 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:04,901 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:05,211 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:05,213 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:00:05,214 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1099 characters
2025-07-11 20:00:05,214 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:00:05,215 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:00:05,216 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:00:05,217 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:00:05,217 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:00:05,217 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:00:05,217 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:00:05,217 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:00:05,217 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:00:05,221 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:00:06,794 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:06,818 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:08,883 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:08,905 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=1, quality=5
2025-07-11 20:00:08,906 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:09,912 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:09,914 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['indefinite article', 'nominative case', 'personal pronoun', 'sentence structure', 'verb conjugation']
2025-07-11 20:00:09,914 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 20:00:09,924 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 20:00:09,931 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:00:09,963 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=gap-fill
2025-07-11 20:00:09,968 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:00:09,972 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex3 for user test1
2025-07-11 20:00:09,979 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:11,551 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:11,569 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:13,496 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:13,508 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:16,058 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:16,080 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:18,207 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:18,217 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 20:00:18,218 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:18,730 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:18,734 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['subject pronoun', 'verb conjugation', 'word order']
2025-07-11 20:00:18,736 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject pronoun, skill=gap-fill
2025-07-11 20:00:18,747 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:00:18,752 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=word order, skill=gap-fill
2025-07-11 20:00:18,757 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex1 for user test1
2025-07-11 20:00:18,760 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:19,900 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:19,914 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:21,282 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:21,315 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:23,721 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:23,735 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:25,992 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:26,005 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 11 results
2025-07-11 20:00:26,005 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 20:00:26,010 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 20:00:26,016 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 20:00:26,017 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 20:00:26,017 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:26,019 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:26,019 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 20:00:26,024 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 20:00:26,024 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 20:00:26,024 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 20:00:26,025 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:00:26,026 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:26,026 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:00:26.026604",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 20:00:26,032 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:26,032 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:00:26,032 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:00:26,036 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:00:26,037 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:00:26,037 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:00:26,038 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=38, topic_count=25
2025-07-11 20:00:26,038 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:00:26,038 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:00:26,038 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:00:26,038 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:00:26,039 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:00:26,044 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:00:26,045 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:00:30,708 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:00:30,713 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:00:30,713 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1094 characters
2025-07-11 20:00:30,714 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:00:30,714 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:00:30,715 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:00:30,716 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:00:30,716 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:00:30,716 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:00:30,716 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:00:30,716 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:00:30,716 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:00:30,721 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:00:31,824 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:00:31,826 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:00:31,826 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:00:31,825 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:00:31] "GET /api/me HTTP/1.1" 200 -
2025-07-11 20:00:31,828 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:00:31,828 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:00:31,829 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:00:31] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:00:31,835 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:00:31] "GET /api/role HTTP/1.1" 200 -
2025-07-11 20:00:31,835 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:00:31,836 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:00:31,836 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:00:31,838 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:00:31,839 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:00:31,840 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:00:31] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:01:22,812 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 20:01:22,814 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex3": "Sie",
    "ex1": "Sie",
    "ex2": "jjj"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ spiele Klavier. (I play piano.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Er",
          "Sie",
          "Wir",
          "Ich"
        ],
        "question": "_____ trinkt Wasser. (He drinks water.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They are engineers.",
        "type": "translation"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "drinks",
        "word": "trinkt"
      },
      {
        "meaning": "water",
        "word": "Wasser"
      },
      {
        "meaning": "engineers",
        "word": "Ingenieure"
      },
      {
        "meaning": "play",
        "word": "spiele"
      },
      {
        "meaning": "piano",
        "word": "Klavier"
      }
    ]
  }
}
2025-07-11 20:01:22,814 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 20:01:22,814 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 20:01:22,815 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 20:01:22,815 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 20:01:22,815 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 20:01:22,815 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 20:01:22,818 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:23,905 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:23,907 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 20:01:23,908 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 252 characters
2025-07-11 20:01:23,908 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 20:01:23,910 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 20:01:23,911 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ spiele Klavier. (I play piano.)', 'your_answer': 'Sie', 'correct_answer': 'Ich'}, {'question': '_____ trinkt Wasser. (He drinks water.)', 'your_answer': 'Sie', 'correct_answer': 'Er'}, {'question': 'They are engineers.', 'your_answer': 'jjj', 'correct_answer': 'Sie sind Ingenieure.'}]}
2025-07-11 20:01:23,912 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 20:01:23,916 - routes.ai.exercise_routes - INFO - Got 38 vocab and 25 topic entries for user test1
2025-07-11 20:01:23,917 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:25,584 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:25,585 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 20:01:25,586 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 20:01:25,586 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:01:25.586419",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "Sie",
      "ex1": "Sie",
      "ex2": "jjj"
    }
  }
}
2025-07-11 20:01:25,587 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 20:01:25,587 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:01:25,587 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 20:01:25,588 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:01:25,588 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 20:01:25,588 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 20:01:25,591 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:01:25] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 20:01:25,591 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 20:01:25,593 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:25,589 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:01:25,597 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:01:25,597 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:01:25,598 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:01:25,607 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:01:25,608 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 20:01:25,608 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 20:01:25,612 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:01:25,613 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 20:01:25,613 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 20:01:25,613 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 20:01:25,615 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:01:25,616 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:01:25,616 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=38, topic_count=25
2025-07-11 20:01:25,616 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:01:25,616 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:01:25,617 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:01:25,617 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:01:25,617 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:01:25,618 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:01:25,618 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:25,622 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:01:25,622 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:01:25,622 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 20:01:25,622 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:01:25,623 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:01:25] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:01:25,626 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:01:25,626 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:01:25,626 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:01:25,633 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:01:25,634 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:01:25,634 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:01:25,635 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=38, topic_count=25
2025-07-11 20:01:25,635 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:01:25,635 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:01:25,635 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:01:25,636 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:01:25,636 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:01:25,637 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:01:25,638 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:26,141 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:26,144 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['subject pronoun', 'verb conjugation', 'word order']
2025-07-11 20:01:26,144 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject pronoun, skill=gap-fill
2025-07-11 20:01:26,157 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:01:26,170 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=word order, skill=gap-fill
2025-07-11 20:01:26,180 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user test1
2025-07-11 20:01:26,183 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:27,328 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:27,342 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:28,949 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:28,968 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:29,685 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:29,688 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:01:29,690 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1302 characters
2025-07-11 20:01:29,691 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:01:29,691 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:01:29,692 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:01:29,693 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:01:29,694 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:01:29,694 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:01:29,695 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:01:29,695 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:01:29,696 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:01:29,705 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:01:30,502 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:30,526 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:32,552 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:32,579 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:32,601 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:32,602 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:01:32,602 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1118 characters
2025-07-11 20:01:32,603 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:01:32,603 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:01:32,604 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:01:32,604 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:01:32,604 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:01:32,604 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:01:32,605 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:01:32,605 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:01:32,605 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:01:32,612 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:01:35,174 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:35,183 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 20:01:35,184 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:35,725 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:35,727 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['personal pronoun', 'present tense', 'subject-verb agreement']
2025-07-11 20:01:35,728 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:01:35,740 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 20:01:35,749 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject-verb agreement, skill=gap-fill
2025-07-11 20:01:35,758 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex1 for user test1
2025-07-11 20:01:35,761 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:37,574 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:37,597 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:39,923 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:39,938 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:41,145 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:41,155 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:42,760 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:42,779 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:44,184 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:44,192 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 20:01:44,192 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:44,633 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:44,636 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['noun', 'personal pronoun', 'verb']
2025-07-11 20:01:44,636 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 20:01:44,643 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 20:01:44,647 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 20:01:44,651 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex2 for user test1
2025-07-11 20:01:44,656 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:48,973 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:48,993 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:50,377 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:50,396 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:01:56,001 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:01:56,036 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:10,083 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:02:10,097 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 9 results
2025-07-11 20:02:10,097 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 20:02:10,099 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 20:02:10,101 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 20:02:10,101 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 20:02:10,101 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:02:10,102 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:02:10,102 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 20:02:10,105 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 20:02:10,105 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 20:02:10,105 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 20:02:10,106 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:02:10,107 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:02:10,107 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:02:10.107272",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 20:02:10,113 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:02:10,113 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:02:10,113 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:02:10,116 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:02:10,117 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:02:10,117 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:02:10,117 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=43, topic_count=27
2025-07-11 20:02:10,117 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:02:10,117 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:02:10,117 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:02:10,117 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:02:10,118 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:02:10,118 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:02:10,119 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:13,671 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:02:13,672 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:02:13,673 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1098 characters
2025-07-11 20:02:13,674 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:02:13,675 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:02:13,676 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:02:13,676 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:02:13,676 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:02:13,677 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:02:13,678 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:02:13,678 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:02:13,678 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:02:13,681 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:02:34,299 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 20:02:34,687 - werkzeug - INFO -  * Restarting with stat
2025-07-11 20:02:35,669 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 20:02:35,670 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 20:02:48,264 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:02:48,268 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:02:48,268 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:02:48,271 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:02:48,272 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:02:48,274 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:02:48] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:02:52,386 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 20:02:52,388 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex3": "Sie",
    "ex1": "Wir",
    "ex2": "kk"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ spiele Klavier. (I play piano.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Er",
          "Sie",
          "Wir",
          "Ich"
        ],
        "question": "_____ trinkt Wasser. (He drinks water.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They are engineers.",
        "type": "translation"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "drinks",
        "word": "trinkt"
      },
      {
        "meaning": "water",
        "word": "Wasser"
      },
      {
        "meaning": "engineers",
        "word": "Ingenieure"
      },
      {
        "meaning": "play",
        "word": "spiele"
      },
      {
        "meaning": "piano",
        "word": "Klavier"
      }
    ]
  }
}
2025-07-11 20:02:52,388 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 20:02:52,388 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 20:02:52,388 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 20:02:52,389 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 20:02:52,389 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 20:02:52,389 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 20:02:52,404 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:53,376 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:02:53,384 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 20:02:53,384 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 252 characters
2025-07-11 20:02:53,385 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 20:02:53,386 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 20:02:53,386 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ spiele Klavier. (I play piano.)', 'your_answer': 'Sie', 'correct_answer': 'Ich'}, {'question': '_____ trinkt Wasser. (He drinks water.)', 'your_answer': 'Wir', 'correct_answer': 'Er'}, {'question': 'They are engineers.', 'your_answer': 'kk', 'correct_answer': 'Sie sind Ingenieure.'}]}
2025-07-11 20:02:53,386 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 20:02:53,390 - routes.ai.exercise_routes - INFO - Got 43 vocab and 27 topic entries for user test1
2025-07-11 20:02:53,392 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:58,053 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:02:58,057 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 20:02:58,058 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 20:02:58,059 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:02:58.058740",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "Sie",
      "ex1": "Wir",
      "ex2": "kk"
    }
  }
}
2025-07-11 20:02:58,060 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 20:02:58,061 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:02:58,061 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 20:02:58,061 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:02:58,061 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 20:02:58,062 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 20:02:58,062 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:02:58,061 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 20:02:58,063 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:58,063 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:58,065 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:02:58,065 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:02:58,065 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:02:58,070 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:02:58,072 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:02:58,072 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:02:58,072 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=43, topic_count=27
2025-07-11 20:02:58,072 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:02:58,073 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:02:58,073 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:02:58,073 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:02:58,073 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:02:58,073 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:02:58,074 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:58,670 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:02:58,670 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:02:58,673 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['subject pronoun', 'verb conjugation', 'word order']
2025-07-11 20:02:58,677 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject pronoun, skill=gap-fill
2025-07-11 20:02:58,677 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:02:58,686 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:02:58,692 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=word order, skill=gap-fill
2025-07-11 20:02:58,699 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user test1
2025-07-11 20:02:58,702 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:00,716 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:00,743 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:00,768 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:00,770 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:01,331 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:01,335 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:02,049 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:02,051 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:02,058 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:03:02,058 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1029 characters
2025-07-11 20:03:02,059 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:03:02,059 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:03:02,060 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:03:02,061 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:03:02,061 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:03:02,061 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:03:02,062 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:03:02,062 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:03:02,062 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:03:02,072 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:02,077 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:03:02,790 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:02,795 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:03,480 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:03,499 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 20:03:03,500 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:03,566 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:03,569 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:03,995 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:03,998 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['personal pronoun', 'present tense', 'subject-verb agreement']
2025-07-11 20:03:03,998 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:03:04,010 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 20:03:04,018 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject-verb agreement, skill=gap-fill
2025-07-11 20:03:04,025 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex1 for user test1
2025-07-11 20:03:04,028 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:04,915 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:04,937 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:06,554 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:06,569 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:07,168 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:07,174 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:03:07] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 20:03:07,206 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:03:07,206 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 20:03:07,207 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 20:03:07,208 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 20:03:07,208 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 20:03:07,209 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 20:03:07,214 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:03:07,215 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:03:07,215 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 20:03:07,215 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:03:07,217 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:03:07] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:03:07,229 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:03:07,230 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:03:07,230 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:03:07,239 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:03:07,241 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:03:07,242 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:03:07,242 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=43, topic_count=27
2025-07-11 20:03:07,242 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:03:07,242 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:03:07,243 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:03:07,243 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:03:07,243 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:03:07,243 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:03:07,249 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:08,205 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:08,216 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:09,730 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:09,750 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 20:03:09,751 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:10,212 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:10,216 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['noun', 'personal pronoun', 'verb']
2025-07-11 20:03:10,216 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 20:03:10,228 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 20:03:10,237 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 20:03:10,243 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex2 for user test1
2025-07-11 20:03:10,246 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:10,296 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:10,297 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:03:10,297 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1024 characters
2025-07-11 20:03:10,298 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:03:10,298 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:03:10,299 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:03:10,299 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:03:10,300 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:03:10,300 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:03:10,300 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:03:10,300 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:03:10,301 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:03:10,311 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:03:11,707 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:11,731 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:13,056 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:13,079 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:14,573 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:14,585 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:16,078 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:16,086 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 9 results
2025-07-11 20:03:16,086 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 20:03:16,089 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 20:03:16,092 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 20:03:16,092 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 20:03:16,092 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:03:16,093 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:03:16,094 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 20:03:16,114 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 20:03:16,114 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 20:03:16,114 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 20:03:16,114 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:03:16,115 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:03:16,115 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:03:16.115261",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 20:03:16,116 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:03:16,116 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:03:16,116 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:03:16,118 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:03:16,118 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:03:16,118 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:03:16,118 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=43, topic_count=27
2025-07-11 20:03:16,119 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:03:16,119 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:03:16,119 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:03:16,119 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:03:16,119 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:03:16,119 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:03:16,120 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:03:19,688 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:03:19,691 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:03:19,691 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1034 characters
2025-07-11 20:03:19,692 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:03:19,692 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:03:19,694 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:03:19,695 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:03:19,695 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:03:19,695 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:03:19,696 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:03:19,697 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:03:19,697 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:03:19,706 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:06:42,670 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:06:42,671 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:06:42,672 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:06:42,679 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:06:42,680 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:06:42,683 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:06:42] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:06:44,100 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:06:44,102 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:06:44,103 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:06:44,104 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:06:44,104 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:06:44,105 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:06:44] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:06:44,116 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:06:44,116 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:06:44,116 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:06:44,117 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:06:44,124 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:06:44,124 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:06:44] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:07:18,867 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:07:18,869 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:07:18,869 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:07:18,870 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:07:18,871 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:07:18,872 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:07:18] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:07:23,723 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 20:07:23,723 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex1": "Sie",
    "ex2": "gg",
    "ex3": "Ich"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ habe einen Hund. (I have a dog.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is a teacher.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ liest ein Buch. (She reads a book.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "dog",
        "word": "Hund"
      },
      {
        "meaning": "teacher",
        "word": "Lehrerin"
      },
      {
        "meaning": "reads",
        "word": "liest"
      }
    ]
  }
}
2025-07-11 20:07:23,724 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 20:07:23,724 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 20:07:23,725 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 20:07:23,726 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 20:07:23,726 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 20:07:23,727 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 20:07:23,740 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:24,892 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:24,895 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 20:07:24,896 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 255 characters
2025-07-11 20:07:24,896 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 20:07:24,898 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 20:07:24,898 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ habe einen Hund. (I have a dog.)', 'your_answer': 'Sie', 'correct_answer': 'Ich'}, {'question': 'She is a teacher.', 'your_answer': 'gg', 'correct_answer': 'Sie ist eine Lehrerin.'}, {'question': '_____ liest ein Buch. (She reads a book.)', 'your_answer': 'Ich', 'correct_answer': 'Sie'}]}
2025-07-11 20:07:24,898 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 20:07:24,903 - routes.ai.exercise_routes - INFO - Got 43 vocab and 27 topic entries for user test1
2025-07-11 20:07:24,903 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:26,128 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:26,130 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 20:07:26,130 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 20:07:26,131 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:07:26.131376",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "Sie",
      "ex2": "gg",
      "ex3": "Ich"
    }
  }
}
2025-07-11 20:07:26,133 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 20:07:26,134 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 20:07:26,135 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 20:07:26,134 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:07:26,135 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 20:07:26,135 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:07:26,136 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 20:07:26,136 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:26,137 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:26,137 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:26,141 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:26,142 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:07:26,142 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:07:26,148 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:26,149 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:26,149 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:07:26,150 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=43, topic_count=27
2025-07-11 20:07:26,150 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:07:26,150 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:07:26,150 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:07:26,151 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:07:26,151 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:07:26,151 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:07:26,152 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:26,652 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:26,655 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:26,782 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:26,784 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'nominative case', 'personal pronoun', 'verb conjugation']
2025-07-11 20:07:26,784 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 20:07:26,794 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 20:07:26,801 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:07:26,806 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:07:26,812 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user test1
2025-07-11 20:07:26,814 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:27,880 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:27,885 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:28,039 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:28,049 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:30,643 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:30,647 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:30,952 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:30,972 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:31,217 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:31,219 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:07:31,219 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1081 characters
2025-07-11 20:07:31,220 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:07:31,220 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:07:31,221 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:07:31,222 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:07:31,222 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:07:31,222 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:07:31,222 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:07:31,222 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:07:31,223 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:07:31,227 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:07:32,192 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:32,193 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:32,405 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:32,422 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:32,821 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:32,827 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:33,410 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:33,430 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 20:07:33,431 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:33,944 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:33,949 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'verb']
2025-07-11 20:07:33,950 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 20:07:33,961 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 20:07:33,970 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 20:07:33,979 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 20:07:33,986 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 20:07:33,989 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:33,992 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:33,999 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:07:33] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 20:07:34,009 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:07:34,009 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 20:07:34,010 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 20:07:34,011 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 20:07:34,011 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 20:07:34,011 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 20:07:34,014 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:07:34,015 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:07:34,015 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 20:07:34,015 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:34,016 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:07:34] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:07:34,019 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:34,019 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:07:34,019 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:07:34,024 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:34,028 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:34,028 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:07:34,028 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=43, topic_count=29
2025-07-11 20:07:34,028 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:07:34,029 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:07:34,029 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:07:34,029 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:07:34,030 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:07:34,030 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:07:34,031 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:35,204 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:35,224 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:36,688 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:36,700 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:37,504 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:37,506 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:07:37,506 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1023 characters
2025-07-11 20:07:37,507 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:07:37,507 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:07:37,508 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:07:37,510 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:07:37,511 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:07:37,511 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:07:37,511 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:07:37,511 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:07:37,512 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:07:37,515 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:07:37,655 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:37,669 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:38,874 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:38,893 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:40,168 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:40,180 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 20:07:40,181 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:40,886 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:40,888 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['personal pronoun', 'present tense', 'subject-verb agreement']
2025-07-11 20:07:40,889 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:07:40,900 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 20:07:40,908 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=subject-verb agreement, skill=gap-fill
2025-07-11 20:07:40,915 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex3 for user test1
2025-07-11 20:07:40,918 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:43,305 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:43,340 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:44,673 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:44,681 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:46,417 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:46,426 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 11 results
2025-07-11 20:07:46,426 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 20:07:46,428 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 20:07:46,430 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 20:07:46,430 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 20:07:46,430 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:46,431 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:46,431 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 20:07:46,434 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 20:07:46,434 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 20:07:46,434 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 20:07:46,434 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:07:46,435 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:46,435 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:07:46.435302",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 20:07:46,436 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:46,436 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:07:46,436 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:07:46,439 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:07:46,440 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:07:46,440 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:07:46,440 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=44, topic_count=29
2025-07-11 20:07:46,440 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:07:46,440 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:07:46,441 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:07:46,441 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:07:46,441 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:07:46,441 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:07:46,442 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:07:50,196 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:07:50,211 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:07:50,212 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1124 characters
2025-07-11 20:07:50,213 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:07:50,213 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:07:50,214 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:07:50,215 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:07:50,216 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:07:50,216 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:07:50,216 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:07:50,216 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:07:50,216 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:07:50,224 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:09:16,882 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/exercise_routes.py', reloading
2025-07-11 20:09:17,105 - werkzeug - INFO -  * Restarting with stat
2025-07-11 20:09:18,149 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 20:09:18,151 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 20:09:24,133 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:09:24,135 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:09:24,135 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:09:24,137 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:09:24,137 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:09:24,143 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:09:24] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:09:42,621 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 20:09:42,623 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex1": "Er",
    "ex2": "Sie ist ein Lehrer.",
    "ex3": "Er"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ habe einen Hund. (I have a dog.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is a teacher.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ liest ein Buch. (She reads a book.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "dog",
        "word": "Hund"
      },
      {
        "meaning": "teacher",
        "word": "Lehrerin"
      },
      {
        "meaning": "reads",
        "word": "liest"
      }
    ]
  }
}
2025-07-11 20:09:42,623 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 20:09:42,624 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 20:09:42,624 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 20:09:42,624 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 20:09:42,624 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 20:09:42,625 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 20:09:42,644 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:43,782 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:43,784 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 20:09:43,785 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 255 characters
2025-07-11 20:09:43,785 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 20:09:43,786 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 20:09:43,787 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ habe einen Hund. (I have a dog.)', 'your_answer': 'Er', 'correct_answer': 'Ich'}, {'question': 'She is a teacher.', 'your_answer': 'Sie ist ein Lehrer.', 'correct_answer': 'Sie ist eine Lehrerin.'}, {'question': '_____ liest ein Buch. (She reads a book.)', 'your_answer': 'Er', 'correct_answer': 'Sie'}]}
2025-07-11 20:09:43,787 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 20:09:43,792 - routes.ai.exercise_routes - INFO - Got 44 vocab and 29 topic entries for user test1
2025-07-11 20:09:43,793 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:45,914 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:45,916 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 20:09:45,917 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 20:09:45,917 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:09:45.917647",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "Er",
      "ex2": "Sie ist ein Lehrer.",
      "ex3": "Er"
    }
  }
}
2025-07-11 20:09:45,918 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 20:09:45,919 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 20:09:45,920 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 20:09:45,921 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 20:09:45,918 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:09:45,922 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:45,923 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:09:45,923 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 20:09:45,924 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:09:45,926 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:45,934 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:09:45,934 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:09:45,934 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:09:45,941 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:09:45,943 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:09:45,944 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:09:45,945 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=44, topic_count=29
2025-07-11 20:09:45,946 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:09:45,947 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:09:45,948 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:09:45,948 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:09:45,948 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:09:45,948 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:09:45,949 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:46,401 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:46,405 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:46,516 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:46,518 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['definite article', 'nominative case', 'personal pronoun', 'sentence structure', 'verb conjugation']
2025-07-11 20:09:46,519 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 20:09:46,531 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 20:09:46,538 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:09:46,545 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=sentence structure, skill=gap-fill
2025-07-11 20:09:46,553 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:09:46,560 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user test1
2025-07-11 20:09:46,564 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:47,293 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:47,299 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:48,046 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:48,053 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:48,053 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:48,080 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:49,703 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:49,709 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:50,349 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:50,395 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:50,810 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:50,813 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:09:50,815 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1084 characters
2025-07-11 20:09:50,816 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:09:50,816 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:09:50,817 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:09:50,818 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:09:50,818 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:09:50,819 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:09:50,819 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:09:50,819 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:09:50,820 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:09:50,823 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:09:51,017 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:51,022 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:51,382 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:51,394 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:52,218 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:52,226 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:09:52] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 20:09:52,264 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:09:52,264 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 20:09:52,265 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 20:09:52,267 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 20:09:52,267 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 20:09:52,267 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 20:09:52,275 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:09:52,275 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:09:52,275 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 20:09:52,276 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:09:52,278 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:09:52] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:09:52,297 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:09:52,297 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:09:52,298 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:09:52,312 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:09:52,315 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:09:52,316 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:09:52,316 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=44, topic_count=30
2025-07-11 20:09:52,316 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:09:52,316 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:09:52,316 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:09:52,317 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:09:52,317 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:09:52,317 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:09:52,318 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:54,453 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:54,466 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 20:09:54,467 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:55,026 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:55,028 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'verb']
2025-07-11 20:09:55,028 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=translation
2025-07-11 20:09:55,040 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 20:09:55,049 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 20:09:55,056 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=translation
2025-07-11 20:09:55,061 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user test1
2025-07-11 20:09:55,069 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:55,949 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:55,952 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:09:55,953 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1020 characters
2025-07-11 20:09:55,953 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:09:55,953 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:09:55,955 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:09:55,956 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:09:55,956 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:09:55,957 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:09:55,957 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:09:55,957 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:09:55,957 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:09:55,962 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:09:56,364 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:56,377 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:58,284 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:58,297 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:09:59,843 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:09:59,862 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:01,276 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:01,298 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:06,679 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:06,695 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 20:10:06,696 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:07,432 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:07,438 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['definite article', 'nominative case', 'personal pronoun', 'present tense']
2025-07-11 20:10:07,438 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=definite article, skill=gap-fill
2025-07-11 20:10:07,448 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 20:10:07,453 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:10:07,461 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 20:10:07,466 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex3 for user test1
2025-07-11 20:10:07,469 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:10,084 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:10,106 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:11,825 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:11,853 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:13,156 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:13,172 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 13 results
2025-07-11 20:10:13,172 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 20:10:13,177 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 20:10:13,181 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 20:10:13,181 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 20:10:13,181 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:10:13,182 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:10:13,183 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 20:10:13,188 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 20:10:13,188 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 20:10:13,188 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 20:10:13,189 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:10:13,190 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:10:13,193 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:10:13.190483",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 20:10:13,196 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:10:13,197 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:10:13,197 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:10:13,200 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:10:13,202 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:10:13,202 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:10:13,202 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=45, topic_count=30
2025-07-11 20:10:13,202 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:10:13,202 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:10:13,203 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:10:13,203 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:10:13,203 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:10:13,203 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:10:13,204 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:10:16,840 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:10:16,841 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:10:16,841 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1075 characters
2025-07-11 20:10:16,841 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:10:16,842 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:10:16,842 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:10:16,842 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:10:16,843 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:10:16,843 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:10:16,843 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:10:16,843 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:10:16,844 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:10:16,849 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:12:19,774 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/helpers/ai_evaluation_helpers.py', reloading
2025-07-11 20:12:20,003 - werkzeug - INFO -  * Restarting with stat
2025-07-11 20:12:20,927 - werkzeug - WARNING -  * Debugger is active!
2025-07-11 20:12:20,928 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-11 20:12:56,677 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:12:56,679 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:12:56,679 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:12:56,685 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:12:56,686 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:12:56,688 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:12:56] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:13:11,036 - routes.ai.exercise_routes - INFO - Exercise submission request for user test1, block training
2025-07-11 20:13:11,038 - routes.ai.exercise_routes - INFO - Received submission data for user test1: {
  "answers": {
    "ex2": "sie ist lehererin.",
    "ex1": "Wir",
    "ex3": "Er"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ malt ein Bild. (She paints a picture.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "They are teachers.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "_____ habe einen Hund. (I have a dog.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "dog",
        "word": "Hund"
      },
      {
        "meaning": "teacher",
        "word": "Lehrer"
      },
      {
        "meaning": "paints",
        "word": "malt"
      },
      {
        "meaning": "picture",
        "word": "Bild"
      }
    ]
  }
}
2025-07-11 20:13:11,039 - routes.ai.exercise_routes - INFO - Parsed submission for user test1: 3 exercises, 3 answers
2025-07-11 20:13:11,039 - routes.ai.exercise_routes - INFO - Evaluating exercises for user test1
2025-07-11 20:13:11,041 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-11 20:13:11,041 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-11 20:13:11,041 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-11 20:13:11,042 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-11 20:13:11,057 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:12,085 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:12,087 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-11 20:13:12,087 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 249 characters
2025-07-11 20:13:12,088 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-11 20:13:12,089 - routes.ai.exercise_routes - INFO - Evaluation successful for user test1
2025-07-11 20:13:12,089 - routes.ai.exercise_routes - INFO - Summary for user test1: {'correct': 0, 'total': 3, 'mistakes': [{'question': '_____ malt ein Bild. (She paints a picture.)', 'your_answer': 'Er', 'correct_answer': 'Sie'}, {'question': 'They are teachers.', 'your_answer': 'sie ist lehererin.', 'correct_answer': 'Sie sind Lehrer.'}, {'question': '_____ habe einen Hund. (I have a dog.)', 'your_answer': 'Wir', 'correct_answer': 'Ich'}]}
2025-07-11 20:13:12,090 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user test1
2025-07-11 20:13:12,096 - routes.ai.exercise_routes - INFO - Got 45 vocab and 30 topic entries for user test1
2025-07-11 20:13:12,097 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:14,818 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:14,821 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user test1
2025-07-11 20:13:14,827 - routes.ai.exercise_routes - INFO - Saving exercise submission for user test1
2025-07-11 20:13:14,827 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:13:14.827538",
  "event_type": "submission_start",
  "username": "test1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex2": "sie ist lehererin.",
      "ex1": "Wir",
      "ex3": "Er"
    }
  }
}
2025-07-11 20:13:14,829 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user test1, block training
2025-07-11 20:13:14,829 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:13:14,829 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user test1, block training, answers_count=3
2025-07-11 20:13:14,830 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:13:14,830 - routes.ai.exercise_routes - INFO - Exercise submission completed for user test1, passed=False
2025-07-11 20:13:14,830 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user test1
2025-07-11 20:13:14,831 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:14,832 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:14,832 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user test1: correct=0, quality=2
2025-07-11 20:13:14,835 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:14,840 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:14,840 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:13:14,840 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:13:14,846 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:14,848 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:14,848 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:13:14,848 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=45, topic_count=30
2025-07-11 20:13:14,848 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:13:14,848 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:13:14,848 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:13:14,849 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:13:14,849 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:13:14,849 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:13:14,850 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:15,296 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:15,298 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:15,302 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:15,303 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['noun', 'personal pronoun', 'verb conjugation']
2025-07-11 20:13:15,304 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=noun, skill=translation
2025-07-11 20:13:15,313 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=translation
2025-07-11 20:13:15,321 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=translation
2025-07-11 20:13:15,329 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex2 for user test1
2025-07-11 20:13:15,337 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:17,686 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:17,686 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:17,691 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:17,701 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:18,205 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:18,211 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:18,733 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:18,747 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:20,552 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:20,552 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:20,554 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:20,558 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:13:20,559 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1169 characters
2025-07-11 20:13:20,561 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:20,561 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:13:20,562 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:13:20,563 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:13:20,564 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:13:20,565 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:13:20,565 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:13:20,566 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:13:20,566 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:13:20,568 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:13:20,581 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:13:20,583 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:21,134 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:21,139 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:21,874 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:21,894 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user test1: correct=0, quality=2
2025-07-11 20:13:21,895 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:22,307 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:22,313 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:13:22] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-11 20:13:22,331 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:13:22,331 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=3
2025-07-11 20:13:22,332 - routes.ai.training_routes - INFO - User test1 has answers, checking cached next exercises
2025-07-11 20:13:22,334 - routes.ai.training_routes - INFO - Found cached next exercises for user test1
2025-07-11 20:13:22,334 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user test1
2025-07-11 20:13:22,335 - routes.ai.training_routes - INFO - Storing exercises for user test1
2025-07-11 20:13:22,339 - routes.ai.training_routes - INFO - Running prefetch next exercises for user test1
2025-07-11 20:13:22,339 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:13:22,339 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user test1
2025-07-11 20:13:22,340 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:22,341 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:13:22] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:13:22,346 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:22,347 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:13:22,347 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:13:22,357 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:22,359 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:22,359 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:13:22,359 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=45, topic_count=31
2025-07-11 20:13:22,360 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:13:22,360 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:13:22,360 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:13:22,360 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:13:22,360 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:13:22,361 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:13:22,362 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:22,441 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:22,443 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'nominative case', 'personal pronoun', 'verb conjugation']
2025-07-11 20:13:22,443 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 20:13:22,451 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=nominative case, skill=gap-fill
2025-07-11 20:13:22,456 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:13:22,461 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb conjugation, skill=gap-fill
2025-07-11 20:13:22,466 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user test1
2025-07-11 20:13:22,482 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:23,449 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:23,476 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:25,093 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:25,107 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:25,737 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:25,740 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:13:25,741 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 962 characters
2025-07-11 20:13:25,741 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:13:25,742 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:13:25,744 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:13:25,745 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:13:25,745 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:13:25,746 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:13:25,746 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:13:25,746 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:13:25,746 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:13:25,751 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:13:26,127 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:26,136 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:27,806 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:27,820 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user test1: correct=0, quality=2
2025-07-11 20:13:27,821 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:28,406 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:28,410 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['indefinite article', 'personal pronoun', 'present tense', 'verb']
2025-07-11 20:13:28,411 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=indefinite article, skill=gap-fill
2025-07-11 20:13:28,418 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=personal pronoun, skill=gap-fill
2025-07-11 20:13:28,422 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=present tense, skill=gap-fill
2025-07-11 20:13:28,427 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user test1, feature=verb, skill=gap-fill
2025-07-11 20:13:28,433 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex3 for user test1
2025-07-11 20:13:28,435 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:30,079 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:30,098 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:31,945 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:31,972 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:33,299 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:33,332 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:34,778 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:34,791 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:36,213 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:36,227 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user test1: 11 results
2025-07-11 20:13:36,228 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user test1
2025-07-11 20:13:36,233 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user test1, block training
2025-07-11 20:13:36,238 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions
2025-07-11 20:13:36,238 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user test1 with 3 new questions, limit=20
2025-07-11 20:13:36,238 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:36,240 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:36,240 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user test1: 20 total questions
2025-07-11 20:13:36,246 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user test1
2025-07-11 20:13:36,246 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user test1
2025-07-11 20:13:36,247 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user test1
2025-07-11 20:13:36,247 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user test1
2025-07-11 20:13:36,247 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:36,248 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-11T20:13:36.248044",
  "event_type": "submission_complete",
  "username": "test1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-11 20:13:36,250 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:36,250 - routes.ai.helpers.exercise_helpers - INFO - Got 20 recent questions for user test1
2025-07-11 20:13:36,250 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user test1
2025-07-11 20:13:36,261 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user test1, limit=20
2025-07-11 20:13:36,262 - routes.ai.helpers.exercise_helpers - INFO - Found 20 recent questions for user test1
2025-07-11 20:13:36,262 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 20 recent questions for user test1
2025-07-11 20:13:36,262 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=47, topic_count=31
2025-07-11 20:13:36,263 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-11 20:13:36,263 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-11 20:13:36,263 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-11 20:13:36,263 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-11 20:13:36,263 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=20
2025-07-11 20:13:36,264 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-11 20:13:36,264 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-11 20:13:40,515 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-11 20:13:40,517 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-11 20:13:40,517 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1122 characters
2025-07-11 20:13:40,517 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-11 20:13:40,517 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-11 20:13:40,518 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user test1
2025-07-11 20:13:40,518 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user test1
2025-07-11 20:13:40,518 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user test1: True
2025-07-11 20:13:40,518 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user test1 to avoid duplicates
2025-07-11 20:13:40,518 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user test1
2025-07-11 20:13:40,519 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user test1: 3 exercises
2025-07-11 20:13:40,519 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user test1
2025-07-11 20:13:40,523 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user test1
2025-07-11 20:16:21,183 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:16:21,185 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:16:21,185 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:16:21,186 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:16:21,186 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:16:21,188 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:16:21] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:16:23,930 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:16:23,931 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:16:23,931 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:16:23,933 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:16:23,933 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:16:23,934 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:16:23] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-11 20:16:23,942 - routes.ai.training_routes - INFO - Training exercises request from user: test1
2025-07-11 20:16:23,942 - routes.ai.training_routes - INFO - Training request data for user test1: answers_count=0
2025-07-11 20:16:23,942 - routes.ai.training_routes - INFO - User test1 has no answers, checking cached exercises
2025-07-11 20:16:23,943 - routes.ai.training_routes - INFO - Found cached exercises for user test1
2025-07-11 20:16:23,943 - routes.ai.training_routes - INFO - Returning cached exercises for user test1
2025-07-11 20:16:23,944 - werkzeug - INFO - 172.18.0.3 - - [11/Jul/2025 20:16:23] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 08:17:41,866 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 08:17:41,866 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 08:17:41,870 - werkzeug - INFO -  * Restarting with stat
2025-07-12 08:17:43,401 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 08:17:43,404 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 08:18:15,632 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:18:15] "[31m[1mGET /api/me HTTP/1.1[0m" 401 -
2025-07-12 08:19:55,533 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:19:55] "[31m[1mGET /api/me HTTP/1.1[0m" 401 -
2025-07-12 08:21:22,692 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:21:22] "[31m[1mGET /api/me HTTP/1.1[0m" 401 -
2025-07-12 08:21:37,869 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:21:37] "POST /api/admin/login HTTP/1.1" 200 -
2025-07-12 08:21:38,413 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:21:38] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:21:38,978 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:21:38] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:21:39,575 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:21:39] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:21:39,576 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:21:39] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:21:39,578 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:21:39] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:21:39,579 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:21:39] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:21:39,987 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:21:39] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:21:39,987 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:21:39] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:23:50,725 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:23:50] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:23:50,731 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:23:50] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:24:13,615 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:13] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:24:13,616 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:13] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:24:13,623 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:13] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:24:14,183 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:14] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:24:29,818 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:29] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 08:24:30,436 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:30] "POST /api/login HTTP/1.1" 200 -
2025-07-12 08:24:30,721 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:30] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:24:31,297 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:31] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:24:36,363 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:36] "POST /api/user-level HTTP/1.1" 200 -
2025-07-12 08:24:36,921 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:36] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 08:24:47,665 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:47] "POST /api/admin/login HTTP/1.1" 200 -
2025-07-12 08:24:48,235 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:48] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:24:48,798 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:48] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:24:49,378 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:49] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:24:49,378 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:49] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:24:49,379 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:49] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:24:49,382 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:49] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:24:51,437 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:51] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:24:51,442 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:51] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:24:57,638 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:57] "DELETE /api/admin/users/aaaaa HTTP/1.1" 200 -
2025-07-12 08:24:58,796 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:58] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:24:59,357 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:59] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:24:59,950 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:59] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:24:59,958 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:59] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:24:59,960 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:59] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:24:59,967 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:24:59] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:25:01,105 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:01] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:25:01,111 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:01] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 08:25:01,576 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:01] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:25:02,170 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:02] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:25:02,170 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:02] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:25:02,172 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:02] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:25:02,175 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:02] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:25:02,916 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:02] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:25:02,920 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:02] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 08:25:03,425 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:03] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:25:04,022 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:04] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:25:04,023 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:04] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:25:04,025 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:04] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:25:04,026 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:04] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:25:10,411 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:10] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:25:10,411 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:10] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:25:11,671 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:11] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:25:11,685 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:11] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:25:11,699 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:11] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:25:11,699 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:11] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:25:11,700 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:11] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:25:11,700 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:11] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:25:14,428 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:14] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:25:14,431 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:14] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:25:16,514 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:16] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 08:25:16,515 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:16] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:25:16,522 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:16] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:25:16,539 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:16] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:25:16,539 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:16] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:25:16,540 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:16] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:25:16,542 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:16] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:25:18,383 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:18] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:25:18,385 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:18] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 08:25:18,391 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:18] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:25:18,418 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:18] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:25:18,420 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:18] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:25:18,421 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:18] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:25:18,422 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:25:18] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:28:33,076 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:28:33] "[31m[1mGET /api/me HTTP/1.1[0m" 401 -
2025-07-12 08:28:41,841 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:28:41] "POST /api/admin/login HTTP/1.1" 200 -
2025-07-12 08:28:41,885 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:28:41] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:28:41,897 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:28:41] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:28:41,928 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:28:41] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:28:41,929 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:28:41] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:28:41,934 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:28:41] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:28:41,936 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 08:28:41] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:30:49,781 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 08:30:49,782 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 08:30:49,782 - werkzeug - INFO -  * Restarting with stat
2025-07-12 08:30:50,639 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 08:30:50,641 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 08:30:56,503 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:30:56] "POST /api/admin/login HTTP/1.1" 200 -
2025-07-12 08:30:56,542 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:30:56] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:30:56,574 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:30:56] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:30:56,597 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:30:56] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:30:56,597 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:30:56] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:30:56,600 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:30:56] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:30:56,600 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:30:56] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:31:01,027 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:01] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:31:01,039 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:01] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 08:31:01,062 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:01] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:31:01,095 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:01] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:31:01,101 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:01] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:31:01,104 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:01] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:31:01,104 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:01] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:31:02,091 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:02] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:31:02,091 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:02] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 08:31:02,097 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:02] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:31:02,108 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:02] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:31:02,108 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:02] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:31:02,109 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:02] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:31:02,110 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:02] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:31:28,833 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:28] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:31:28,834 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:28] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:31:29,380 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:29] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:31:29,949 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:29] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:31:29,954 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:29] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:31:29,954 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:29] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:31:29,955 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:29] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:31:29,955 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:29] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:31:38,874 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:38] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:31:39,409 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:39] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:31:40,010 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:40] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:31:40,014 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:40] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:31:40,015 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:40] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:31:40,015 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:40] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:31:43,055 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:43] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:31:43,628 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:43] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:31:44,206 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:44] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:31:44,783 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:44] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:31:45,371 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:45] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:31:45,372 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:45] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:31:45,373 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:45] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:31:45,376 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:31:45] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:32:05,311 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:32:05] "[31m[1mPOST /api/settings/password HTTP/1.1[0m" 400 -
2025-07-12 08:32:15,705 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:32:15] "[31m[1mPOST /api/settings/password HTTP/1.1[0m" 400 -
2025-07-12 08:32:20,868 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:32:20] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:32:20,874 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:32:20] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 08:32:21,436 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:32:21] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:32:22,030 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:32:22] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:32:22,030 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:32:22] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:32:22,032 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:32:22] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:32:22,036 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:32:22] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:34:55,937 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:34:55] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:34:55,940 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:34:55] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:35:47,064 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:35:47] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:35:47,064 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:35:47] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:35:47,069 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:35:47] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:35:47,590 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:35:47] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:35:50,301 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:35:50] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 08:35:50,302 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:35:50] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:35:50,867 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:35:50] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:35:51,442 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:35:51] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:35:51,444 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:35:51] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:35:51,445 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:35:51] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:35:51,446 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:35:51] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:36:17,915 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:36:17] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:36:17,923 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:36:17] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:37:03,854 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:37:03] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:37:03,865 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:37:03] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:37:07,944 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:37:07] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:37:07,950 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:37:07] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:37:22,784 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:37:22] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 08:37:23,231 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:37:23] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:38:06,325 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:38:06] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:38:06,340 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:38:06] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:38:08,713 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:38:08] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:38:08,719 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:38:08] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:38:25,158 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:38:25] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 08:38:25,627 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:38:25] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:38:29,938 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:38:29] "DELETE /api/admin/users/g HTTP/1.1" 200 -
2025-07-12 08:38:34,973 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:38:34] "DELETE /api/admin/users/hello HTTP/1.1" 200 -
2025-07-12 08:39:23,429 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:39:23] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:39:23,438 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:39:23] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:39:27,027 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:39:27] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:39:27,030 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:39:27] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:39:27,562 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:39:27] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:39:27,566 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:39:27] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:39:44,241 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:39:44] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 08:39:44,688 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:39:44] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:40:10,073 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:10] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 08:40:10,498 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:10] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-12 08:40:23,229 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:23] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:40:23,231 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:23] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 08:40:23,807 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:23] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:40:24,385 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:24] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-12 08:40:24,390 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:24] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-12 08:40:24,391 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:24] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-12 08:40:24,393 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:24] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-12 08:40:36,287 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:36] "[31m[1mPOST /api/login HTTP/1.1[0m" 401 -
2025-07-12 08:40:54,843 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:54] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 08:40:55,387 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:55] "POST /api/login HTTP/1.1" 200 -
2025-07-12 08:40:55,870 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:55] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:40:56,443 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:40:56] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:52:23,548 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:52:23] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:52:23,556 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:52:23] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:52:39,287 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:52:39] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:52:39,304 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:52:39] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:54:34,854 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:54:34] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:54:34,870 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:54:34] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:56:31,897 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:56:31] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:56:31,914 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:56:31] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:59:15,354 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:15] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:59:15,361 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:15] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:59:24,004 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:24] "POST /api/login HTTP/1.1" 200 -
2025-07-12 08:59:24,019 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:24] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:59:24,029 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:24] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:59:24,058 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:24] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 08:59:29,275 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:29] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 08:59:38,706 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:38] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:59:38,716 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:38] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:59:38,725 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:38] "GET /api/profile HTTP/1.1" 200 -
2025-07-12 08:59:42,338 - app - INFO - User Flo requesting account deactivation
2025-07-12 08:59:42,341 - app - INFO - Deleted 0 records from ai_user_data for user Flo
2025-07-12 08:59:42,342 - app - INFO - Deleted 0 records from vocab_log for user Flo
2025-07-12 08:59:42,344 - app - INFO - Deleted 3 records from topic_memory for user Flo
2025-07-12 08:59:42,344 - app - INFO - Deleted 0 records from results for user Flo
2025-07-12 08:59:42,344 - app - INFO - Deleted 0 records from exercise_submissions for user Flo
2025-07-12 08:59:42,344 - app - INFO - Deleted 0 records from lesson_progress for user Flo
2025-07-12 08:59:42,345 - app - INFO - Deleted 1 records from users for user Flo
2025-07-12 08:59:42,352 - app - INFO - Destroyed all sessions for user Flo
2025-07-12 08:59:42,352 - app - INFO - Account deactivation completed for user Flo. Deleted: AI data=0, vocab=0, topic_memory=3, results=0, exercise_submissions=0, lesson_progress=0, user=1
2025-07-12 08:59:42,354 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:42] "POST /api/settings/deactivate HTTP/1.1" 200 -
2025-07-12 08:59:47,151 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:47] "[31m[1mPOST /api/login HTTP/1.1[0m" 401 -
2025-07-12 08:59:49,630 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:49] "[31m[1mPOST /api/login HTTP/1.1[0m" 401 -
2025-07-12 08:59:53,721 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:53] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 08:59:53,805 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:53] "POST /api/login HTTP/1.1" 200 -
2025-07-12 08:59:53,812 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:53] "GET /api/me HTTP/1.1" 200 -
2025-07-12 08:59:53,818 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:53] "GET /api/role HTTP/1.1" 200 -
2025-07-12 08:59:56,878 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:56] "POST /api/user-level HTTP/1.1" 200 -
2025-07-12 08:59:56,901 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 08:59:56] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:00:25,428 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:00:25] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:00:25,435 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:00:25] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:09:51,239 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 09:09:51,239 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 09:09:51,239 - werkzeug - INFO -  * Restarting with stat
2025-07-12 09:09:52,411 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 09:09:52,414 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 09:09:59,344 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:09:59] "GET /api/me HTTP/1.1" 200 -
2025-07-12 09:09:59,346 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:09:59] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:09:59,858 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:09:59] "GET /api/role HTTP/1.1" 200 -
2025-07-12 09:09:59,866 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:09:59] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:10:00,442 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:10:00] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:10:09,064 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 09:10:09,390 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 09:10:09,742 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:10:09] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 09:17:34,920 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 09:17:35,230 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 09:17:35,313 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:17:35] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 09:18:31,686 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:18:31] "GET /api/me HTTP/1.1" 200 -
2025-07-12 09:18:31,711 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:18:31] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:18:31,983 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:18:31] "GET /api/role HTTP/1.1" 200 -
2025-07-12 09:18:31,984 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:18:31] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:18:32,534 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:18:32] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:19:41,360 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:19:41] "GET /api/me HTTP/1.1" 200 -
2025-07-12 09:19:41,363 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:19:41] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:19:41,845 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:19:41] "GET /api/role HTTP/1.1" 200 -
2025-07-12 09:19:41,855 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:19:41] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:19:42,430 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:19:42] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:22:53,573 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 09:22:54,851 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 09:22:55,171 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:22:55] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 09:24:12,922 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 09:24:13,207 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 09:24:13,645 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:24:13] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 09:28:10,761 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 09:28:10,762 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 09:28:10,763 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 09:28:10,765 - routes.ai.training_routes - INFO - Generating new training exercises for user Flo
2025-07-12 09:28:10,765 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_training_exercises for user Flo
2025-07-12 09:28:10,766 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 09:28:10,769 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user Flo
2025-07-12 09:28:10,770 - routes.ai.helpers.exercise_helpers - INFO - Detected new user Flo, generating two unique blocks with different contexts
2025-07-12 09:28:10,771 - routes.ai.helpers.exercise_helpers - INFO - Generating blocks for new user Flo
2025-07-12 09:28:10,771 - routes.ai.helpers.exercise_helpers - INFO - Generating first block for new user Flo
2025-07-12 09:28:10,778 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 09:28:10,779 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user Flo
2025-07-12 09:28:10,779 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 0 recent questions for user Flo
2025-07-12 09:28:10,779 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 09:28:10,780 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 09:28:10,780 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 09:28:10,780 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 09:28:10,780 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 09:28:10,780 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=0
2025-07-12 09:28:10,780 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 09:28:10,787 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 09:28:14,707 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 09:28:14,710 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 09:28:14,711 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1075 characters
2025-07-12 09:28:14,712 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 09:28:14,712 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 09:28:14,713 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 09:28:14,713 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 09:28:14,713 - routes.ai.helpers.exercise_helpers - INFO - Generated first block for new user Flo with 3 exercises
2025-07-12 09:28:14,713 - routes.ai.helpers.exercise_helpers - INFO - Extracted 3 questions from first block for new user Flo
2025-07-12 09:28:14,714 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions, limit=20
2025-07-12 09:28:14,714 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 09:28:14,717 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user Flo
2025-07-12 09:28:14,718 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user Flo: 3 total questions
2025-07-12 09:28:14,724 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user Flo
2025-07-12 09:28:14,724 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user Flo
2025-07-12 09:28:14,726 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for Flo after after updating exercise history: {
  "username": "Flo",
  "exercises": null,
  "next_exercises": null,
  "exercises_updated_at": null,
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Ich ___ einen Bruder. (I have a brother.)\", \"She is a doctor.\", \"___ bist du? (Where are you?)\"]"
}
2025-07-12 09:28:14,833 - routes.ai.helpers.exercise_helpers - INFO - Generating second block for new user Flo with different context
2025-07-12 09:28:14,834 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block with variation for new user Flo with 3 exclude questions
2025-07-12 09:28:14,845 - routes.ai.helpers.exercise_helpers - INFO - Using 3 exclude questions as recent questions for variation
2025-07-12 09:28:14,845 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 09:28:14,845 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 09:28:14,845 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 09:28:14,845 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 09:28:14,846 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 09:28:14,846 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 09:28:14,846 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 09:28:14,847 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 09:28:18,064 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 09:28:18,068 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 09:28:18,068 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1038 characters
2025-07-12 09:28:18,068 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 09:28:18,069 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 09:28:18,070 - routes.ai.helpers.exercise_helpers - INFO - Generated 3 exercises in variation block for new user Flo
2025-07-12 09:28:18,071 - routes.ai.helpers.exercise_helpers - INFO - Successfully created AI block with variation for new user Flo: 3 exercises
2025-07-12 09:28:18,071 - routes.ai.helpers.exercise_helpers - INFO - Generated second block for new user Flo with 3 exercises
2025-07-12 09:28:18,072 - routes.ai.helpers.exercise_helpers - INFO - After filtering duplicates for new user Flo: 3 exercises remain
2025-07-12 09:28:18,072 - routes.ai.helpers.exercise_helpers - INFO - Final second block for new user Flo: 3 exercises
2025-07-12 09:28:18,072 - routes.ai.helpers.exercise_helpers - INFO - Storing exercise blocks for new user Flo
2025-07-12 09:28:18,081 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for Flo after after storing both blocks: {
  "username": "Flo",
  "exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich ___ einen Bruder. (I have a brother.)\", \"explanation\": \"No explanation.\", \"options\": [\"ist\", \"bin\", \"habe\", \"hat\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"She is a doctor.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"___ bist du? (Where are you?)\", \"explanation\": \"No explanation.\", \"options\": [\"Wo\", \"Was\", \"Wer\", \"Wie\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you notice any patterns or have any questions about the grammar or vocabulary?\", \"vocabHelp\": [{\"word\": \"habe\", \"meaning\": \"have (I)\"}, {\"word\": \"\\u00c4rztin\", \"meaning\": \"doctor (female)\"}, {\"word\": \"Wo\", \"meaning\": \"where\"}]}",
  "next_exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"___ habe einen Hund. (I have a dog.)\", \"explanation\": \"No explanation.\", \"options\": [\"Ich\", \"Du\", \"Er\", \"Sie\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"He is a teacher.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"___ sind wir? (Where are we?)\", \"explanation\": \"No explanation.\", \"options\": [\"Wo\", \"Wer\", \"Was\", \"Wie\"]}], \"feedbackPrompt\": \"How did you find these exercises? Let me know if you need help with any specific grammar or vocabulary.\", \"vocabHelp\": [{\"word\": \"Hund\", \"meaning\": \"dog\"}, {\"word\": \"Lehrer\", \"meaning\": \"teacher\"}, {\"word\": \"Wo\", \"meaning\": \"where\"}]}",
  "exercises_updated_at": "2025-07-12T09:28:18.072588",
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Ich ___ einen Bruder. (I have a brother.)\", \"She is a doctor.\", \"___ bist du? (Where are you?)\"]"
}
2025-07-12 09:28:18,081 - routes.ai.helpers.exercise_helpers - INFO - Successfully completed generate_training_exercises for new user Flo
2025-07-12 09:28:18,081 - routes.ai.training_routes - INFO - Returning new training exercises for user Flo
2025-07-12 09:28:18,083 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:28:18] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 09:28:18,139 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 09:28:18,140 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 09:28:18,141 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 09:28:18,163 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 09:28:18,163 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 09:28:18,169 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:28:18] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 09:28:20,055 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:28:20] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:29:03,913 - werkzeug - INFO -  * Detected change in '/app/src/app/migration_script.py', reloading
2025-07-12 09:29:04,259 - werkzeug - INFO -  * Restarting with stat
2025-07-12 09:29:05,688 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 09:29:05,691 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 09:29:11,935 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 09:29:12,197 - werkzeug - INFO -  * Restarting with stat
2025-07-12 09:29:13,258 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 09:29:13,259 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 09:29:21,444 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 09:29:22,591 - werkzeug - INFO -  * Restarting with stat
2025-07-12 09:29:24,042 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 09:29:24,043 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 09:29:38,536 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:29:38] "GET /api/me HTTP/1.1" 200 -
2025-07-12 09:29:38,541 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:29:38] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:29:39,095 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:29:39] "GET /api/role HTTP/1.1" 200 -
2025-07-12 09:30:01,505 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:30:01] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:30:09,794 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:30:09] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:30:19,966 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:30:19] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:30:32,912 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:30:32] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:30:40,207 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:30:40] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:31:04,761 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 09:31:04,761 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 09:31:04,762 - werkzeug - INFO -  * Restarting with stat
2025-07-12 09:31:06,795 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 09:31:06,804 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 09:31:15,021 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:31:15] "GET /api/me HTTP/1.1" 200 -
2025-07-12 09:31:15,029 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:31:15] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:31:15,415 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:31:15] "GET /api/role HTTP/1.1" 200 -
2025-07-12 09:31:15,421 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:31:15] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:31:15,999 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:31:15] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:31:17,640 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:31:17] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:31:21,181 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 09:31:21,561 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 09:31:21,621 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:31:21] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 09:31:22,223 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:31:22] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:31:22,794 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:31:22] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:31:29,656 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 09:31:29,942 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 09:31:29,998 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:31:29] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 09:31:31,546 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:31:31] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:31:32,124 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:31:32] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:31:34,286 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:31:34] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:32:25,914 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:32:25] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:32:41,362 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:32:41] "GET /api/me HTTP/1.1" 200 -
2025-07-12 09:32:41,794 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:32:41] "GET /api/role HTTP/1.1" 200 -
2025-07-12 09:32:46,553 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:32:46] "POST /api/login HTTP/1.1" 200 -
2025-07-12 09:32:47,045 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:32:47] "GET /api/me HTTP/1.1" 200 -
2025-07-12 09:32:47,630 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:32:47] "GET /api/role HTTP/1.1" 200 -
2025-07-12 09:32:48,218 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:32:48] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:34:52,955 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:34:52] "GET /api/me HTTP/1.1" 200 -
2025-07-12 09:34:52,968 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:34:52] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:34:53,374 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:34:53] "GET /api/role HTTP/1.1" 200 -
2025-07-12 09:34:53,386 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:34:53] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:34:53,986 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:34:53] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 09:34:55,817 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:34:55] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:35:44,393 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:35:44] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:38:26,418 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:38:26] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:38:27,893 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:38:27] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:38:28,481 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:38:28] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:39:02,385 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 09:39:02,708 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 09:39:04,337 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:39:04] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 09:39:04,377 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:39:04] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:39:04,956 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:39:04] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:39:31,690 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:39:31] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:39:33,061 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:39:33] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:39:33,644 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:39:33] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:39:38,647 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 09:39:38,919 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 09:39:39,607 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:39:39] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 09:39:41,024 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:39:41] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:39:41,608 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:39:41] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:39:51,645 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 09:39:51,830 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 09:39:51,992 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:39:51] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 09:39:52,313 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:39:52] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:39:52,798 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:39:52] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:41:12,975 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:41:12] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:41:14,981 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:41:14] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:41:15,570 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:41:15] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:45:28,464 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 09:45:28,806 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 09:45:29,114 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:45:29] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 09:45:35,180 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:45:35] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:45:35,753 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:45:35] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:47:57,023 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 09:47:57] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:48:27,845 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 09:48:27,845 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 09:48:27,845 - werkzeug - INFO -  * Restarting with stat
2025-07-12 09:48:29,278 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 09:48:29,280 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 09:54:19,374 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 09:54:19,375 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 09:54:19,376 - werkzeug - INFO -  * Restarting with stat
2025-07-12 09:54:20,239 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 09:54:20,240 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 09:54:21,937 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 09:54:21] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:54:45,860 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 09:54:49,024 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 09:54:49,062 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 09:54:49] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 09:54:52,692 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 09:54:52] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:54:52,703 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 09:54:52] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 09:58:06,437 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/helpers/misc_helpers.py', reloading
2025-07-12 09:58:06,681 - werkzeug - INFO -  * Restarting with stat
2025-07-12 09:58:07,952 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 09:58:07,955 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 09:58:15,348 - werkzeug - INFO -  * Detected change in '/app/src/utils/ai/ai_api.py', reloading
2025-07-12 09:58:15,582 - werkzeug - INFO -  * Restarting with stat
2025-07-12 09:58:16,569 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 09:58:16,570 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 10:02:22,785 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 10:02:22,786 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 10:02:22,786 - werkzeug - INFO -  * Restarting with stat
2025-07-12 10:02:23,715 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 10:02:23,718 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 10:02:38,993 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:02:38] "GET /api/me HTTP/1.1" 200 -
2025-07-12 10:02:39,004 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:02:39] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 10:02:39,504 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:02:39] "GET /api/role HTTP/1.1" 200 -
2025-07-12 10:02:39,511 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:02:39] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 10:02:40,085 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:02:40] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 10:03:02,798 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:03:02] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:03:22,138 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:03:28,864 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:03:29,265 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:03:29] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 10:03:34,534 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:03:34] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:03:35,094 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:03:35] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:11,522 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:11] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:12,080 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:12] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:17,866 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:17] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:19,362 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:19] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:20,146 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:20] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:30,652 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:30] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:32,114 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:32] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:32,687 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:32] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:44,031 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:44] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:45,547 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:45] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:46,104 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:46] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:54,675 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:54] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:56,038 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:56] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:04:56,952 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:04:56] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:06:17,071 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:06:17] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:06:18,352 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:06:18] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:06:19,088 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:06:19] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:07:03,915 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:07:03] "GET /api/me HTTP/1.1" 200 -
2025-07-12 10:07:03,916 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:07:03] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 10:07:04,449 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:07:04] "GET /api/role HTTP/1.1" 200 -
2025-07-12 10:07:04,453 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:07:04] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 10:07:05,035 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:07:05] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 10:07:09,267 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:07:09] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:07:16,444 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:07:16,674 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:07:17,964 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:07:17] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 10:07:19,070 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:07:19] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:07:19,652 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:07:19] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:08:01,075 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:08:01] "[31m[1mGET /api/me HTTP/1.1[0m" 401 -
2025-07-12 10:08:05,508 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:08:05] "POST /api/login HTTP/1.1" 200 -
2025-07-12 10:08:05,519 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:08:05] "GET /api/me HTTP/1.1" 200 -
2025-07-12 10:08:05,529 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:08:05] "GET /api/role HTTP/1.1" 200 -
2025-07-12 10:08:05,544 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:08:05] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 10:08:07,036 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:08:07] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:08:21,438 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:08:21,677 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:08:24,948 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:08:24] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 10:08:24,976 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:08:24] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:08:25,020 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:08:25] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:09:39,177 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:09:39] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:09:40,779 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:09:40] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:09:41,211 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:09:41] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:09:49,954 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:09:49] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:09:50,952 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:09:50] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:09:51,578 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:09:51] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:11:09,054 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:11:09,297 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:11:16,211 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:11:16] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 10:11:16,776 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:11:16] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:11:16,785 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:11:16] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:12:28,596 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:12:28] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:12:30,584 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:12:30] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:12:31,148 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:12:31] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:12:38,865 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:12:38] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:12:40,737 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:12:40] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:12:41,575 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:12:41] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:18:19,674 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:18:19] "GET /api/me HTTP/1.1" 200 -
2025-07-12 10:18:19,679 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:18:19] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 10:18:20,220 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:18:20] "GET /api/role HTTP/1.1" 200 -
2025-07-12 10:18:20,223 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:18:20] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 10:18:20,810 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:18:20] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 10:18:24,354 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:18:24] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:24:10,177 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 10:24:10,433 - werkzeug - INFO -  * Restarting with stat
2025-07-12 10:24:11,596 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 10:24:11,597 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 10:24:38,573 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:24:40,673 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:24:42,945 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:24:42] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 10:24:59,201 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:24:59] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:24:59,774 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:24:59] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:25:17,999 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:25:18,335 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:25:19,660 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:25:19] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 10:25:27,904 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:25:27] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:25:28,477 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:25:28] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:25:52,618 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:25:52,937 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:25:59,765 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:25:59] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 10:25:59,831 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:25:59] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:26:00,644 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:26:00] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:26:42,761 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:26:43,058 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:26:49,055 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:26:49] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 10:27:01,179 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:27:01] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:27:01,751 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:27:01] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:28:17,356 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/helpers/misc_helpers.py', reloading
2025-07-12 10:28:17,625 - werkzeug - INFO -  * Restarting with stat
2025-07-12 10:28:18,563 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 10:28:18,564 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 10:28:49,218 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 10:28:49,426 - werkzeug - INFO -  * Restarting with stat
2025-07-12 10:28:50,384 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 10:28:50,385 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 10:29:45,045 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:29:45,340 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:29:45,509 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:29:45] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 10:29:51,462 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:29:51] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:29:52,041 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:29:52] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:31:18,092 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:31:18] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:31:20,622 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:31:20] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:32:47,483 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:32:47] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:32:49,015 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:32:49] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:32:49,569 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:32:49] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:33:01,924 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:33:02,209 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:33:03,277 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:33:03] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 10:33:03,761 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:33:03] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:33:04,349 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:33:04] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:33:26,814 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:33:27,048 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:33:28,336 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:33:28] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 10:33:32,399 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:33:32] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:33:32,980 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:33:32] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:42:44,733 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:42:44] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 10:42:44,747 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:42:45,196 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:42:45,201 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:42:45] "POST /api/level HTTP/1.1" 200 -
2025-07-12 10:42:45,285 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:42:45,697 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:42:45,699 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:42:45] "POST /api/level HTTP/1.1" 200 -
2025-07-12 10:42:45,836 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:42:45] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 10:43:17,020 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:43:17] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 10:43:17,022 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:43:17] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 10:43:24,353 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:43:24] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 10:43:25,675 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:43:25] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:43:42,579 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:43:43,982 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:43:44,239 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:43:44] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 10:43:49,519 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:43:49] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:43:50,098 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:43:50] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 10:44:13,917 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 10:44:13,919 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 10:44:13,919 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 10:44:13,921 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 10:44:13,921 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 10:44:13,922 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:44:13] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 10:44:14,486 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 10:44:14,486 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 10:44:14,486 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 10:44:14,487 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 10:44:14,487 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 10:44:14,488 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:44:14] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 10:44:22,860 - routes.ai.exercise_routes - INFO - Exercise submission request for user Flo, block training
2025-07-12 10:44:22,861 - routes.ai.exercise_routes - INFO - Received submission data for user Flo: {
  "answers": {
    "ex1": "bin",
    "ex2": "efrde",
    "ex3": "Was"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "ist",
          "bin",
          "habe",
          "hat"
        ],
        "question": "Ich ___ einen Bruder. (I have a brother.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is a doctor.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Wo",
          "Was",
          "Wer",
          "Wie"
        ],
        "question": "___ bist du? (Where are you?)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "have (I)",
        "word": "habe"
      },
      {
        "meaning": "doctor (female)",
        "word": "\u00c4rztin"
      },
      {
        "meaning": "where",
        "word": "Wo"
      }
    ]
  }
}
2025-07-12 10:44:22,862 - routes.ai.exercise_routes - INFO - Parsed submission for user Flo: 3 exercises, 3 answers
2025-07-12 10:44:22,862 - routes.ai.exercise_routes - INFO - Evaluating exercises for user Flo
2025-07-12 10:44:22,862 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-12 10:44:22,862 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-12 10:44:22,863 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-12 10:44:22,863 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-12 10:44:22,868 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:24,494 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:24,495 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-12 10:44:24,495 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 248 characters
2025-07-12 10:44:24,495 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-12 10:44:24,496 - routes.ai.exercise_routes - INFO - Evaluation successful for user Flo
2025-07-12 10:44:24,496 - routes.ai.exercise_routes - INFO - Summary for user Flo: {'correct': 0, 'total': 3, 'mistakes': [{'question': 'Ich ___ einen Bruder. (I have a brother.)', 'your_answer': 'bin', 'correct_answer': 'habe'}, {'question': 'She is a doctor.', 'your_answer': 'efrde', 'correct_answer': 'Sie ist Ärztin.'}, {'question': '___ bist du? (Where are you?)', 'your_answer': 'Was', 'correct_answer': 'Wo'}]}
2025-07-12 10:44:24,496 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user Flo
2025-07-12 10:44:24,498 - routes.ai.exercise_routes - INFO - Got 0 vocab and 3 topic entries for user Flo
2025-07-12 10:44:24,499 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:25,996 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:25,997 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user Flo
2025-07-12 10:44:25,997 - routes.ai.exercise_routes - INFO - Saving exercise submission for user Flo
2025-07-12 10:44:25,997 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T10:44:25.997862",
  "event_type": "submission_start",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "bin",
      "ex2": "efrde",
      "ex3": "Was"
    }
  }
}
2025-07-12 10:44:25,998 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user Flo, block training
2025-07-12 10:44:25,998 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user Flo, block training, answers_count=3
2025-07-12 10:44:25,998 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 10:44:25,998 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user Flo
2025-07-12 10:44:25,999 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 10:44:25,999 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user Flo: correct=0, quality=2
2025-07-12 10:44:25,999 - routes.ai.exercise_routes - INFO - Exercise submission completed for user Flo, passed=False
2025-07-12 10:44:26,000 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 10:44:26,001 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:26,003 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:26,009 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 10:44:26,010 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user Flo
2025-07-12 10:44:26,010 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 10:44:26,017 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 10:44:26,019 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 10:44:26,020 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user Flo
2025-07-12 10:44:26,021 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 10:44:26,022 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 10:44:26,022 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 10:44:26,022 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 10:44:26,023 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 10:44:26,024 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 10:44:26,024 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 10:44:26,026 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:26,663 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:26,655 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:26,804 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'nominative case', 'present tense']
2025-07-12 10:44:26,806 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=indefinite article, skill=gap-fill
2025-07-12 10:44:26,812 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:26,898 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=nominative case, skill=gap-fill
2025-07-12 10:44:26,904 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=present tense, skill=gap-fill
2025-07-12 10:44:26,909 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user Flo
2025-07-12 10:44:26,922 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:28,163 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:28,169 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:28,170 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:28,175 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:29,087 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:29,100 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:29,222 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:29,228 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:29,395 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:29,398 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 10:44:29,398 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1015 characters
2025-07-12 10:44:29,399 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 10:44:29,400 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 10:44:29,402 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 10:44:29,402 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 10:44:29,402 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 10:44:29,402 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 10:44:29,402 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 10:44:29,403 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 10:44:29,403 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 10:44:29,411 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 10:44:30,563 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:30,577 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:30,855 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:30,857 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:32,259 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:32,261 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:32,655 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:32,673 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:33,509 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:33,515 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:44:33] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-12 10:44:33,554 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 10:44:33,554 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=3
2025-07-12 10:44:33,555 - routes.ai.training_routes - INFO - User Flo has answers, checking cached next exercises
2025-07-12 10:44:33,556 - routes.ai.training_routes - INFO - Found cached next exercises for user Flo
2025-07-12 10:44:33,556 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user Flo
2025-07-12 10:44:33,556 - routes.ai.training_routes - INFO - Storing exercises for user Flo
2025-07-12 10:44:33,574 - routes.ai.training_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 10:44:33,576 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 10:44:33,577 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user Flo
2025-07-12 10:44:33,580 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 10:44:33,581 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:44:33] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 10:44:33,588 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 10:44:33,588 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user Flo
2025-07-12 10:44:33,589 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 10:44:33,595 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 10:44:33,597 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 10:44:33,604 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user Flo
2025-07-12 10:44:33,604 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=4, topic_count=6
2025-07-12 10:44:33,605 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 10:44:33,605 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 10:44:33,605 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 10:44:33,605 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 10:44:33,606 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 10:44:33,606 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 10:44:33,607 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:34,302 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:34,328 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:35,916 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:35,926 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user Flo: correct=0, quality=2
2025-07-12 10:44:35,927 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:36,526 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:36,528 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['definite article', 'personal pronoun', 'present tense', 'profession']
2025-07-12 10:44:36,529 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=definite article, skill=translation
2025-07-12 10:44:36,537 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=translation
2025-07-12 10:44:36,542 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=present tense, skill=translation
2025-07-12 10:44:36,546 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=profession, skill=translation
2025-07-12 10:44:36,550 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user Flo
2025-07-12 10:44:36,552 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:37,375 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:37,376 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 10:44:37,376 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1065 characters
2025-07-12 10:44:37,376 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 10:44:37,377 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 10:44:37,378 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 10:44:37,378 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 10:44:37,378 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 10:44:37,379 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 10:44:37,379 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 10:44:37,379 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 10:44:37,379 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 10:44:37,386 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 10:44:38,423 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:38,441 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:39,632 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:39,656 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:41,068 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:41,094 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:42,502 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:42,525 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:43,934 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:43,947 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user Flo: correct=0, quality=2
2025-07-12 10:44:43,947 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:44,405 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:44,407 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['interrogative pronoun', 'question word', 'verb']
2025-07-12 10:44:44,407 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=interrogative pronoun, skill=gap-fill
2025-07-12 10:44:44,416 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=question word, skill=gap-fill
2025-07-12 10:44:44,422 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=verb, skill=gap-fill
2025-07-12 10:44:44,430 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user Flo
2025-07-12 10:44:44,436 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:47,726 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:47,750 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:49,157 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:49,187 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:50,825 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:50,843 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:52,400 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:52,414 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:54,544 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:54,564 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user Flo: 10 results
2025-07-12 10:44:54,565 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user Flo
2025-07-12 10:44:54,568 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user Flo, block training
2025-07-12 10:44:54,573 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions
2025-07-12 10:44:54,573 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions, limit=20
2025-07-12 10:44:54,573 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 10:44:54,575 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 10:44:54,576 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user Flo: 6 total questions
2025-07-12 10:44:54,581 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user Flo
2025-07-12 10:44:54,581 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user Flo
2025-07-12 10:44:54,581 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user Flo
2025-07-12 10:44:54,581 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 10:44:54,582 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 10:44:54,582 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T10:44:54.582538",
  "event_type": "submission_complete",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-12 10:44:54,584 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user Flo
2025-07-12 10:44:54,584 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user Flo
2025-07-12 10:44:54,584 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 10:44:54,588 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 10:44:54,589 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user Flo
2025-07-12 10:44:54,589 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user Flo
2025-07-12 10:44:54,589 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=12, topic_count=13
2025-07-12 10:44:54,589 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 10:44:54,590 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 10:44:54,590 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 10:44:54,590 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 10:44:54,590 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-12 10:44:54,591 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 10:44:54,592 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 10:44:58,985 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 10:44:58,986 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 10:44:58,986 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1063 characters
2025-07-12 10:44:58,986 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 10:44:58,987 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 10:44:58,987 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 10:44:58,987 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 10:44:58,987 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 10:44:58,987 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 10:44:58,988 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 10:44:58,988 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 10:44:58,988 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 10:44:58,993 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 10:55:10,925 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 10:55:10,926 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 10:55:10,926 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 10:55:10,936 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:55:10] "GET /api/me HTTP/1.1" 200 -
2025-07-12 10:55:10,938 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 10:55:10,938 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 10:55:10,939 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:55:10] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 10:55:11,463 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:55:11] "GET /api/role HTTP/1.1" 200 -
2025-07-12 10:55:11,474 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 10:55:11,474 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 10:55:11,475 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 10:55:11,477 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 10:55:11,477 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 10:55:11,477 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 10:55:11] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:04:31,480 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:04:31] "GET /api/me HTTP/1.1" 200 -
2025-07-12 11:04:31,482 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:04:31,494 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:04:31,495 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:04:31,499 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:04:31,500 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:04:31,501 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:04:31] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:04:31,813 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:04:31] "GET /api/role HTTP/1.1" 200 -
2025-07-12 11:04:31,825 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:04:31,825 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:04:31,825 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:04:31,829 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:04:31,830 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:04:31,830 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:04:31] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:37:58,056 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:37:58,058 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:37:58] "GET /api/me HTTP/1.1" 200 -
2025-07-12 11:37:58,058 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:37:58,062 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:37:58,066 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:37:58,067 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:37:58,067 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:37:58] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:37:58,771 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:37:58,773 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:37:58,774 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:37:58,777 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:37:58] "GET /api/role HTTP/1.1" 200 -
2025-07-12 11:37:58,780 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:37:58,780 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:37:58,781 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:37:58] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:38:03,950 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:03] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 11:38:06,260 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:38:06,263 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:38:06,263 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:38:06,265 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:38:06,265 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:38:06,266 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:06] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:38:07,170 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:38:07,184 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:38:07,187 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:38:07,229 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:38:07,229 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:38:07,240 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:07] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:38:08,229 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:08] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 11:38:10,583 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:38:22,405 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:22] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:38:23,024 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:38:23,035 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:23] "GET /api/weakness-lesson HTTP/1.1" 200 -
2025-07-12 11:38:35,816 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:35] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 11:38:44,704 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:38:44,705 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:38:44,705 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:38:44,706 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:38:44,706 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:38:44,707 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:44] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:38:45,285 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:38:45,285 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:38:45,285 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:38:45,286 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:38:45,286 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:38:45,287 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:45] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:38:46,423 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:46] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 11:38:53,939 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:53] "POST /api/login HTTP/1.1" 200 -
2025-07-12 11:38:54,355 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:54] "GET /api/me HTTP/1.1" 200 -
2025-07-12 11:38:54,932 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:54] "GET /api/role HTTP/1.1" 200 -
2025-07-12 11:38:55,516 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:38:55] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 11:40:22,288 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:40:22] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 11:40:24,242 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:40:24] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 11:40:24,246 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:40:24,591 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:40:24,597 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:40:24] "POST /api/level HTTP/1.1" 200 -
2025-07-12 11:40:24,827 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:40:25,411 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:40:25,415 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:40:25] "POST /api/level HTTP/1.1" 200 -
2025-07-12 11:40:28,230 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:40:28] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 11:40:40,943 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:40:40,945 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:40:40,945 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:40:40,947 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:40:40,947 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:40:40,952 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:40:40] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:40:41,525 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:40:41,525 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:40:41,525 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:40:41,526 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:40:41,526 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:40:41,527 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:40:41] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:44:16,114 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 11:44:16,477 - werkzeug - INFO -  * Restarting with stat
2025-07-12 11:44:17,682 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 11:44:17,697 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 11:44:30,642 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:44:30] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:44:44,519 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:44:45,092 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:44:45,854 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:44:45] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 11:44:47,273 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:44:47] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:44:47,845 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:44:47] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:46:15,074 - routes.ai.exercise_routes - INFO - Exercise submission request for user Flo, block training
2025-07-12 11:46:15,077 - routes.ai.exercise_routes - INFO - Received submission data for user Flo: {
  "answers": {
    "ex2": "Sie ist eine Lehrer.",
    "ex1": "Du",
    "ex3": "Wo"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "He is a teacher.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Du",
          "Er",
          "Sie"
        ],
        "question": "___ habe einen Hund. (I have a dog.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Wo",
          "Wer",
          "Was",
          "Wann"
        ],
        "question": "___ sind wir? (Where are we?)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "dog",
        "word": "Hund"
      },
      {
        "meaning": "teacher",
        "word": "Lehrer"
      },
      {
        "meaning": "where",
        "word": "Wo"
      }
    ]
  }
}
2025-07-12 11:46:15,077 - routes.ai.exercise_routes - INFO - Parsed submission for user Flo: 3 exercises, 3 answers
2025-07-12 11:46:15,077 - routes.ai.exercise_routes - INFO - Evaluating exercises for user Flo
2025-07-12 11:46:15,078 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-12 11:46:15,078 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-12 11:46:15,078 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-12 11:46:15,079 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-12 11:46:15,082 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:17,388 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:17,391 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-12 11:46:17,391 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 250 characters
2025-07-12 11:46:17,393 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-12 11:46:17,394 - routes.ai.exercise_routes - INFO - Evaluation successful for user Flo
2025-07-12 11:46:17,395 - routes.ai.exercise_routes - INFO - Summary for user Flo: {'correct': 1, 'total': 3, 'mistakes': [{'question': 'He is a teacher.', 'your_answer': 'Sie ist eine Lehrer.', 'correct_answer': 'Er ist ein Lehrer.'}, {'question': '___ habe einen Hund. (I have a dog.)', 'your_answer': 'Du', 'correct_answer': 'Ich'}]}
2025-07-12 11:46:17,395 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user Flo
2025-07-12 11:46:17,400 - routes.ai.exercise_routes - INFO - Got 12 vocab and 13 topic entries for user Flo
2025-07-12 11:46:17,401 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:19,214 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:19,216 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user Flo
2025-07-12 11:46:19,217 - routes.ai.exercise_routes - INFO - Saving exercise submission for user Flo
2025-07-12 11:46:19,217 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T11:46:19.217375",
  "event_type": "submission_start",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex2": "Sie ist eine Lehrer.",
      "ex1": "Du",
      "ex3": "Wo"
    }
  }
}
2025-07-12 11:46:19,219 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user Flo, block training
2025-07-12 11:46:19,220 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user Flo, block training, answers_count=3
2025-07-12 11:46:19,221 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user Flo
2025-07-12 11:46:19,219 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 11:46:19,222 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user Flo: correct=0, quality=2
2025-07-12 11:46:19,224 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 11:46:19,224 - routes.ai.exercise_routes - INFO - Exercise submission completed for user Flo, passed=False
2025-07-12 11:46:19,226 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:46:19,228 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:19,231 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:19,239 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user Flo
2025-07-12 11:46:19,239 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user Flo
2025-07-12 11:46:19,239 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 11:46:19,247 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:46:19,249 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user Flo
2025-07-12 11:46:19,249 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user Flo
2025-07-12 11:46:19,249 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=12, topic_count=13
2025-07-12 11:46:19,249 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 11:46:19,250 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 11:46:19,250 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 11:46:19,250 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 11:46:19,251 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-12 11:46:19,251 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 11:46:19,252 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:19,737 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:19,739 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:20,184 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:20,189 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'present tense', 'sentence structure']
2025-07-12 11:46:20,189 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=indefinite article, skill=translation
2025-07-12 11:46:20,198 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=noun, skill=translation
2025-07-12 11:46:20,203 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=translation
2025-07-12 11:46:20,211 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=present tense, skill=translation
2025-07-12 11:46:20,216 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=sentence structure, skill=translation
2025-07-12 11:46:20,222 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user Flo
2025-07-12 11:46:20,229 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:21,005 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:21,007 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:21,531 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:21,550 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:21,667 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:21,674 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:22,664 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:22,685 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:22,852 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:22,858 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:23,379 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:23,380 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:23,386 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:23,386 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 11:46:23,387 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1031 characters
2025-07-12 11:46:23,388 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 11:46:23,389 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 11:46:23,389 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 11:46:23,390 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 11:46:23,390 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 11:46:23,390 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 11:46:23,390 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 11:46:23,390 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 11:46:23,391 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 11:46:23,397 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 11:46:23,746 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:23,766 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:24,778 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:24,785 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:46:24] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-12 11:46:24,828 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:46:24,829 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=3
2025-07-12 11:46:24,829 - routes.ai.training_routes - INFO - User Flo has answers, checking cached next exercises
2025-07-12 11:46:24,833 - routes.ai.training_routes - INFO - Found cached next exercises for user Flo
2025-07-12 11:46:24,833 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user Flo
2025-07-12 11:46:24,833 - routes.ai.training_routes - INFO - Storing exercises for user Flo
2025-07-12 11:46:24,837 - routes.ai.training_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 11:46:24,839 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 11:46:24,839 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user Flo
2025-07-12 11:46:24,840 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:46:24,840 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:46:24] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:46:24,842 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user Flo
2025-07-12 11:46:24,842 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user Flo
2025-07-12 11:46:24,842 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 11:46:24,846 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:46:24,848 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user Flo
2025-07-12 11:46:24,848 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user Flo
2025-07-12 11:46:24,848 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=15, topic_count=16
2025-07-12 11:46:24,849 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 11:46:24,849 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 11:46:24,849 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 11:46:24,849 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 11:46:24,849 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-12 11:46:24,850 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 11:46:24,851 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:25,798 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:25,814 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:26,861 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:26,880 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:28,348 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:28,362 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user Flo: correct=0, quality=2
2025-07-12 11:46:28,364 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:28,732 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:28,734 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 11:46:28,735 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1009 characters
2025-07-12 11:46:28,735 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 11:46:28,736 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 11:46:28,736 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 11:46:28,736 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 11:46:28,736 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 11:46:28,737 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 11:46:28,737 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 11:46:28,737 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 11:46:28,737 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 11:46:28,745 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 11:46:28,980 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:28,984 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['definite article', 'indefinite article', 'personal pronoun', 'present tense', 'sentence structure']
2025-07-12 11:46:28,984 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=definite article, skill=gap-fill
2025-07-12 11:46:29,003 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=indefinite article, skill=gap-fill
2025-07-12 11:46:29,012 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=gap-fill
2025-07-12 11:46:29,020 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=present tense, skill=gap-fill
2025-07-12 11:46:29,036 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=sentence structure, skill=gap-fill
2025-07-12 11:46:29,044 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user Flo
2025-07-12 11:46:29,047 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:30,650 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:30,671 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:32,736 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:32,763 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:34,866 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:34,882 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:36,378 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:36,395 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:37,790 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:37,797 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user Flo: correct=1, quality=5
2025-07-12 11:46:37,798 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:38,365 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:38,368 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['adverb', 'interrogative sentence', 'pronoun', 'verb']
2025-07-12 11:46:38,368 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=adverb, skill=gap-fill
2025-07-12 11:46:38,376 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=interrogative sentence, skill=gap-fill
2025-07-12 11:46:38,380 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=pronoun, skill=gap-fill
2025-07-12 11:46:38,385 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=verb, skill=gap-fill
2025-07-12 11:46:38,390 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex3 for user Flo
2025-07-12 11:46:38,392 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:40,515 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:40,528 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:42,020 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:42,031 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:43,247 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:43,262 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:44,144 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:44,173 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user Flo: 14 results
2025-07-12 11:46:44,174 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user Flo
2025-07-12 11:46:44,178 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user Flo, block training
2025-07-12 11:46:44,182 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions
2025-07-12 11:46:44,183 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions, limit=20
2025-07-12 11:46:44,183 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:46:44,185 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user Flo
2025-07-12 11:46:44,185 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user Flo: 9 total questions
2025-07-12 11:46:44,190 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user Flo
2025-07-12 11:46:44,190 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user Flo
2025-07-12 11:46:44,190 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user Flo
2025-07-12 11:46:44,190 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 11:46:44,191 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:46:44,191 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T11:46:44.191546",
  "event_type": "submission_complete",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-12 11:46:44,193 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user Flo
2025-07-12 11:46:44,193 - routes.ai.helpers.exercise_helpers - INFO - Got 9 recent questions for user Flo
2025-07-12 11:46:44,193 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 11:46:44,200 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:46:44,200 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user Flo
2025-07-12 11:46:44,200 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 9 recent questions for user Flo
2025-07-12 11:46:44,200 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=18, topic_count=18
2025-07-12 11:46:44,201 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 11:46:44,201 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 11:46:44,201 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 11:46:44,201 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 11:46:44,201 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=9
2025-07-12 11:46:44,201 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 11:46:44,202 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:46:48,802 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:46:48,815 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 11:46:48,816 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1050 characters
2025-07-12 11:46:48,817 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 11:46:48,817 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 11:46:48,819 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 11:46:48,820 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 11:46:48,820 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 11:46:48,821 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 11:46:48,821 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 11:46:48,821 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 11:46:48,822 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 11:46:48,830 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 11:46:52,696 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:46:52] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:46:59,862 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:47:00,108 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:47:04,016 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:47:04] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 11:47:05,081 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:47:05] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:47:05,660 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:47:05] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:48:21,998 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 11:48:22,347 - werkzeug - INFO -  * Restarting with stat
2025-07-12 11:48:23,339 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 11:48:23,340 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 11:48:53,698 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:48:53] "GET /api/me HTTP/1.1" 200 -
2025-07-12 11:48:53,699 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:48:53,701 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:48:53,702 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:48:53,705 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:48:53,705 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:48:53,706 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:48:53] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:48:54,269 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:48:54] "GET /api/role HTTP/1.1" 200 -
2025-07-12 11:48:54,275 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:48:54,276 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:48:54,277 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:48:54,280 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:48:54,280 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:48:54,282 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:48:54] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:49:04,924 - routes.ai.exercise_routes - INFO - Exercise submission request for user Flo, block training
2025-07-12 11:49:04,925 - routes.ai.exercise_routes - INFO - Received submission data for user Flo: {
  "answers": {
    "ex1": "Du",
    "ex3": "ein",
    "ex2": "Sie sein eine Lehrer."
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Du",
          "Er",
          "Sie"
        ],
        "question": "___ habe ein Buch. (I have a book.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "ein",
          "eine",
          "einen",
          "einer"
        ],
        "question": "Das ist ___ Hund. (That is a dog.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "He is a teacher.",
        "type": "translation"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "book",
        "word": "Buch"
      },
      {
        "meaning": "teacher",
        "word": "Lehrer"
      },
      {
        "meaning": "dog",
        "word": "Hund"
      }
    ]
  }
}
2025-07-12 11:49:04,926 - routes.ai.exercise_routes - INFO - Parsed submission for user Flo: 3 exercises, 3 answers
2025-07-12 11:49:04,926 - routes.ai.exercise_routes - INFO - Evaluating exercises for user Flo
2025-07-12 11:49:04,926 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-12 11:49:04,927 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-12 11:49:04,927 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-12 11:49:04,927 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-12 11:49:04,944 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:06,127 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:06,130 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-12 11:49:06,130 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 251 characters
2025-07-12 11:49:06,131 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-12 11:49:06,132 - routes.ai.exercise_routes - INFO - Evaluation successful for user Flo
2025-07-12 11:49:06,133 - routes.ai.exercise_routes - INFO - Summary for user Flo: {'correct': 1, 'total': 3, 'mistakes': [{'question': '___ habe ein Buch. (I have a book.)', 'your_answer': 'Du', 'correct_answer': 'Ich'}, {'question': 'He is a teacher.', 'your_answer': 'Sie sein eine Lehrer.', 'correct_answer': 'Er ist ein Lehrer.'}]}
2025-07-12 11:49:06,133 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user Flo
2025-07-12 11:49:06,137 - routes.ai.exercise_routes - INFO - Got 18 vocab and 18 topic entries for user Flo
2025-07-12 11:49:06,138 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:07,975 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:07,978 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user Flo
2025-07-12 11:49:07,978 - routes.ai.exercise_routes - INFO - Saving exercise submission for user Flo
2025-07-12 11:49:07,978 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T11:49:07.978817",
  "event_type": "submission_start",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "Du",
      "ex3": "ein",
      "ex2": "Sie sein eine Lehrer."
    }
  }
}
2025-07-12 11:49:07,980 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user Flo, block training
2025-07-12 11:49:07,980 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 11:49:07,980 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user Flo, block training, answers_count=3
2025-07-12 11:49:07,984 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 11:49:07,984 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user Flo
2025-07-12 11:49:07,985 - routes.ai.exercise_routes - INFO - Exercise submission completed for user Flo, passed=False
2025-07-12 11:49:07,986 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:49:07,986 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user Flo: correct=0, quality=2
2025-07-12 11:49:07,988 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:07,989 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:07,992 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user Flo
2025-07-12 11:49:07,993 - routes.ai.helpers.exercise_helpers - INFO - Got 9 recent questions for user Flo
2025-07-12 11:49:07,993 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 11:49:07,998 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:49:08,000 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user Flo
2025-07-12 11:49:08,000 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 9 recent questions for user Flo
2025-07-12 11:49:08,000 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=18, topic_count=18
2025-07-12 11:49:08,000 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 11:49:08,000 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 11:49:08,000 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 11:49:08,001 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 11:49:08,001 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=9
2025-07-12 11:49:08,001 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 11:49:08,003 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:08,818 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:08,818 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:08,822 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:08,825 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['definite article', 'indefinite article', 'personal pronoun', 'present tense', 'verb conjugation']
2025-07-12 11:49:08,825 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=definite article, skill=gap-fill
2025-07-12 11:49:08,840 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=indefinite article, skill=gap-fill
2025-07-12 11:49:08,850 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=gap-fill
2025-07-12 11:49:08,857 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=present tense, skill=gap-fill
2025-07-12 11:49:08,864 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=verb conjugation, skill=gap-fill
2025-07-12 11:49:08,869 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user Flo
2025-07-12 11:49:08,871 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:09,844 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:09,847 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:10,458 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:10,463 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:11,176 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:11,212 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:11,695 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:11,704 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 11:49:11,706 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1035 characters
2025-07-12 11:49:11,707 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 11:49:11,707 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 11:49:11,708 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 11:49:11,708 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 11:49:11,708 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 11:49:11,709 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 11:49:11,709 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 11:49:11,709 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 11:49:11,709 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 11:49:11,719 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 11:49:12,707 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:12,713 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:12,930 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:12,942 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:13,134 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:13,140 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:14,341 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:14,356 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:14,505 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:14,511 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:49:14] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-12 11:49:14,551 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:49:14,552 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=3
2025-07-12 11:49:14,552 - routes.ai.training_routes - INFO - User Flo has answers, checking cached next exercises
2025-07-12 11:49:14,553 - routes.ai.training_routes - INFO - Found cached next exercises for user Flo
2025-07-12 11:49:14,554 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user Flo
2025-07-12 11:49:14,554 - routes.ai.training_routes - INFO - Storing exercises for user Flo
2025-07-12 11:49:14,574 - routes.ai.training_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 11:49:14,575 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 11:49:14,575 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user Flo
2025-07-12 11:49:14,575 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:49:14,576 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:49:14] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:49:14,579 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user Flo
2025-07-12 11:49:14,579 - routes.ai.helpers.exercise_helpers - INFO - Got 9 recent questions for user Flo
2025-07-12 11:49:14,579 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 11:49:14,583 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:49:14,585 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user Flo
2025-07-12 11:49:14,585 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 9 recent questions for user Flo
2025-07-12 11:49:14,585 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=19, topic_count=19
2025-07-12 11:49:14,585 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 11:49:14,586 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 11:49:14,587 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 11:49:14,587 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 11:49:14,587 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=9
2025-07-12 11:49:14,587 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 11:49:14,588 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:16,187 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:16,198 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:16,873 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:49:16] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:49:17,272 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:17,284 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user Flo: correct=1, quality=5
2025-07-12 11:49:17,285 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:17,932 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:17,935 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 11:49:17,936 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1114 characters
2025-07-12 11:49:17,936 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 11:49:17,936 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 11:49:17,937 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 11:49:17,937 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 11:49:17,937 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 11:49:17,937 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 11:49:17,937 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 11:49:17,938 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 11:49:17,938 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 11:49:17,944 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 11:49:18,555 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:18,560 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['definite article', 'indefinite article', 'nominative case', 'sentence structure']
2025-07-12 11:49:18,560 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=definite article, skill=gap-fill
2025-07-12 11:49:18,571 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=indefinite article, skill=gap-fill
2025-07-12 11:49:18,579 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=nominative case, skill=gap-fill
2025-07-12 11:49:18,587 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=sentence structure, skill=gap-fill
2025-07-12 11:49:18,593 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex3 for user Flo
2025-07-12 11:49:18,597 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:21,410 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:21,431 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:21,767 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:22,077 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:23,203 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:23,232 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:24,159 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:24,169 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:25,639 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:25,644 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user Flo: correct=0, quality=2
2025-07-12 11:49:25,644 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:25,766 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:49:25] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 11:49:25,807 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:49:25] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:49:26,324 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:26,326 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['indefinite article', 'noun', 'personal pronoun', 'present tense', 'sentence structure']
2025-07-12 11:49:26,326 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=indefinite article, skill=translation
2025-07-12 11:49:26,335 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=noun, skill=translation
2025-07-12 11:49:26,339 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=translation
2025-07-12 11:49:26,343 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=present tense, skill=translation
2025-07-12 11:49:26,350 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=sentence structure, skill=translation
2025-07-12 11:49:26,354 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user Flo
2025-07-12 11:49:26,356 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:26,387 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:49:26] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:49:27,452 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:27,471 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:28,685 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:28,698 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:29,909 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:29,919 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user Flo: 14 results
2025-07-12 11:49:29,919 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user Flo
2025-07-12 11:49:29,922 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user Flo, block training
2025-07-12 11:49:29,928 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions
2025-07-12 11:49:29,928 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions, limit=20
2025-07-12 11:49:29,928 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:49:29,930 - routes.ai.helpers.exercise_helpers - INFO - Found 9 recent questions for user Flo
2025-07-12 11:49:29,930 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user Flo: 12 total questions
2025-07-12 11:49:29,940 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user Flo
2025-07-12 11:49:29,941 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user Flo
2025-07-12 11:49:29,941 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user Flo
2025-07-12 11:49:29,941 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 11:49:29,941 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:49:29,942 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T11:49:29.942015",
  "event_type": "submission_complete",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-12 11:49:29,944 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user Flo
2025-07-12 11:49:29,944 - routes.ai.helpers.exercise_helpers - INFO - Got 12 recent questions for user Flo
2025-07-12 11:49:29,944 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 11:49:29,947 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:49:29,949 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user Flo
2025-07-12 11:49:29,949 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 12 recent questions for user Flo
2025-07-12 11:49:29,949 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=20, topic_count=15
2025-07-12 11:49:29,950 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 11:49:29,950 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 11:49:29,950 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 11:49:29,950 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 11:49:29,951 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=12
2025-07-12 11:49:29,956 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 11:49:29,957 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:49:34,521 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:49:34,523 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 11:49:34,523 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1045 characters
2025-07-12 11:49:34,524 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 11:49:34,524 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 11:49:34,525 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 11:49:34,525 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 11:49:34,525 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 11:49:34,525 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 11:49:34,525 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 11:49:34,525 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 11:49:34,526 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 11:49:34,530 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 11:50:50,020 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 11:50:50,234 - werkzeug - INFO -  * Restarting with stat
2025-07-12 11:50:51,283 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 11:50:51,283 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 11:51:11,151 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:51:11] "GET /api/me HTTP/1.1" 200 -
2025-07-12 11:51:11,156 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:51:11,157 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:51:11,157 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:51:11,159 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:51:11,159 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:51:11,160 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:51:11] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:51:11,713 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:51:11] "GET /api/role HTTP/1.1" 200 -
2025-07-12 11:51:11,738 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:51:11,738 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:51:11,738 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:51:11,740 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:51:11,740 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:51:11,741 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:51:11] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:51:26,269 - routes.ai.exercise_routes - INFO - Exercise submission request for user Flo, block training
2025-07-12 11:51:26,271 - routes.ai.exercise_routes - INFO - Received submission data for user Flo: {
  "answers": {
    "ex3": "Sie",
    "ex1": "Du",
    "ex2": "Wir sein im Supermarkt."
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "We are in the supermarket.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Er",
          "Sie",
          "Es",
          "Wir"
        ],
        "question": "___ ist mein Freund. (He is my friend.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Du",
          "Er",
          "Sie"
        ],
        "question": "___ habe eine Katze. (I have a cat.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "cat",
        "word": "Katze"
      },
      {
        "meaning": "supermarket",
        "word": "Supermarkt"
      },
      {
        "meaning": "friend",
        "word": "Freund"
      }
    ]
  }
}
2025-07-12 11:51:26,271 - routes.ai.exercise_routes - INFO - Parsed submission for user Flo: 3 exercises, 3 answers
2025-07-12 11:51:26,271 - routes.ai.exercise_routes - INFO - Evaluating exercises for user Flo
2025-07-12 11:51:26,271 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-12 11:51:26,271 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-12 11:51:26,272 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-12 11:51:26,273 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-12 11:51:26,282 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:27,366 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:27,368 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-12 11:51:27,369 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 255 characters
2025-07-12 11:51:27,369 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-12 11:51:27,370 - routes.ai.exercise_routes - INFO - Evaluation successful for user Flo
2025-07-12 11:51:27,370 - routes.ai.exercise_routes - INFO - Summary for user Flo: {'correct': 0, 'total': 3, 'mistakes': [{'question': 'We are in the supermarket.', 'your_answer': 'Wir sein im Supermarkt.', 'correct_answer': 'Wir sind im Supermarkt.'}, {'question': '___ ist mein Freund. (He is my friend.)', 'your_answer': 'Sie', 'correct_answer': 'Er'}, {'question': '___ habe eine Katze. (I have a cat.)', 'your_answer': 'Du', 'correct_answer': 'Ich'}]}
2025-07-12 11:51:27,370 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user Flo
2025-07-12 11:51:27,375 - routes.ai.exercise_routes - INFO - Got 20 vocab and 15 topic entries for user Flo
2025-07-12 11:51:27,376 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:29,924 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:29,929 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user Flo
2025-07-12 11:51:29,929 - routes.ai.exercise_routes - INFO - Saving exercise submission for user Flo
2025-07-12 11:51:29,930 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T11:51:29.930166",
  "event_type": "submission_start",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "Sie",
      "ex1": "Du",
      "ex2": "Wir sein im Supermarkt."
    }
  }
}
2025-07-12 11:51:29,933 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user Flo, block training
2025-07-12 11:51:29,934 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 11:51:29,934 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user Flo, block training, answers_count=3
2025-07-12 11:51:29,934 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 11:51:29,934 - routes.ai.exercise_routes - INFO - Exercise submission completed for user Flo, passed=False
2025-07-12 11:51:29,934 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user Flo
2025-07-12 11:51:29,935 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:51:29,935 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user Flo: correct=0, quality=2
2025-07-12 11:51:29,937 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:29,938 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:29,940 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user Flo
2025-07-12 11:51:29,940 - routes.ai.helpers.exercise_helpers - INFO - Got 12 recent questions for user Flo
2025-07-12 11:51:29,940 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 11:51:29,945 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:51:29,948 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user Flo
2025-07-12 11:51:29,948 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 12 recent questions for user Flo
2025-07-12 11:51:29,949 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=20, topic_count=15
2025-07-12 11:51:29,949 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 11:51:29,949 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 11:51:29,949 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 11:51:29,950 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 11:51:29,950 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=12
2025-07-12 11:51:29,950 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 11:51:29,950 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:30,439 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:30,441 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:30,949 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:30,951 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['definite article', 'nominative case', 'personal pronoun']
2025-07-12 11:51:30,952 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=definite article, skill=gap-fill
2025-07-12 11:51:30,965 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=nominative case, skill=gap-fill
2025-07-12 11:51:30,976 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=gap-fill
2025-07-12 11:51:30,985 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 8 words from exercise ex3 for user Flo
2025-07-12 11:51:30,988 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:31,564 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:31,569 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:32,428 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:32,438 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:32,600 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:32,617 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:34,021 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:34,022 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:34,028 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:34,038 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:34,533 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:34,535 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 11:51:34,535 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1054 characters
2025-07-12 11:51:34,536 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 11:51:34,536 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 11:51:34,537 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 11:51:34,539 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 11:51:34,541 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 11:51:34,542 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 11:51:34,542 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 11:51:34,542 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 11:51:34,542 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 11:51:34,549 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 11:51:35,864 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:35,879 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:37,644 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:37,657 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:38,218 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:38,221 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:39,039 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:39,061 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:40,262 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:40,268 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:51:40] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-12 11:51:40,304 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:51:40,304 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=3
2025-07-12 11:51:40,305 - routes.ai.training_routes - INFO - User Flo has answers, checking cached next exercises
2025-07-12 11:51:40,309 - routes.ai.training_routes - INFO - Found cached next exercises for user Flo
2025-07-12 11:51:40,310 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user Flo
2025-07-12 11:51:40,310 - routes.ai.training_routes - INFO - Storing exercises for user Flo
2025-07-12 11:51:40,316 - routes.ai.training_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 11:51:40,317 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 11:51:40,317 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user Flo
2025-07-12 11:51:40,318 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:51:40,319 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:51:40] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:51:40,322 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user Flo
2025-07-12 11:51:40,322 - routes.ai.helpers.exercise_helpers - INFO - Got 12 recent questions for user Flo
2025-07-12 11:51:40,322 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 11:51:40,326 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:51:40,328 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user Flo
2025-07-12 11:51:40,328 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 12 recent questions for user Flo
2025-07-12 11:51:40,328 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=22, topic_count=17
2025-07-12 11:51:40,328 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 11:51:40,328 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 11:51:40,328 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 11:51:40,328 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 11:51:40,329 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=12
2025-07-12 11:51:40,329 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 11:51:40,329 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:42,011 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:42,034 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:43,828 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:43,837 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user Flo: correct=0, quality=2
2025-07-12 11:51:43,838 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:44,519 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:44,522 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['definite article', 'indefinite article', 'personal pronoun', 'present tense']
2025-07-12 11:51:44,522 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=definite article, skill=gap-fill
2025-07-12 11:51:44,538 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=indefinite article, skill=gap-fill
2025-07-12 11:51:44,576 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=gap-fill
2025-07-12 11:51:44,586 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=present tense, skill=gap-fill
2025-07-12 11:51:44,593 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user Flo
2025-07-12 11:51:44,602 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:44,778 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:44,780 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 11:51:44,780 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1078 characters
2025-07-12 11:51:44,781 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 11:51:44,781 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 11:51:44,782 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 11:51:44,782 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 11:51:44,783 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 11:51:44,783 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 11:51:44,784 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 11:51:44,785 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 11:51:44,785 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 11:51:44,796 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 11:51:46,067 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:46,088 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:47,222 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:47,238 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:48,869 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:48,888 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:50,355 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:51:50] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:51:51,310 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:51,320 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user Flo: correct=0, quality=2
2025-07-12 11:51:51,320 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:52,356 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:52,360 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['definite article', 'noun', 'personal pronoun', 'verb conjugation (sein)']
2025-07-12 11:51:52,360 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=definite article, skill=translation
2025-07-12 11:51:52,368 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=noun, skill=translation
2025-07-12 11:51:52,373 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=translation
2025-07-12 11:51:52,379 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=verb conjugation (sein), skill=translation
2025-07-12 11:51:52,390 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 9 words from exercise ex2 for user Flo
2025-07-12 11:51:52,392 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:53,683 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:53,696 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:55,574 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:55,593 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:56,651 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:56,673 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:51:58,612 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:51:58,624 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:52:00,184 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:52:00,195 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:52:01,569 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:52:01,582 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user Flo: 11 results
2025-07-12 11:52:01,582 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user Flo
2025-07-12 11:52:01,586 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user Flo, block training
2025-07-12 11:52:01,591 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions
2025-07-12 11:52:01,591 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions, limit=20
2025-07-12 11:52:01,591 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:52:01,594 - routes.ai.helpers.exercise_helpers - INFO - Found 12 recent questions for user Flo
2025-07-12 11:52:01,594 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user Flo: 15 total questions
2025-07-12 11:52:01,600 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user Flo
2025-07-12 11:52:01,600 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user Flo
2025-07-12 11:52:01,600 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user Flo
2025-07-12 11:52:01,600 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 11:52:01,602 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:52:01,602 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T11:52:01.602519",
  "event_type": "submission_complete",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-12 11:52:01,605 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user Flo
2025-07-12 11:52:01,605 - routes.ai.helpers.exercise_helpers - INFO - Got 15 recent questions for user Flo
2025-07-12 11:52:01,605 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 11:52:01,608 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:52:01,609 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user Flo
2025-07-12 11:52:01,610 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 15 recent questions for user Flo
2025-07-12 11:52:01,610 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=19
2025-07-12 11:52:01,610 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 11:52:01,610 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 11:52:01,610 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 11:52:01,611 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 11:52:01,611 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=15
2025-07-12 11:52:01,611 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 11:52:01,612 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:52:05,430 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:52:05,441 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 11:52:05,443 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1062 characters
2025-07-12 11:52:05,445 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 11:52:05,445 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 11:52:05,448 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 11:52:05,449 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 11:52:05,449 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 11:52:05,450 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 11:52:05,450 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 11:52:05,451 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 11:52:05,451 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 11:52:05,459 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 11:52:22,683 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:52:23,158 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:52:24,692 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:52:24] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 11:52:31,309 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:52:31] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:52:31,895 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:52:31] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:52:52,725 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:52:52,961 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:52:54,236 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:52:54] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 11:52:56,094 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:52:56] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:52:56,657 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:52:56] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:53:54,975 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 11:53:55,235 - werkzeug - INFO -  * Restarting with stat
2025-07-12 11:53:56,207 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 11:53:56,209 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 11:54:53,159 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:54:56,335 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:54:56,341 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:54:56] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 11:54:56,379 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:54:56] "[31m[1mPOST /api/mistral-chat-history HTTP/1.1[0m" 400 -
2025-07-12 11:56:35,248 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/helpers/misc_helpers.py', reloading
2025-07-12 11:56:35,529 - werkzeug - INFO -  * Restarting with stat
2025-07-12 11:56:36,527 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 11:56:36,529 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 11:56:52,323 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:56:52,325 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:56:52] "GET /api/me HTTP/1.1" 200 -
2025-07-12 11:56:52,326 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:56:52,328 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:56:52,332 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:56:52,333 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:56:52,333 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:56:52] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:56:52,858 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:56:52] "GET /api/role HTTP/1.1" 200 -
2025-07-12 11:56:52,883 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:56:52,884 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 11:56:52,884 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 11:56:52,886 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 11:56:52,887 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 11:56:52,891 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:56:52] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:57:04,575 - routes.ai.exercise_routes - INFO - Exercise submission request for user Flo, block training
2025-07-12 11:57:04,576 - routes.ai.exercise_routes - INFO - Received submission data for user Flo: {
  "answers": {
    "ex1": "Du",
    "ex2": "she is an engineer.",
    "ex3": "ein"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is an engineer.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "Ich",
          "Du",
          "Er",
          "Sie"
        ],
        "question": "___ habe eine Katze. (I have a cat.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "ein",
          "eine",
          "einen",
          "einer"
        ],
        "question": "Das ist ___ Apfel. (That is an apple.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "cat",
        "word": "Katze"
      },
      {
        "meaning": "engineer (female)",
        "word": "Ingenieurin"
      },
      {
        "meaning": "apple",
        "word": "Apfel"
      }
    ]
  }
}
2025-07-12 11:57:04,576 - routes.ai.exercise_routes - INFO - Parsed submission for user Flo: 3 exercises, 3 answers
2025-07-12 11:57:04,576 - routes.ai.exercise_routes - INFO - Evaluating exercises for user Flo
2025-07-12 11:57:04,576 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-12 11:57:04,577 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-12 11:57:04,577 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-12 11:57:04,577 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-12 11:57:04,589 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:05,908 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:05,910 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-12 11:57:05,911 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 258 characters
2025-07-12 11:57:05,911 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-12 11:57:05,914 - routes.ai.exercise_routes - INFO - Evaluation successful for user Flo
2025-07-12 11:57:05,914 - routes.ai.exercise_routes - INFO - Summary for user Flo: {'correct': 1, 'total': 3, 'mistakes': [{'question': 'She is an engineer.', 'your_answer': 'she is an engineer.', 'correct_answer': 'Sie ist eine Ingenieurin.'}, {'question': '___ habe eine Katze. (I have a cat.)', 'your_answer': 'Du', 'correct_answer': 'Ich'}]}
2025-07-12 11:57:05,915 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user Flo
2025-07-12 11:57:05,922 - routes.ai.exercise_routes - INFO - Got 26 vocab and 19 topic entries for user Flo
2025-07-12 11:57:05,923 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:07,632 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:07,634 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user Flo
2025-07-12 11:57:07,635 - routes.ai.exercise_routes - INFO - Saving exercise submission for user Flo
2025-07-12 11:57:07,635 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T11:57:07.635577",
  "event_type": "submission_start",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex1": "Du",
      "ex2": "she is an engineer.",
      "ex3": "ein"
    }
  }
}
2025-07-12 11:57:07,637 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user Flo, block training
2025-07-12 11:57:07,637 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 11:57:07,637 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user Flo, block training, answers_count=3
2025-07-12 11:57:07,639 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user Flo
2025-07-12 11:57:07,639 - routes.ai.exercise_routes - INFO - Exercise submission completed for user Flo, passed=False
2025-07-12 11:57:07,638 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 11:57:07,641 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user Flo: correct=0, quality=2
2025-07-12 11:57:07,643 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:07,643 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:57:07,644 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:07,648 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user Flo
2025-07-12 11:57:07,648 - routes.ai.helpers.exercise_helpers - INFO - Got 15 recent questions for user Flo
2025-07-12 11:57:07,648 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 11:57:07,653 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:57:07,655 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user Flo
2025-07-12 11:57:07,655 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 15 recent questions for user Flo
2025-07-12 11:57:07,655 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=19
2025-07-12 11:57:07,655 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 11:57:07,655 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 11:57:07,656 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 11:57:07,656 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 11:57:07,656 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=15
2025-07-12 11:57:07,656 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 11:57:07,657 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:08,150 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:08,154 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:08,387 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:08,389 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['capitalization', 'definite and indefinite articles', 'personal pronoun', "present tense of 'haben'", 'sentence structure']
2025-07-12 11:57:08,390 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=capitalization, skill=gap-fill
2025-07-12 11:57:08,406 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=definite and indefinite articles, skill=gap-fill
2025-07-12 11:57:08,415 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=gap-fill
2025-07-12 11:57:08,423 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=present tense of 'haben', skill=gap-fill
2025-07-12 11:57:08,433 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=sentence structure, skill=gap-fill
2025-07-12 11:57:08,440 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user Flo
2025-07-12 11:57:08,444 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:09,867 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:09,868 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:09,870 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:09,879 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:10,664 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:10,670 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:11,427 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:11,431 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 11:57:11,431 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1077 characters
2025-07-12 11:57:11,432 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 11:57:11,434 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 11:57:11,435 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 11:57:11,435 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 11:57:11,436 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 11:57:11,436 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 11:57:11,436 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 11:57:11,436 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 11:57:11,436 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 11:57:11,441 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 11:57:11,633 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:11,644 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:12,162 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:12,167 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:13,863 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:13,874 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:14,705 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:14,708 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:14,765 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:14,780 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user Flo: correct=0, quality=2
2025-07-12 11:57:14,781 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:15,628 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:15,629 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:15,637 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:57:15] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-12 11:57:15,638 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['definite article', 'gender-specific noun', 'indefinite article', 'noun', 'personal pronoun', 'present tense', 'profession']
2025-07-12 11:57:15,641 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=definite article, skill=translation
2025-07-12 11:57:15,650 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=gender-specific noun, skill=translation
2025-07-12 11:57:15,668 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=indefinite article, skill=translation
2025-07-12 11:57:15,703 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=noun, skill=translation
2025-07-12 11:57:15,712 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 11:57:15,712 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=3
2025-07-12 11:57:15,712 - routes.ai.training_routes - INFO - User Flo has answers, checking cached next exercises
2025-07-12 11:57:15,716 - routes.ai.training_routes - INFO - Found cached next exercises for user Flo
2025-07-12 11:57:15,717 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user Flo
2025-07-12 11:57:15,717 - routes.ai.training_routes - INFO - Storing exercises for user Flo
2025-07-12 11:57:15,718 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=translation
2025-07-12 11:57:15,724 - routes.ai.training_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 11:57:15,726 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 11:57:15,726 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user Flo
2025-07-12 11:57:15,728 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:57:15,729 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:57:15] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 11:57:15,740 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=present tense, skill=translation
2025-07-12 11:57:15,741 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user Flo
2025-07-12 11:57:15,741 - routes.ai.helpers.exercise_helpers - INFO - Got 15 recent questions for user Flo
2025-07-12 11:57:15,741 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 11:57:15,766 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=profession, skill=translation
2025-07-12 11:57:15,766 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:57:15,768 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user Flo
2025-07-12 11:57:15,768 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 15 recent questions for user Flo
2025-07-12 11:57:15,770 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=26, topic_count=24
2025-07-12 11:57:15,772 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 11:57:15,772 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 11:57:15,772 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 11:57:15,773 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 11:57:15,773 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=15
2025-07-12 11:57:15,774 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 11:57:15,778 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:15,919 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user Flo
2025-07-12 11:57:16,024 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:17,517 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:17,544 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:17,783 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:57:17] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 11:57:19,435 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:19,440 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 11:57:19,441 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1024 characters
2025-07-12 11:57:19,441 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 11:57:19,442 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 11:57:19,443 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 11:57:19,443 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 11:57:19,443 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 11:57:19,444 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 11:57:19,444 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 11:57:19,444 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 11:57:19,444 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 11:57:19,449 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 11:57:19,719 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:19,738 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:21,668 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:21,688 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:22,870 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:22,888 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:25,077 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:25,086 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user Flo: correct=1, quality=5
2025-07-12 11:57:25,087 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:25,832 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:25,836 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['gender of nouns', 'indefinite article', 'nominative case']
2025-07-12 11:57:25,837 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=gender of nouns, skill=gap-fill
2025-07-12 11:57:25,847 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=indefinite article, skill=gap-fill
2025-07-12 11:57:25,855 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=nominative case, skill=gap-fill
2025-07-12 11:57:25,860 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex3 for user Flo
2025-07-12 11:57:25,873 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:27,785 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:27,798 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:29,363 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:29,389 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user Flo: 15 results
2025-07-12 11:57:29,389 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user Flo
2025-07-12 11:57:29,392 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user Flo, block training
2025-07-12 11:57:29,397 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions
2025-07-12 11:57:29,397 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions, limit=20
2025-07-12 11:57:29,398 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:57:29,399 - routes.ai.helpers.exercise_helpers - INFO - Found 15 recent questions for user Flo
2025-07-12 11:57:29,400 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user Flo: 18 total questions
2025-07-12 11:57:29,405 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user Flo
2025-07-12 11:57:29,405 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user Flo
2025-07-12 11:57:29,405 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user Flo
2025-07-12 11:57:29,406 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 11:57:29,408 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:57:29,409 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T11:57:29.408930",
  "event_type": "submission_complete",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-12 11:57:29,414 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user Flo
2025-07-12 11:57:29,415 - routes.ai.helpers.exercise_helpers - INFO - Got 18 recent questions for user Flo
2025-07-12 11:57:29,415 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 11:57:29,426 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 11:57:29,427 - routes.ai.helpers.exercise_helpers - INFO - Found 18 recent questions for user Flo
2025-07-12 11:57:29,427 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 18 recent questions for user Flo
2025-07-12 11:57:29,427 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=28, topic_count=22
2025-07-12 11:57:29,427 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 11:57:29,427 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 11:57:29,428 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 11:57:29,428 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 11:57:29,428 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=18
2025-07-12 11:57:29,428 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 11:57:29,429 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:33,859 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:33,864 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 11:57:33,864 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1229 characters
2025-07-12 11:57:33,864 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 11:57:33,865 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 11:57:33,866 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 11:57:33,866 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 11:57:33,866 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 11:57:33,866 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 11:57:33,866 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 11:57:33,866 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 11:57:33,867 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 11:57:33,872 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 11:57:44,613 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 11:57:47,378 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 11:57:47,384 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:57:47] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 11:57:47,421 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 11:57:47] "[31m[1mPOST /api/mistral-chat-history HTTP/1.1[0m" 400 -
2025-07-12 11:59:16,959 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 11:59:17,243 - werkzeug - INFO -  * Restarting with stat
2025-07-12 11:59:18,628 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 11:59:18,630 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 11:59:19,683 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 11:59:19,885 - werkzeug - INFO -  * Restarting with stat
2025-07-12 11:59:20,844 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 11:59:20,844 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 12:00:06,989 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:00:10,030 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:00:10,035 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:00:10] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 12:00:10,055 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:00:10] "[31m[1mPOST /api/mistral-chat-history HTTP/1.1[0m" 400 -
2025-07-12 12:00:28,495 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:00:28] "GET /api/me HTTP/1.1" 200 -
2025-07-12 12:00:29,057 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:00:29] "GET /api/role HTTP/1.1" 200 -
2025-07-12 12:00:29,634 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:00:29] "GET /api/profile HTTP/1.1" 200 -
2025-07-12 12:00:32,586 - app - INFO - User Flo requesting account deactivation
2025-07-12 12:00:32,591 - app - INFO - Deleted 1 records from ai_user_data for user Flo
2025-07-12 12:00:32,593 - app - INFO - Deleted 28 records from vocab_log for user Flo
2025-07-12 12:00:32,594 - app - INFO - Deleted 29 records from topic_memory for user Flo
2025-07-12 12:00:32,594 - app - INFO - Deleted 0 records from results for user Flo
2025-07-12 12:00:32,595 - app - INFO - Deleted 5 records from exercise_submissions for user Flo
2025-07-12 12:00:32,595 - app - INFO - Deleted 0 records from lesson_progress for user Flo
2025-07-12 12:00:32,595 - app - INFO - Deleted 1 records from users for user Flo
2025-07-12 12:00:32,601 - app - INFO - Destroyed all sessions for user Flo
2025-07-12 12:00:32,601 - app - INFO - Account deactivation completed for user Flo. Deleted: AI data=1, vocab=28, topic_memory=29, results=0, exercise_submissions=5, lesson_progress=0, user=1
2025-07-12 12:00:32,602 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:00:32] "POST /api/settings/deactivate HTTP/1.1" 200 -
2025-07-12 12:00:43,351 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:00:43] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 12:00:43,920 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:00:43] "POST /api/login HTTP/1.1" 200 -
2025-07-12 12:00:44,400 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:00:44] "GET /api/me HTTP/1.1" 200 -
2025-07-12 12:00:44,974 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:00:44] "GET /api/role HTTP/1.1" 200 -
2025-07-12 12:00:48,904 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:00:48] "POST /api/user-level HTTP/1.1" 200 -
2025-07-12 12:00:49,492 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:00:49] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 12:00:54,945 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 12:00:54,948 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 12:00:54,948 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 12:00:54,952 - routes.ai.training_routes - INFO - Generating new training exercises for user Flo
2025-07-12 12:00:54,952 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_training_exercises for user Flo
2025-07-12 12:00:54,952 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 12:00:54,954 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user Flo
2025-07-12 12:00:54,954 - routes.ai.helpers.exercise_helpers - INFO - Detected new user Flo, generating two unique blocks with different contexts
2025-07-12 12:00:54,955 - routes.ai.helpers.exercise_helpers - INFO - Generating blocks for new user Flo
2025-07-12 12:00:54,955 - routes.ai.helpers.exercise_helpers - INFO - Generating first block for new user Flo
2025-07-12 12:00:54,959 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 12:00:54,961 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user Flo
2025-07-12 12:00:54,962 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 0 recent questions for user Flo
2025-07-12 12:00:54,962 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 12:00:54,962 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 12:00:54,963 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 12:00:54,963 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 12:00:54,963 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 12:00:54,963 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=0
2025-07-12 12:00:54,964 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 12:00:54,968 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:00:59,251 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:00:59,254 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 12:00:59,255 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1095 characters
2025-07-12 12:00:59,256 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 12:00:59,257 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 12:00:59,259 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 12:00:59,260 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 12:00:59,260 - routes.ai.helpers.exercise_helpers - INFO - Generated first block for new user Flo with 3 exercises
2025-07-12 12:00:59,261 - routes.ai.helpers.exercise_helpers - INFO - Extracted 3 questions from first block for new user Flo
2025-07-12 12:00:59,261 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions, limit=20
2025-07-12 12:00:59,262 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 12:00:59,264 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user Flo
2025-07-12 12:00:59,264 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user Flo: 3 total questions
2025-07-12 12:00:59,272 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user Flo
2025-07-12 12:00:59,272 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user Flo
2025-07-12 12:00:59,274 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for Flo after after updating exercise history: {
  "username": "Flo",
  "exercises": null,
  "next_exercises": null,
  "exercises_updated_at": null,
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Wir ____ im Park. (We are in the park.)\", \"Ich ____ einen Hund. (I have a dog.)\", \"She is happy.\"]"
}
2025-07-12 12:00:59,378 - routes.ai.helpers.exercise_helpers - INFO - Generating second block for new user Flo with different context
2025-07-12 12:00:59,379 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block with variation for new user Flo with 3 exclude questions
2025-07-12 12:00:59,386 - routes.ai.helpers.exercise_helpers - INFO - Using 3 exclude questions as recent questions for variation
2025-07-12 12:00:59,386 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 12:00:59,386 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 12:00:59,387 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 12:00:59,387 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 12:00:59,388 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 12:00:59,388 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 12:00:59,389 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 12:00:59,390 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:05,018 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:05,022 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 12:01:05,022 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1035 characters
2025-07-12 12:01:05,022 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 12:01:05,023 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 12:01:05,024 - routes.ai.helpers.exercise_helpers - INFO - Generated 3 exercises in variation block for new user Flo
2025-07-12 12:01:05,025 - routes.ai.helpers.exercise_helpers - INFO - Successfully created AI block with variation for new user Flo: 3 exercises
2025-07-12 12:01:05,025 - routes.ai.helpers.exercise_helpers - INFO - Generated second block for new user Flo with 3 exercises
2025-07-12 12:01:05,025 - routes.ai.helpers.exercise_helpers - INFO - After filtering duplicates for new user Flo: 3 exercises remain
2025-07-12 12:01:05,026 - routes.ai.helpers.exercise_helpers - INFO - Final second block for new user Flo: 3 exercises
2025-07-12 12:01:05,027 - routes.ai.helpers.exercise_helpers - INFO - Storing exercise blocks for new user Flo
2025-07-12 12:01:05,037 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for Flo after after storing both blocks: {
  "username": "Flo",
  "exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"Wir ____ im Park. (We are in the park.)\", \"explanation\": \"No explanation.\", \"options\": [\"haben\", \"sind\", \"hat\", \"bist\"]}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich ____ einen Hund. (I have a dog.)\", \"explanation\": \"No explanation.\", \"options\": [\"bin\", \"habe\", \"ist\", \"hat\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"She is happy.\", \"explanation\": \"No explanation.\"}], \"feedbackPrompt\": \"How did these exercises go? Did you find them challenging?\", \"vocabHelp\": [{\"word\": \"habe\", \"meaning\": \"have (I)\"}, {\"word\": \"ist\", \"meaning\": \"is (she/he/it)\"}, {\"word\": \"sind\", \"meaning\": \"are (we/they)\"}, {\"word\": \"gl\\u00fccklich\", \"meaning\": \"happy\"}]}",
  "next_exercises": "{\"lessonId\": \"dynamic-ai-lesson\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"____ bin m\\u00fcde. (I am tired.)\", \"explanation\": \"No explanation.\", \"options\": [\"Ich\", \"Du\", \"Wir\", \"Ihr\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"They are at home.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"____ hast eine Katze. (You have a cat.)\", \"explanation\": \"No explanation.\", \"options\": [\"Ich\", \"Du\", \"Er\", \"Sie\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you encounter any difficulties?\", \"vocabHelp\": [{\"word\": \"hast\", \"meaning\": \"have (second person singular)\"}, {\"word\": \"m\\u00fcde\", \"meaning\": \"tired\"}, {\"word\": \"zu Hause\", \"meaning\": \"at home\"}]}",
  "exercises_updated_at": "2025-07-12T12:01:05.027954",
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"Wir ____ im Park. (We are in the park.)\", \"Ich ____ einen Hund. (I have a dog.)\", \"She is happy.\"]"
}
2025-07-12 12:01:05,037 - routes.ai.helpers.exercise_helpers - INFO - Successfully completed generate_training_exercises for new user Flo
2025-07-12 12:01:05,037 - routes.ai.training_routes - INFO - Returning new training exercises for user Flo
2025-07-12 12:01:05,040 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:01:05] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 12:01:05,074 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 12:01:05,074 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 12:01:05,074 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 12:01:05,075 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 12:01:05,075 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 12:01:05,076 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:01:05] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 12:01:40,634 - routes.ai.exercise_routes - INFO - Exercise submission request for user Flo, block training
2025-07-12 12:01:40,635 - routes.ai.exercise_routes - INFO - Received submission data for user Flo: {
  "answers": {
    "ex3": "sind",
    "ex1": "bin",
    "ex2": "uuu"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "haben",
          "sind",
          "hat",
          "bist"
        ],
        "question": "Wir ____ im Park. (We are in the park.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "bin",
          "habe",
          "ist",
          "hat"
        ],
        "question": "Ich ____ einen Hund. (I have a dog.)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is happy.",
        "type": "translation"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "have (I)",
        "word": "habe"
      },
      {
        "meaning": "is (she/he/it)",
        "word": "ist"
      },
      {
        "meaning": "are (we/they)",
        "word": "sind"
      },
      {
        "meaning": "happy",
        "word": "gl\u00fccklich"
      }
    ]
  }
}
2025-07-12 12:01:40,636 - routes.ai.exercise_routes - INFO - Parsed submission for user Flo: 3 exercises, 3 answers
2025-07-12 12:01:40,636 - routes.ai.exercise_routes - INFO - Evaluating exercises for user Flo
2025-07-12 12:01:40,637 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-12 12:01:40,638 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-12 12:01:40,638 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-12 12:01:40,638 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-12 12:01:40,642 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:41,778 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:41,781 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-12 12:01:41,781 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 253 characters
2025-07-12 12:01:41,781 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-12 12:01:41,783 - routes.ai.exercise_routes - INFO - Evaluation successful for user Flo
2025-07-12 12:01:41,783 - routes.ai.exercise_routes - INFO - Summary for user Flo: {'correct': 1, 'total': 3, 'mistakes': [{'question': 'Ich ____ einen Hund. (I have a dog.)', 'your_answer': 'bin', 'correct_answer': 'habe'}, {'question': 'She is happy.', 'your_answer': 'uuu', 'correct_answer': 'Sie ist glücklich.'}]}
2025-07-12 12:01:41,784 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user Flo
2025-07-12 12:01:41,786 - routes.ai.exercise_routes - INFO - Got 0 vocab and 3 topic entries for user Flo
2025-07-12 12:01:41,787 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:44,740 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:44,744 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user Flo
2025-07-12 12:01:44,745 - routes.ai.exercise_routes - INFO - Saving exercise submission for user Flo
2025-07-12 12:01:44,745 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T12:01:44.745441",
  "event_type": "submission_start",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "sind",
      "ex1": "bin",
      "ex2": "uuu"
    }
  }
}
2025-07-12 12:01:44,747 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user Flo, block training
2025-07-12 12:01:44,748 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user Flo, block training, answers_count=3
2025-07-12 12:01:44,748 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user Flo
2025-07-12 12:01:44,749 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user Flo: correct=1, quality=5
2025-07-12 12:01:44,748 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 12:01:44,751 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:44,752 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 12:01:44,752 - routes.ai.exercise_routes - INFO - Exercise submission completed for user Flo, passed=False
2025-07-12 12:01:44,754 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 12:01:44,759 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:44,760 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 12:01:44,760 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user Flo
2025-07-12 12:01:44,760 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 12:01:44,785 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 12:01:44,793 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 12:01:44,793 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user Flo
2025-07-12 12:01:44,794 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 12:01:44,794 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 12:01:44,795 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 12:01:44,796 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 12:01:44,796 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 12:01:44,797 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 12:01:44,797 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 12:01:44,800 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:45,393 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:45,400 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:45,960 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:45,963 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['definite article', 'noun', 'personal pronoun', 'sentence structure (subject-verb-object)', 'verb (to be)']
2025-07-12 12:01:45,964 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=definite article, skill=gap-fill
2025-07-12 12:01:45,975 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=noun, skill=gap-fill
2025-07-12 12:01:45,985 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=gap-fill
2025-07-12 12:01:45,992 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=sentence structure (subject-verb-object), skill=gap-fill
2025-07-12 12:01:45,999 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=verb (to be), skill=gap-fill
2025-07-12 12:01:46,010 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 9 words from exercise ex3 for user Flo
2025-07-12 12:01:46,013 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:46,964 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:46,968 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:47,599 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:47,601 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:48,624 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:48,644 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:48,690 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:48,696 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:49,231 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:49,234 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:49,688 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:49,702 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:50,536 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:50,542 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:01:50] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-12 12:01:50,586 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 12:01:50,586 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=3
2025-07-12 12:01:50,587 - routes.ai.training_routes - INFO - User Flo has answers, checking cached next exercises
2025-07-12 12:01:50,590 - routes.ai.training_routes - INFO - Found cached next exercises for user Flo
2025-07-12 12:01:50,590 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user Flo
2025-07-12 12:01:50,592 - routes.ai.training_routes - INFO - Storing exercises for user Flo
2025-07-12 12:01:50,604 - routes.ai.training_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 12:01:50,605 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 12:01:50,605 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user Flo
2025-07-12 12:01:50,605 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 12:01:50,607 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:01:50] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 12:01:50,615 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 12:01:50,615 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user Flo
2025-07-12 12:01:50,615 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 12:01:50,619 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 12:01:50,620 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 12:01:50,621 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user Flo
2025-07-12 12:01:50,621 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=2, topic_count=3
2025-07-12 12:01:50,621 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 12:01:50,621 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 12:01:50,621 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 12:01:50,622 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 12:01:50,622 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 12:01:50,622 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 12:01:50,623 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:51,752 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:51,753 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:51,758 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 12:01:51,758 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1203 characters
2025-07-12 12:01:51,759 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 12:01:51,760 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 12:01:51,761 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 12:01:51,762 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 12:01:51,762 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 12:01:51,763 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 12:01:51,763 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 12:01:51,764 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 12:01:51,764 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 12:01:51,781 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:51,784 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 12:01:52,903 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:52,945 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:54,857 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:54,887 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:56,493 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:56,506 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:57,105 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:57,107 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 12:01:57,109 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1051 characters
2025-07-12 12:01:57,109 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 12:01:57,111 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 12:01:57,112 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 12:01:57,112 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 12:01:57,112 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 12:01:57,113 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 12:01:57,113 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 12:01:57,113 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 12:01:57,113 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 12:01:57,117 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 12:01:58,256 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:58,285 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user Flo: correct=0, quality=2
2025-07-12 12:01:58,286 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:01:58,975 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:01:58] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 12:01:59,208 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:01:59,212 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'present tense', 'verb']
2025-07-12 12:01:59,212 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=indefinite article, skill=gap-fill
2025-07-12 12:01:59,222 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=present tense, skill=gap-fill
2025-07-12 12:01:59,230 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=verb, skill=gap-fill
2025-07-12 12:01:59,238 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user Flo
2025-07-12 12:01:59,242 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:01,504 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:01,533 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:03,060 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:03,078 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:04,463 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:04,489 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:05,855 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:05,880 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:07,466 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:07,483 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:08,591 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:08,601 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user Flo: correct=0, quality=2
2025-07-12 12:02:08,604 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:09,254 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:09,256 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['adjective', 'personal pronoun', 'present tense']
2025-07-12 12:02:09,257 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=adjective, skill=translation
2025-07-12 12:02:09,269 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=translation
2025-07-12 12:02:09,278 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=present tense, skill=translation
2025-07-12 12:02:09,286 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex2 for user Flo
2025-07-12 12:02:09,289 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:10,806 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:10,980 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:13,612 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:13,650 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:16,081 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:16,090 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:17,164 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:02:17] "GET /api/me HTTP/1.1" 200 -
2025-07-12 12:02:17,732 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:02:17] "GET /api/role HTTP/1.1" 200 -
2025-07-12 12:02:17,897 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:17,913 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:18,335 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:02:18] "GET /api/profile HTTP/1.1" 200 -
2025-07-12 12:02:19,306 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:19,330 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:20,752 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:20,775 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user Flo: 11 results
2025-07-12 12:02:20,776 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user Flo
2025-07-12 12:02:20,780 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user Flo, block training
2025-07-12 12:02:20,784 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions
2025-07-12 12:02:20,784 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions, limit=20
2025-07-12 12:02:20,785 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 12:02:20,787 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 12:02:20,787 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user Flo: 6 total questions
2025-07-12 12:02:20,793 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user Flo
2025-07-12 12:02:20,793 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user Flo
2025-07-12 12:02:20,793 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user Flo
2025-07-12 12:02:20,794 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 12:02:20,795 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 12:02:20,795 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T12:02:20.795632",
  "event_type": "submission_complete",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-12 12:02:20,798 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user Flo
2025-07-12 12:02:20,799 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user Flo
2025-07-12 12:02:20,799 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 12:02:20,804 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 12:02:20,807 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user Flo
2025-07-12 12:02:20,807 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user Flo
2025-07-12 12:02:20,808 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=13, topic_count=9
2025-07-12 12:02:20,808 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 12:02:20,808 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 12:02:20,808 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 12:02:20,809 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 12:02:20,809 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-12 12:02:20,810 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 12:02:20,820 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:02:21,006 - app - INFO - User Flo requesting account deactivation
2025-07-12 12:02:21,007 - app - INFO - Deleted 1 records from ai_user_data for user Flo
2025-07-12 12:02:21,008 - app - INFO - Deleted 13 records from vocab_log for user Flo
2025-07-12 12:02:21,008 - app - INFO - Deleted 14 records from topic_memory for user Flo
2025-07-12 12:02:21,008 - app - INFO - Deleted 0 records from results for user Flo
2025-07-12 12:02:21,009 - app - INFO - Deleted 1 records from exercise_submissions for user Flo
2025-07-12 12:02:21,009 - app - INFO - Deleted 0 records from lesson_progress for user Flo
2025-07-12 12:02:21,009 - app - INFO - Deleted 1 records from users for user Flo
2025-07-12 12:02:21,014 - app - INFO - Destroyed all sessions for user Flo
2025-07-12 12:02:21,015 - app - INFO - Account deactivation completed for user Flo. Deleted: AI data=1, vocab=13, topic_memory=14, results=0, exercise_submissions=1, lesson_progress=0, user=1
2025-07-12 12:02:21,016 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:02:21] "POST /api/settings/deactivate HTTP/1.1" 200 -
2025-07-12 12:02:25,774 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:02:25,775 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 12:02:25,776 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1098 characters
2025-07-12 12:02:25,776 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 12:02:25,776 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 12:02:25,777 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 12:02:25,777 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 12:02:25,778 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 12:02:25,778 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 12:02:25,778 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 12:02:25,779 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 12:02:25,779 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 12:02:25,787 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 12:02:27,789 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:02:27] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 12:02:28,620 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:02:28] "POST /api/login HTTP/1.1" 200 -
2025-07-12 12:02:28,869 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:02:28] "GET /api/me HTTP/1.1" 200 -
2025-07-12 12:02:29,433 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:02:29] "GET /api/role HTTP/1.1" 200 -
2025-07-12 12:02:33,606 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:02:33] "POST /api/user-level HTTP/1.1" 200 -
2025-07-12 12:02:34,195 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:02:34] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 12:03:03,117 - routes.ai.training_routes - INFO - Training exercises request from user: 1
2025-07-12 12:03:03,119 - routes.ai.training_routes - INFO - Training request data for user 1: answers_count=0
2025-07-12 12:03:03,120 - routes.ai.training_routes - INFO - User 1 has no answers, checking cached exercises
2025-07-12 12:03:03,121 - routes.ai.training_routes - INFO - Generating new training exercises for user 1
2025-07-12 12:03:03,121 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_training_exercises for user 1
2025-07-12 12:03:03,122 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user 1, limit=20
2025-07-12 12:03:03,124 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user 1
2025-07-12 12:03:03,124 - routes.ai.helpers.exercise_helpers - INFO - Detected new user 1, generating two unique blocks with different contexts
2025-07-12 12:03:03,124 - routes.ai.helpers.exercise_helpers - INFO - Generating blocks for new user 1
2025-07-12 12:03:03,125 - routes.ai.helpers.exercise_helpers - INFO - Generating first block for new user 1
2025-07-12 12:03:03,130 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user 1, limit=20
2025-07-12 12:03:03,132 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user 1
2025-07-12 12:03:03,132 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 0 recent questions for user 1
2025-07-12 12:03:03,132 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 12:03:03,133 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 12:03:03,133 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 12:03:03,134 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 12:03:03,134 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 12:03:03,134 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=0
2025-07-12 12:03:03,144 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 12:03:03,151 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:11,934 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:11,938 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 12:03:11,939 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1060 characters
2025-07-12 12:03:11,940 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 12:03:11,940 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 12:03:11,941 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user 1
2025-07-12 12:03:11,942 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user 1
2025-07-12 12:03:11,942 - routes.ai.helpers.exercise_helpers - INFO - Generated first block for new user 1 with 3 exercises
2025-07-12 12:03:11,943 - routes.ai.helpers.exercise_helpers - INFO - Extracted 3 questions from first block for new user 1
2025-07-12 12:03:11,943 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user 1 with 3 new questions, limit=20
2025-07-12 12:03:11,943 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user 1, limit=20
2025-07-12 12:03:11,946 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user 1
2025-07-12 12:03:11,946 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user 1: 3 total questions
2025-07-12 12:03:11,956 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user 1
2025-07-12 12:03:11,956 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user 1
2025-07-12 12:03:11,958 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for 1 after after updating exercise history: {
  "username": "1",
  "exercises": null,
  "next_exercises": null,
  "exercises_updated_at": null,
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"____ bist du?\", \"She is a teacher.\", \"Ich ____ einen Hund.\"]"
}
2025-07-12 12:03:12,060 - routes.ai.helpers.exercise_helpers - INFO - Generating second block for new user 1 with different context
2025-07-12 12:03:12,060 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block with variation for new user 1 with 3 exclude questions
2025-07-12 12:03:12,066 - routes.ai.helpers.exercise_helpers - INFO - Using 3 exclude questions as recent questions for variation
2025-07-12 12:03:12,067 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 12:03:12,067 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 12:03:12,068 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 12:03:12,068 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 12:03:12,068 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 12:03:12,069 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 12:03:12,069 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 12:03:12,070 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:15,576 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:15,578 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 12:03:15,579 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 970 characters
2025-07-12 12:03:15,579 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 12:03:15,580 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 12:03:15,582 - routes.ai.helpers.exercise_helpers - INFO - Generated 3 exercises in variation block for new user 1
2025-07-12 12:03:15,582 - routes.ai.helpers.exercise_helpers - INFO - Successfully created AI block with variation for new user 1: 3 exercises
2025-07-12 12:03:15,583 - routes.ai.helpers.exercise_helpers - INFO - Generated second block for new user 1 with 3 exercises
2025-07-12 12:03:15,583 - routes.ai.helpers.exercise_helpers - INFO - After filtering duplicates for new user 1: 3 exercises remain
2025-07-12 12:03:15,583 - routes.ai.helpers.exercise_helpers - INFO - Final second block for new user 1: 3 exercises
2025-07-12 12:03:15,583 - routes.ai.helpers.exercise_helpers - INFO - Storing exercise blocks for new user 1
2025-07-12 12:03:15,593 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for 1 after after storing both blocks: {
  "username": "1",
  "exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"____ bist du?\", \"explanation\": \"No explanation.\", \"options\": [\"Was\", \"Wo\", \"Wie\", \"Wer\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"She is a teacher.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich ____ einen Hund.\", \"explanation\": \"No explanation.\", \"options\": [\"bin\", \"habe\", \"hat\", \"ist\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you have any difficulties?\", \"vocabHelp\": [{\"word\": \"habe\", \"meaning\": \"have (I)\"}, {\"word\": \"ist\", \"meaning\": \"is (she/he/it)\"}, {\"word\": \"Lehrerin\", \"meaning\": \"teacher (female)\"}, {\"word\": \"Wer\", \"meaning\": \"Who\"}]}",
  "next_exercises": "{\"lessonId\": \"dynamic-ai-lesson\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"You have a cat.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"____ ist mein Freund.\", \"explanation\": \"No explanation.\", \"options\": [\"Er\", \"Sie\", \"Es\", \"Wir\"]}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"____ habe ein Buch.\", \"explanation\": \"No explanation.\", \"options\": [\"Ich\", \"Du\", \"Er\", \"Sie\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you learn something new?\", \"vocabHelp\": [{\"word\": \"Buch\", \"meaning\": \"book\"}, {\"word\": \"Katze\", \"meaning\": \"cat\"}, {\"word\": \"Freund\", \"meaning\": \"friend\"}]}",
  "exercises_updated_at": "2025-07-12T12:03:15.584351",
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"____ bist du?\", \"She is a teacher.\", \"Ich ____ einen Hund.\"]"
}
2025-07-12 12:03:15,594 - routes.ai.helpers.exercise_helpers - INFO - Successfully completed generate_training_exercises for new user 1
2025-07-12 12:03:15,594 - routes.ai.training_routes - INFO - Returning new training exercises for user 1
2025-07-12 12:03:15,596 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:03:15] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 12:03:15,624 - routes.ai.training_routes - INFO - Training exercises request from user: 1
2025-07-12 12:03:15,625 - routes.ai.training_routes - INFO - Training request data for user 1: answers_count=0
2025-07-12 12:03:15,625 - routes.ai.training_routes - INFO - User 1 has no answers, checking cached exercises
2025-07-12 12:03:15,626 - routes.ai.training_routes - INFO - Found cached exercises for user 1
2025-07-12 12:03:15,626 - routes.ai.training_routes - INFO - Returning cached exercises for user 1
2025-07-12 12:03:15,627 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:03:15] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 12:03:21,550 - routes.ai.exercise_routes - INFO - Exercise submission request for user 1, block training
2025-07-12 12:03:21,552 - routes.ai.exercise_routes - INFO - Received submission data for user 1: {
  "answers": {
    "ex3": "Wo",
    "ex2": "uyg",
    "ex1": "habe"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Was",
          "Wo",
          "Wie",
          "Wer"
        ],
        "question": "____ bist du?",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is a teacher.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "bin",
          "habe",
          "hat",
          "ist"
        ],
        "question": "Ich ____ einen Hund.",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "have (I)",
        "word": "habe"
      },
      {
        "meaning": "is (she/he/it)",
        "word": "ist"
      },
      {
        "meaning": "teacher (female)",
        "word": "Lehrerin"
      },
      {
        "meaning": "Who",
        "word": "Wer"
      }
    ]
  }
}
2025-07-12 12:03:21,553 - routes.ai.exercise_routes - INFO - Parsed submission for user 1: 3 exercises, 3 answers
2025-07-12 12:03:21,553 - routes.ai.exercise_routes - INFO - Evaluating exercises for user 1
2025-07-12 12:03:21,553 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-12 12:03:21,553 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-12 12:03:21,553 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-12 12:03:21,554 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-12 12:03:21,558 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:23,086 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:23,091 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-12 12:03:23,091 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 255 characters
2025-07-12 12:03:23,092 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-12 12:03:23,093 - routes.ai.exercise_routes - INFO - Evaluation successful for user 1
2025-07-12 12:03:23,093 - routes.ai.exercise_routes - INFO - Summary for user 1: {'correct': 2, 'total': 3, 'mistakes': [{'question': 'She is a teacher.', 'your_answer': 'uyg', 'correct_answer': 'Sie ist eine Lehrerin.'}]}
2025-07-12 12:03:23,093 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user 1
2025-07-12 12:03:23,095 - routes.ai.exercise_routes - INFO - Got 0 vocab and 3 topic entries for user 1
2025-07-12 12:03:23,096 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:24,060 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:24,064 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user 1
2025-07-12 12:03:24,068 - routes.ai.exercise_routes - INFO - Saving exercise submission for user 1
2025-07-12 12:03:24,069 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T12:03:24.068759",
  "event_type": "submission_start",
  "username": "1",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "Wo",
      "ex2": "uyg",
      "ex1": "habe"
    }
  }
}
2025-07-12 12:03:24,070 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user 1, block training
2025-07-12 12:03:24,071 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user 1, block training, answers_count=3
2025-07-12 12:03:24,071 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user 1
2025-07-12 12:03:24,072 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user 1: correct=1, quality=5
2025-07-12 12:03:24,070 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user 1
2025-07-12 12:03:24,076 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:24,085 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user 1
2025-07-12 12:03:24,085 - routes.ai.exercise_routes - INFO - Exercise submission completed for user 1, passed=False
2025-07-12 12:03:24,086 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user 1, limit=20
2025-07-12 12:03:24,087 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:24,088 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user 1
2025-07-12 12:03:24,089 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user 1
2025-07-12 12:03:24,089 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user 1
2025-07-12 12:03:24,095 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user 1, limit=20
2025-07-12 12:03:24,097 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user 1
2025-07-12 12:03:24,098 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user 1
2025-07-12 12:03:24,098 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 12:03:24,098 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 12:03:24,099 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 12:03:24,099 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 12:03:24,099 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 12:03:24,099 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 12:03:24,100 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 12:03:24,101 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:24,879 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:24,881 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['adverb', 'interrogative pronoun', 'verb']
2025-07-12 12:03:24,882 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user 1, feature=adverb, skill=gap-fill
2025-07-12 12:03:24,891 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user 1, feature=interrogative pronoun, skill=gap-fill
2025-07-12 12:03:24,897 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user 1, feature=verb, skill=gap-fill
2025-07-12 12:03:24,904 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 3 words from exercise ex3 for user 1
2025-07-12 12:03:24,907 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:25,532 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:25,534 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:28,029 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:28,033 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:28,926 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:28,928 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 12:03:28,929 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 973 characters
2025-07-12 12:03:28,930 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 12:03:28,930 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 12:03:28,931 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user 1
2025-07-12 12:03:28,932 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user 1
2025-07-12 12:03:28,932 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user 1: True
2025-07-12 12:03:28,932 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user 1 to avoid duplicates
2025-07-12 12:03:28,932 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user 1
2025-07-12 12:03:28,933 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user 1: 3 exercises
2025-07-12 12:03:28,933 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user 1
2025-07-12 12:03:28,940 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user 1
2025-07-12 12:03:29,480 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:29,499 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:29,854 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:29,861 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:31,331 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:31,351 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:32,495 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:32,499 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:33,149 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:33,152 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:34,243 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:34,259 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user 1: correct=0, quality=2
2025-07-12 12:03:34,260 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:34,547 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:34,551 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:03:34] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-12 12:03:34,593 - routes.ai.training_routes - INFO - Training exercises request from user: 1
2025-07-12 12:03:34,594 - routes.ai.training_routes - INFO - Training request data for user 1: answers_count=3
2025-07-12 12:03:34,594 - routes.ai.training_routes - INFO - User 1 has answers, checking cached next exercises
2025-07-12 12:03:34,596 - routes.ai.training_routes - INFO - Found cached next exercises for user 1
2025-07-12 12:03:34,597 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user 1
2025-07-12 12:03:34,597 - routes.ai.training_routes - INFO - Storing exercises for user 1
2025-07-12 12:03:34,603 - routes.ai.training_routes - INFO - Running prefetch next exercises for user 1
2025-07-12 12:03:34,604 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user 1
2025-07-12 12:03:34,604 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user 1
2025-07-12 12:03:34,604 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user 1, limit=20
2025-07-12 12:03:34,605 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:03:34] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 12:03:34,608 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user 1
2025-07-12 12:03:34,608 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user 1
2025-07-12 12:03:34,608 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user 1
2025-07-12 12:03:34,612 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user 1, limit=20
2025-07-12 12:03:34,613 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user 1
2025-07-12 12:03:34,613 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user 1
2025-07-12 12:03:34,614 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=3, topic_count=3
2025-07-12 12:03:34,614 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 12:03:34,614 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 12:03:34,614 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 12:03:34,615 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 12:03:34,615 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 12:03:34,620 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 12:03:34,621 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:35,019 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:35,021 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['definite article', 'indefinite article', 'noun', 'personal pronoun', 'present tense']
2025-07-12 12:03:35,022 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user 1, feature=definite article, skill=translation
2025-07-12 12:03:35,035 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user 1, feature=indefinite article, skill=translation
2025-07-12 12:03:35,044 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user 1, feature=noun, skill=translation
2025-07-12 12:03:35,052 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user 1, feature=personal pronoun, skill=translation
2025-07-12 12:03:35,059 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user 1, feature=present tense, skill=translation
2025-07-12 12:03:35,065 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user 1
2025-07-12 12:03:35,067 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:37,236 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:37,254 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:42,023 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:03:42] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 12:03:42,257 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:42,259 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 12:03:42,259 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 989 characters
2025-07-12 12:03:42,260 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 12:03:42,260 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 12:03:42,261 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user 1
2025-07-12 12:03:42,261 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user 1
2025-07-12 12:03:42,261 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user 1: True
2025-07-12 12:03:42,261 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user 1 to avoid duplicates
2025-07-12 12:03:42,261 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user 1
2025-07-12 12:03:42,261 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user 1: 3 exercises
2025-07-12 12:03:42,262 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user 1
2025-07-12 12:03:42,265 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user 1
2025-07-12 12:03:44,070 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:44,097 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:45,433 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:46,035 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:46,052 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:47,763 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:47,780 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:50,451 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:50,472 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:52,983 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:53,004 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user 1: correct=1, quality=5
2025-07-12 12:03:53,005 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:54,429 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:54,430 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'nominative case', 'personal pronoun', 'verb conjugation']
2025-07-12 12:03:54,430 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user 1, feature=indefinite article, skill=gap-fill
2025-07-12 12:03:54,443 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user 1, feature=nominative case, skill=gap-fill
2025-07-12 12:03:54,451 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user 1, feature=personal pronoun, skill=gap-fill
2025-07-12 12:03:54,458 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user 1, feature=verb conjugation, skill=gap-fill
2025-07-12 12:03:54,465 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 3 words from exercise ex1 for user 1
2025-07-12 12:03:54,467 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:56,263 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:56,268 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:03:56] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 12:03:56,300 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:03:56] "[31m[1mPOST /api/mistral-chat-history HTTP/1.1[0m" 400 -
2025-07-12 12:03:56,473 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:56,484 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:03:59,599 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:03:59,622 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:04:01,254 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:04:01,276 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user 1: 12 results
2025-07-12 12:04:01,276 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user 1
2025-07-12 12:04:01,279 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user 1, block training
2025-07-12 12:04:01,285 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user 1 with 3 new questions
2025-07-12 12:04:01,285 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user 1 with 3 new questions, limit=20
2025-07-12 12:04:01,286 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user 1, limit=20
2025-07-12 12:04:01,290 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user 1
2025-07-12 12:04:01,290 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user 1: 6 total questions
2025-07-12 12:04:01,295 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user 1
2025-07-12 12:04:01,295 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user 1
2025-07-12 12:04:01,296 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user 1
2025-07-12 12:04:01,296 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user 1
2025-07-12 12:04:01,297 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user 1, limit=20
2025-07-12 12:04:01,297 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T12:04:01.297453",
  "event_type": "submission_complete",
  "username": "1",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-12 12:04:01,302 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user 1
2025-07-12 12:04:01,302 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user 1
2025-07-12 12:04:01,302 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user 1
2025-07-12 12:04:01,307 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user 1, limit=20
2025-07-12 12:04:01,309 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user 1
2025-07-12 12:04:01,309 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user 1
2025-07-12 12:04:01,309 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=10, topic_count=8
2025-07-12 12:04:01,310 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 12:04:01,310 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 12:04:01,310 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 12:04:01,311 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 12:04:01,311 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-12 12:04:01,390 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 12:04:01,394 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:04:07,568 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:04:07,570 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 12:04:07,570 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 983 characters
2025-07-12 12:04:07,571 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 12:04:07,571 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 12:04:07,571 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user 1
2025-07-12 12:04:07,571 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user 1
2025-07-12 12:04:07,572 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user 1: True
2025-07-12 12:04:07,572 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user 1 to avoid duplicates
2025-07-12 12:04:07,572 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user 1
2025-07-12 12:04:07,572 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user 1: 3 exercises
2025-07-12 12:04:07,572 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user 1
2025-07-12 12:04:07,576 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user 1
2025-07-12 12:04:45,165 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 12:04:45,426 - werkzeug - INFO -  * Restarting with stat
2025-07-12 12:04:46,483 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 12:04:46,484 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 12:05:14,017 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:05:15,981 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:05:15,992 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:05:15] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 12:05:16,025 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:05:16] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 12:05:16,605 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 12:05:16] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 12:06:53,524 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 12:06:53,525 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 12:06:53,525 - werkzeug - INFO -  * Restarting with stat
2025-07-12 12:06:54,385 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 12:06:54,386 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 12:13:29,938 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 12:13:30,235 - werkzeug - INFO -  * Restarting with stat
2025-07-12 12:13:31,443 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 12:13:31,448 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 12:13:41,980 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 12:13:42,214 - werkzeug - INFO -  * Restarting with stat
2025-07-12 12:13:43,154 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 12:13:43,155 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 12:13:53,552 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 12:13:53,789 - werkzeug - INFO -  * Restarting with stat
2025-07-12 12:13:54,738 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 12:13:54,740 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 12:13:58,900 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 12:13:59,133 - werkzeug - INFO -  * Restarting with stat
2025-07-12 12:14:00,102 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 12:14:00,103 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 12:14:07,361 - werkzeug - INFO -  * Detected change in '/app/src/utils/ai/ai_api.py', reloading
2025-07-12 12:14:07,650 - werkzeug - INFO -  * Restarting with stat
2025-07-12 12:14:08,694 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 12:14:08,695 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 12:14:15,852 - werkzeug - INFO -  * Detected change in '/app/src/utils/ai/ai_api.py', reloading
2025-07-12 12:14:16,100 - werkzeug - INFO -  * Restarting with stat
2025-07-12 12:14:17,017 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 12:14:17,018 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 12:14:32,273 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:14:32] "[31m[1mPOST /api/login HTTP/1.1[0m" 401 -
2025-07-12 12:14:38,423 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:14:38] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 12:14:38,979 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:14:38] "POST /api/login HTTP/1.1" 200 -
2025-07-12 12:14:39,456 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:14:39] "GET /api/me HTTP/1.1" 200 -
2025-07-12 12:14:40,027 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:14:40] "GET /api/role HTTP/1.1" 200 -
2025-07-12 12:14:44,336 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:14:44] "POST /api/user-level HTTP/1.1" 200 -
2025-07-12 12:14:44,962 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:14:44] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 12:14:46,977 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:14:46] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 12:14:51,145 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 12:14:51,146 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: hello'}], 'temperature': 0.3}
2025-07-12 12:14:51,165 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:14:53,107 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:14:53,111 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:14:53] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 12:14:53,133 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:14:53] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 12:14:53,718 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:14:53] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 12:16:45,572 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 12:16:45,573 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: What is exploreed?'}], 'temperature': 0.3}
2025-07-12 12:16:45,581 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:16:57,766 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:16:57,781 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:16:57] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 12:16:57,855 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:16:57] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 12:16:58,417 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:16:58] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 12:17:20,009 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 12:17:20,012 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': "Create a short HTML lesson in English for a German learner. Explain the topic 'personal pronouns' (initial)Return only valid HTML."}], 'temperature': 0.7}
2025-07-12 12:17:20,015 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:17:30,983 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:17:31,002 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:17:31] "GET /api/weakness-lesson HTTP/1.1" 200 -
2025-07-12 12:17:35,379 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:17:35] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 12:17:37,134 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 12:17:37,135 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 12:17:37,136 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 12:17:37,137 - routes.ai.training_routes - INFO - Generating new training exercises for user Flo
2025-07-12 12:17:37,137 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_training_exercises for user Flo
2025-07-12 12:17:37,138 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 12:17:37,139 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user Flo
2025-07-12 12:17:37,139 - routes.ai.helpers.exercise_helpers - INFO - Detected new user Flo, generating two unique blocks with different contexts
2025-07-12 12:17:37,139 - routes.ai.helpers.exercise_helpers - INFO - Generating blocks for new user Flo
2025-07-12 12:17:37,139 - routes.ai.helpers.exercise_helpers - INFO - Generating first block for new user Flo
2025-07-12 12:17:37,143 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 12:17:37,144 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user Flo
2025-07-12 12:17:37,144 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 0 recent questions for user Flo
2025-07-12 12:17:37,144 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 12:17:37,144 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 12:17:37,144 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 12:17:37,144 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 12:17:37,144 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 12:17:37,145 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=0
2025-07-12 12:17:37,145 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 12:17:37,145 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 12:17:37,145 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'Your task is to generate new exercises in JSON format. Use provided memory data to tailor difficulty.'}, {'role': 'user', 'content': '\nYou are generating structured grammar and translation exercises for a German learner.\nThe student\'s level is 2/10 (CEFR A2).\nAdjust sentence complexity and vocabulary accordingly.\n\nHere is the required JSON structure — you must follow it **exactly**:\n\n1. Each exercise must include:\n   - `id`: a unique ID like `"ex1"`\n   - `type`: either `"gap-fill"` or `"translation"`\n   - `question`: a string (either a full sentence with a blank depending on the students level, or a translation task with the same conditions, remember to always put a full sentence)\n   - For "gap-fill":\n     - `options`: list of 4 strings, one of them has to be the correct answer, be sure to include the right answer.\n     - `correctAnswer`: the correct string\n   - For "translation":\n     - `correctAnswer`: the correct German translation\n\n 2. The overall JSON must contain:\n   - `lessonId`, `title`, `instructions`, `level`\n   - `exercises`: list of 3 total exercises (mix of both types)\n   - `feedbackPrompt`\n   - `vocabHelp`: list of vocab entries with:\n       - `word`, `meaning`\n\n⚠️ Do not change field names or format.\n⚠️ Do not include other types like "sentenceCreation", "prompt", or "hint".\n⚠️ All keys must match the example exactly.\n⚠️ Do not repeat or reuse any example sentences from previous exercises or memory.\n⚠️ **NEVER repeat any of these questions the user has seen recently:**\n\n\n⚠️ Always generate new, unique sentences that were not seen in earlier exercises.\n\nHere is an example structure for reference (do not reuse content!):\n{\n  "lessonId": "dynamic-ai-lesson",\n  "title": "AI Generated Exercises",\n  "instructions": "Fill in the blanks or translate the sentences.",\n  "level": "A2",\n  "exercises": [],\n  "feedbackPrompt": "",\n  "vocabHelp": []\n}\n\nHere is the learner’s vocabulary list (prioritize vocab with next_repeat due soon, include one or two per sentence, try to teach the learner new words based):\n[]\n\nHere is the topic memory (form the exercises to train the weaknesses seen in the entries:):\n[\n  {\n    "grammar": "personal pronouns",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "sein",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "haben",\n    "topic": null,\n    "skill_type": "initial"\n  }\n]\nCreate new sentences with new words and topics.\nCreate a new exercise block using the **same structure** and **same field names**, but adapt the **content** to the learner’s weaknesses and level.\n'}], 'temperature': 0.7}
2025-07-12 12:17:37,147 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:17:40,823 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:17:40,828 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 12:17:40,828 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1078 characters
2025-07-12 12:17:40,830 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 12:17:40,830 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 12:17:40,831 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 12:17:40,832 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 12:17:40,832 - routes.ai.helpers.exercise_helpers - INFO - Generated first block for new user Flo with 3 exercises
2025-07-12 12:17:40,832 - routes.ai.helpers.exercise_helpers - INFO - Extracted 3 questions from first block for new user Flo
2025-07-12 12:17:40,833 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions, limit=20
2025-07-12 12:17:40,833 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 12:17:40,836 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user Flo
2025-07-12 12:17:40,836 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user Flo: 3 total questions
2025-07-12 12:17:40,844 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user Flo
2025-07-12 12:17:40,844 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user Flo
2025-07-12 12:17:40,847 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for Flo after after updating exercise history: {
  "username": "Flo",
  "exercises": null,
  "next_exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"Sie ___ eine Katze. (She has a cat.)\", \"explanation\": \"No explanation.\", \"options\": [\"ist\", \"hat\", \"habe\", \"bist\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"He is a teacher.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich ___ einen Apfel. (I have an apple.)\", \"explanation\": \"No explanation.\", \"options\": [\"bin\", \"hast\", \"hat\", \"habe\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you notice any patterns or have any questions?\", \"vocabHelp\": [{\"word\": \"habe\", \"meaning\": \"have (I)\"}, {\"word\": \"ist\", \"meaning\": \"is\"}, {\"word\": \"Lehrer\", \"meaning\": \"teacher\"}, {\"word\": \"hat\", \"meaning\": \"has\"}]}",
  "exercises_updated_at": null,
  "weakness_lesson": "<!DOCTYPE html>\n\n\n    \n    \n    German Personal Pronouns\n    \n\n\n    <h1>German Personal Pronouns</h1>\n    <p>Personal pronouns are used to replace nouns (people, places, things, or ideas) in a sentence. They help us avoid repetition and make our sentences smoother.</p>\n\n    <h2>Subject Pronouns</h2>\n    <p>Subject pronouns are used as the subject of a sentence. Here are the German subject pronouns:</p>\n\n    <table>\n        <tr>\n            <th>English</th>\n            <th>German</th>\n        </tr>\n        <tr>\n            <td>I</td>\n            <td>ich</td>\n        </tr>\n        <tr>\n            <td>you (informal)</td>\n            <td>du</td>\n        </tr>\n        <tr>\n            <td>he</td>\n            <td>er</td>\n        </tr>\n        <tr>\n            <td>she</td>\n            <td>sie</td>\n        </tr>\n        <tr>\n            <td>it</td>\n            <td>es</td>\n        </tr>\n        <tr>\n            <td>we</td>\n            <td>wir</td>\n        </tr>\n        <tr>\n            <td>you (plural, informal)</td>\n            <td>ihr</td>\n        </tr>\n        <tr>\n            <td>they</td>\n            <td>sie</td>\n        </tr>\n        <tr>\n            <td>you (formal)</td>\n            <td>Sie</td>\n        </tr>\n    </table>\n\n    <h2>Example Sentences</h2>\n    <ul>\n        <li><strong>Ich</strong> bin müde. - <strong>I</strong> am tired.</li>\n        <li><strong>Du</strong> bist mein Freund. - <strong>You</strong> are my friend.</li>\n        <li><strong>Er</strong> geht zur Schule. - <strong>He</strong> goes to school.</li>\n        <li><strong>Sie</strong> liest ein Buch. - <strong>She</strong> reads a book.</li>\n        <li><strong>Es</strong> ist kalt. - <strong>It</strong> is cold.</li>\n        <li><strong>Wir</strong> spielen Fußball. - <strong>We</strong> play soccer.</li>\n        <li><strong>Ihr</strong> seid glücklich. - <strong>You</strong> are happy.</li>\n        <li><strong>Sie</strong> laufen schnell. - <strong>They</strong> run fast.</li>\n        <li><strong>Sie</strong> sind sehr nett. - <strong>You</strong> are very nice. (formal)</li>\n    </ul>\n\n    <h2>Practice</h2>\n    <p>Try to translate the following sentences into German using the correct personal pronouns:</p>\n    <ol>\n        <li>I have a cat.</li>\n        <li>You are happy. (informal)</li>\n        <li>He is tall.</li>\n        <li>We are friends.</li>\n        <li>They are at home.</li>\n    </ol>",
  "weakness_topic": "personal pronouns",
  "lesson_updated_at": "2025-07-12T12:17:30.990324",
  "exercise_history": "[\"She is a teacher.\", \"____ bist du? (Where are you?)\", \"Ich ____ einen Hund. (I have a dog.)\"]"
}
2025-07-12 12:17:40,949 - routes.ai.helpers.exercise_helpers - INFO - Generating second block for new user Flo with different context
2025-07-12 12:17:40,950 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block with variation for new user Flo with 3 exclude questions
2025-07-12 12:17:40,962 - routes.ai.helpers.exercise_helpers - INFO - Using 3 exclude questions as recent questions for variation
2025-07-12 12:17:40,962 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 12:17:40,962 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 12:17:40,962 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 12:17:40,963 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 12:17:40,963 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 12:17:40,964 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 12:17:40,964 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 12:17:40,965 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 12:17:40,965 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'Your task is to generate new exercises in JSON format. Use provided memory data to tailor difficulty.'}, {'role': 'user', 'content': '\nYou are generating structured grammar and translation exercises for a German learner.\nThe student\'s level is 2/10 (CEFR A2).\nAdjust sentence complexity and vocabulary accordingly.\n\nHere is the required JSON structure — you must follow it **exactly**:\n\n1. Each exercise must include:\n   - `id`: a unique ID like `"ex1"`\n   - `type`: either `"gap-fill"` or `"translation"`\n   - `question`: a string (either a full sentence with a blank depending on the students level, or a translation task with the same conditions, remember to always put a full sentence)\n   - For "gap-fill":\n     - `options`: list of 4 strings, one of them has to be the correct answer, be sure to include the right answer.\n     - `correctAnswer`: the correct string\n   - For "translation":\n     - `correctAnswer`: the correct German translation\n\n 2. The overall JSON must contain:\n   - `lessonId`, `title`, `instructions`, `level`\n   - `exercises`: list of 3 total exercises (mix of both types)\n   - `feedbackPrompt`\n   - `vocabHelp`: list of vocab entries with:\n       - `word`, `meaning`\n\n⚠️ Do not change field names or format.\n⚠️ Do not include other types like "sentenceCreation", "prompt", or "hint".\n⚠️ All keys must match the example exactly.\n⚠️ Do not repeat or reuse any example sentences from previous exercises or memory.\n⚠️ **NEVER repeat any of these questions the user has seen recently:**\nShe is a teacher.\n____ bist du? (Where are you?)\nIch ____ einen Hund. (I have a dog.)\n\n⚠️ Always generate new, unique sentences that were not seen in earlier exercises.\n\nHere is an example structure for reference (do not reuse content!):\n{\n  "lessonId": "dynamic-ai-lesson",\n  "title": "AI Generated Exercises",\n  "instructions": "Fill in the blanks or translate the sentences.",\n  "level": "A2",\n  "exercises": [],\n  "feedbackPrompt": "",\n  "vocabHelp": []\n}\n\nHere is the learner’s vocabulary list (prioritize vocab with next_repeat due soon, include one or two per sentence, try to teach the learner new words based):\n[]\n\nHere is the topic memory (form the exercises to train the weaknesses seen in the entries:):\n[\n  {\n    "grammar": "personal pronouns",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "sein",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "haben",\n    "topic": null,\n    "skill_type": "initial"\n  }\n]\nCreate new sentences with new words and topics.\nCreate a new exercise block using the **same structure** and **same field names**, but adapt the **content** to the learner’s weaknesses and level.\n'}], 'temperature': 0.7}
2025-07-12 12:17:40,967 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:17:45,013 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:17:45,026 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 12:17:45,027 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1103 characters
2025-07-12 12:17:45,027 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 12:17:45,027 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 12:17:45,029 - routes.ai.helpers.exercise_helpers - INFO - Generated 3 exercises in variation block for new user Flo
2025-07-12 12:17:45,030 - routes.ai.helpers.exercise_helpers - INFO - Successfully created AI block with variation for new user Flo: 3 exercises
2025-07-12 12:17:45,031 - routes.ai.helpers.exercise_helpers - INFO - Generated second block for new user Flo with 3 exercises
2025-07-12 12:17:45,031 - routes.ai.helpers.exercise_helpers - INFO - After filtering duplicates for new user Flo: 3 exercises remain
2025-07-12 12:17:45,032 - routes.ai.helpers.exercise_helpers - INFO - Final second block for new user Flo: 3 exercises
2025-07-12 12:17:45,032 - routes.ai.helpers.exercise_helpers - INFO - Storing exercise blocks for new user Flo
2025-07-12 12:17:45,044 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for Flo after after storing both blocks: {
  "username": "Flo",
  "exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"She is a teacher.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"____ bist du? (Where are you?)\", \"explanation\": \"No explanation.\", \"options\": [\"Wo\", \"Was\", \"Wie\", \"Wann\"]}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich ____ einen Hund. (I have a dog.)\", \"explanation\": \"No explanation.\", \"options\": [\"bin\", \"habe\", \"ist\", \"hat\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you have any difficulties?\", \"vocabHelp\": [{\"word\": \"habe\", \"meaning\": \"have\"}, {\"word\": \"ist\", \"meaning\": \"is\"}, {\"word\": \"Wo\", \"meaning\": \"where\"}, {\"word\": \"Lehrerin\", \"meaning\": \"teacher (female)\"}]}",
  "next_exercises": "{\"lessonId\": \"dynamic-ai-lesson\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"He is in the garden.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"____ sind Freunde. (They are friends)\", \"explanation\": \"No explanation.\", \"options\": [\"Wir\", \"Ihr\", \"Sie\", \"Es\"]}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"____ habe einen Bruder. (I have a brother)\", \"explanation\": \"No explanation.\", \"options\": [\"Ich\", \"Du\", \"Er\", \"Sie\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you notice any patterns or have any questions about the grammar or vocabulary?\", \"vocabHelp\": [{\"word\": \"der Bruder\", \"meaning\": \"the brother\"}, {\"word\": \"der Garten\", \"meaning\": \"the garden\"}, {\"word\": \"die Freunde\", \"meaning\": \"the friends\"}]}",
  "exercises_updated_at": "2025-07-12T12:17:45.033369",
  "weakness_lesson": "<!DOCTYPE html>\n\n\n    \n    \n    German Personal Pronouns\n    \n\n\n    <h1>German Personal Pronouns</h1>\n    <p>Personal pronouns are used to replace nouns (people, places, things, or ideas) in a sentence. They help us avoid repetition and make our sentences smoother.</p>\n\n    <h2>Subject Pronouns</h2>\n    <p>Subject pronouns are used as the subject of a sentence. Here are the German subject pronouns:</p>\n\n    <table>\n        <tr>\n            <th>English</th>\n            <th>German</th>\n        </tr>\n        <tr>\n            <td>I</td>\n            <td>ich</td>\n        </tr>\n        <tr>\n            <td>you (informal)</td>\n            <td>du</td>\n        </tr>\n        <tr>\n            <td>he</td>\n            <td>er</td>\n        </tr>\n        <tr>\n            <td>she</td>\n            <td>sie</td>\n        </tr>\n        <tr>\n            <td>it</td>\n            <td>es</td>\n        </tr>\n        <tr>\n            <td>we</td>\n            <td>wir</td>\n        </tr>\n        <tr>\n            <td>you (plural, informal)</td>\n            <td>ihr</td>\n        </tr>\n        <tr>\n            <td>they</td>\n            <td>sie</td>\n        </tr>\n        <tr>\n            <td>you (formal)</td>\n            <td>Sie</td>\n        </tr>\n    </table>\n\n    <h2>Example Sentences</h2>\n    <ul>\n        <li><strong>Ich</strong> bin müde. - <strong>I</strong> am tired.</li>\n        <li><strong>Du</strong> bist mein Freund. - <strong>You</strong> are my friend.</li>\n        <li><strong>Er</strong> geht zur Schule. - <strong>He</strong> goes to school.</li>\n        <li><strong>Sie</strong> liest ein Buch. - <strong>She</strong> reads a book.</li>\n        <li><strong>Es</strong> ist kalt. - <strong>It</strong> is cold.</li>\n        <li><strong>Wir</strong> spielen Fußball. - <strong>We</strong> play soccer.</li>\n        <li><strong>Ihr</strong> seid glücklich. - <strong>You</strong> are happy.</li>\n        <li><strong>Sie</strong> laufen schnell. - <strong>They</strong> run fast.</li>\n        <li><strong>Sie</strong> sind sehr nett. - <strong>You</strong> are very nice. (formal)</li>\n    </ul>\n\n    <h2>Practice</h2>\n    <p>Try to translate the following sentences into German using the correct personal pronouns:</p>\n    <ol>\n        <li>I have a cat.</li>\n        <li>You are happy. (informal)</li>\n        <li>He is tall.</li>\n        <li>We are friends.</li>\n        <li>They are at home.</li>\n    </ol>",
  "weakness_topic": "personal pronouns",
  "lesson_updated_at": "2025-07-12T12:17:30.990324",
  "exercise_history": "[\"She is a teacher.\", \"____ bist du? (Where are you?)\", \"Ich ____ einen Hund. (I have a dog.)\"]"
}
2025-07-12 12:17:45,044 - routes.ai.helpers.exercise_helpers - INFO - Successfully completed generate_training_exercises for new user Flo
2025-07-12 12:17:45,044 - routes.ai.training_routes - INFO - Returning new training exercises for user Flo
2025-07-12 12:17:45,047 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:17:45] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 12:17:45,090 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 12:17:45,095 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 12:17:45,098 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 12:17:45,101 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 12:17:45,102 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 12:17:45,103 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:17:45] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 12:17:48,555 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:17:48] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 12:17:52,579 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 12:17:52,580 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: hello'}], 'temperature': 0.3}
2025-07-12 12:17:52,584 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 12:17:53,617 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 12:17:53,622 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:17:53] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 12:17:53,652 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:17:53] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 12:17:54,232 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:17:54] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 12:18:57,682 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 12:18:57,969 - werkzeug - INFO -  * Restarting with stat
2025-07-12 12:18:58,990 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 12:18:58,994 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 12:19:00,036 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 12:19:00,239 - werkzeug - INFO -  * Restarting with stat
2025-07-12 12:19:02,001 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 12:19:02,002 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 12:19:43,933 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 12:19:44,156 - werkzeug - INFO -  * Restarting with stat
2025-07-12 12:19:45,315 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 12:19:45,317 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 12:19:46,380 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 12:19:46,598 - werkzeug - INFO -  * Restarting with stat
2025-07-12 12:19:47,498 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 12:19:47,499 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 12:20:14,834 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:20:14] "GET /api/me HTTP/1.1" 200 -
2025-07-12 12:20:14,835 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 12:20:14,837 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 12:20:14,838 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 12:20:14,849 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 12:20:14,849 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 12:20:14,850 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:20:14] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 12:20:15,381 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:20:15] "GET /api/role HTTP/1.1" 200 -
2025-07-12 12:20:15,399 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 12:20:15,399 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 12:20:15,400 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 12:20:15,402 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 12:20:15,402 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 12:20:15,404 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:20:15] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 12:20:54,938 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:20:54] "GET /api/me HTTP/1.1" 200 -
2025-07-12 12:20:54,939 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 12:20:54,940 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 12:20:54,941 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 12:20:54,942 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 12:20:54,942 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 12:20:54,943 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:20:54] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 12:20:55,503 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:20:55] "GET /api/role HTTP/1.1" 200 -
2025-07-12 12:20:55,517 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 12:20:55,517 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 12:20:55,517 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 12:20:55,520 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 12:20:55,521 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 12:20:55,522 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 12:20:55] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 13:35:19,763 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 13:35:20,071 - werkzeug - INFO -  * Restarting with stat
2025-07-12 13:35:21,051 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 13:35:21,052 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 13:36:21,704 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 13:36:21,704 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 13:36:21,705 - werkzeug - INFO -  * Restarting with stat
2025-07-12 13:36:22,555 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 13:36:22,556 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 13:36:33,452 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:36:33] "GET /api/me HTTP/1.1" 200 -
2025-07-12 13:36:33,453 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 13:36:33,462 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 13:36:33,463 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 13:36:33,471 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 13:36:33,472 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 13:36:33,473 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:36:33] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 13:36:33,929 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:36:33] "GET /api/role HTTP/1.1" 200 -
2025-07-12 13:36:33,942 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 13:36:33,942 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 13:36:33,943 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 13:36:33,953 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 13:36:33,953 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 13:36:33,955 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:36:33] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 13:37:03,969 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:37:03] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:39:18,311 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:39:18] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:39:18,824 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:39:18] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:39:37,596 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:39:37] "GET /api/me HTTP/1.1" 200 -
2025-07-12 13:39:37,597 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 13:39:37,600 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 13:39:37,600 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 13:39:37,603 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 13:39:37,603 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 13:39:37,603 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:39:37] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 13:39:38,153 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:39:38] "GET /api/role HTTP/1.1" 200 -
2025-07-12 13:39:38,160 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 13:39:38,160 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 13:39:38,160 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 13:39:38,164 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 13:39:38,164 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 13:39:38,165 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:39:38] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 13:39:39,893 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:39:39] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:40:26,819 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:40:26] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:40:29,120 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:40:29] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:40:29,672 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:40:29] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:41:05,635 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:41:05] "GET /api/me HTTP/1.1" 200 -
2025-07-12 13:41:05,636 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 13:41:05,637 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 13:41:05,637 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 13:41:05,639 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 13:41:05,639 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 13:41:05,640 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:41:05] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 13:41:06,198 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:41:06] "GET /api/role HTTP/1.1" 200 -
2025-07-12 13:41:06,205 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 13:41:06,205 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 13:41:06,206 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 13:41:06,209 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 13:41:06,209 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 13:41:06,210 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:41:06] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 13:41:09,008 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:41:09] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:42:10,927 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:42:10] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:42:11,485 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:42:11] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:42:43,279 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:42:43] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:44:00,044 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:44:00] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:44:04,367 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:44:04] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:48:34,635 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 13:48:34,636 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: hello'}], 'temperature': 0.3}
2025-07-12 13:48:34,663 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 13:48:37,128 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 13:48:37,136 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:48:37] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 13:48:37,182 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:48:37] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:48:37,756 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:48:37] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:52:04,003 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:04] "GET /api/me HTTP/1.1" 200 -
2025-07-12 13:52:04,560 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:04] "GET /api/role HTTP/1.1" 200 -
2025-07-12 13:52:05,137 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:05] "GET /api/profile HTTP/1.1" 200 -
2025-07-12 13:52:07,718 - app - INFO - User Flo requesting account deactivation
2025-07-12 13:52:07,724 - app - INFO - Deleted 1 records from ai_user_data for user Flo
2025-07-12 13:52:07,725 - app - INFO - Deleted 0 records from vocab_log for user Flo
2025-07-12 13:52:07,726 - app - INFO - Deleted 3 records from topic_memory for user Flo
2025-07-12 13:52:07,726 - app - INFO - Deleted 0 records from results for user Flo
2025-07-12 13:52:07,727 - app - INFO - Deleted 0 records from exercise_submissions for user Flo
2025-07-12 13:52:07,727 - app - INFO - Deleted 0 records from lesson_progress for user Flo
2025-07-12 13:52:07,728 - app - INFO - Deleted 1 records from users for user Flo
2025-07-12 13:52:07,737 - app - INFO - Destroyed all sessions for user Flo
2025-07-12 13:52:07,737 - app - INFO - Account deactivation completed for user Flo. Deleted: AI data=1, vocab=0, topic_memory=3, results=0, exercise_submissions=0, lesson_progress=0, user=1
2025-07-12 13:52:07,739 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:07] "POST /api/settings/deactivate HTTP/1.1" 200 -
2025-07-12 13:52:17,456 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:17] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 13:52:17,980 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:17] "POST /api/login HTTP/1.1" 200 -
2025-07-12 13:52:18,454 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:18] "GET /api/me HTTP/1.1" 200 -
2025-07-12 13:52:19,037 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:19] "GET /api/role HTTP/1.1" 200 -
2025-07-12 13:52:22,941 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:22] "POST /api/user-level HTTP/1.1" 200 -
2025-07-12 13:52:23,534 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:23] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 13:52:27,093 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:27] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:52:30,317 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 13:52:30,317 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: Hello'}], 'temperature': 0.3}
2025-07-12 13:52:30,324 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 13:52:34,895 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 13:52:34,898 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:34] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 13:52:34,934 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:34] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:52:35,514 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:52:35] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:53:59,557 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 13:53:59,558 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: What is the difference between dass and das'}], 'temperature': 0.3}
2025-07-12 13:53:59,568 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 13:54:10,001 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 13:54:10,022 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:54:10] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 13:54:10,167 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:54:10] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:54:10,722 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:54:10] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:55:52,955 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 13:55:53,397 - werkzeug - INFO -  * Restarting with stat
2025-07-12 13:55:55,272 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 13:55:55,275 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 13:56:30,690 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 13:56:30,692 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: hello'}], 'temperature': 0.3}
2025-07-12 13:56:30,706 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 13:56:32,771 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 13:56:32,781 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:56:32] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 13:56:32,839 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:56:32] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:56:33,410 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:56:33] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:58:39,540 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 13:58:39,785 - werkzeug - INFO -  * Restarting with stat
2025-07-12 13:58:40,920 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 13:58:40,921 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 13:59:26,595 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 13:59:26,596 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: hello'}], 'temperature': 0.3}
2025-07-12 13:59:26,605 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 13:59:28,125 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 13:59:28,133 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:59:28] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 13:59:28,194 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:59:28] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:59:28,773 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:59:28] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 13:59:56,004 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:59:56] "GET /api/me HTTP/1.1" 200 -
2025-07-12 13:59:56,008 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:59:56] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 13:59:56,543 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:59:56] "GET /api/role HTTP/1.1" 200 -
2025-07-12 13:59:56,546 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:59:56] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 13:59:57,128 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:59:57] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 13:59:57,793 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 13:59:57] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:00:01,777 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:00:01,778 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: halloooo'}], 'temperature': 0.3}
2025-07-12 14:00:01,782 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:00:05,459 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:00:05,465 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:00:05] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:00:05,508 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:00:05] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:00:06,096 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:00:06] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:02:25,710 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:02:25] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:02:26,246 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:02:26] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:02:43,431 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:02:43] "GET /api/me HTTP/1.1" 200 -
2025-07-12 14:02:43,433 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:02:43] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:02:43,971 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:02:43] "GET /api/role HTTP/1.1" 200 -
2025-07-12 14:02:43,981 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:02:43] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:02:44,546 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:02:44] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:02:44,790 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:02:44] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:02:48,310 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:02:48,310 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: hello'}], 'temperature': 0.3}
2025-07-12 14:02:48,314 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:02:49,264 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:02:49,270 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:02:49] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:02:49,308 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:02:49] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:02:49,879 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:02:49] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:03:00,059 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:03:00] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:06:03,665 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:06:03] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:06:19,168 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:06:19] "GET /api/me HTTP/1.1" 200 -
2025-07-12 14:06:19,172 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:06:19] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:06:19,720 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:06:19] "GET /api/role HTTP/1.1" 200 -
2025-07-12 14:06:19,721 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:06:19] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:06:20,297 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:06:20] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:06:20,961 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:06:20] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:06:25,706 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:06:25,706 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: test'}], 'temperature': 0.3}
2025-07-12 14:06:25,715 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:06:34,995 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:06:35,011 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:06:35] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:06:35,082 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:06:35] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:06:35,618 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:06:35] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:08:05,508 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/misc_routes.py', reloading
2025-07-12 14:08:05,900 - werkzeug - INFO -  * Restarting with stat
2025-07-12 14:08:06,937 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 14:08:06,938 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 14:08:23,874 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:08:23,875 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: yes show me a test'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:08:23,890 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:08:24,654 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:08:27,081 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:08:27] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:08:27,176 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:08:27] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:08:27,731 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:08:27] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:09:26,825 - werkzeug - INFO -  * Detected change in '/app/src/routes/ai/helpers/misc_helpers.py', reloading
2025-07-12 14:09:27,050 - werkzeug - INFO -  * Restarting with stat
2025-07-12 14:09:28,054 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 14:09:28,054 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 14:09:56,221 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:09:56] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:09:58,127 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:09:58] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:09:58,680 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:09:58] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:10:22,210 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:10:22] "GET /api/me HTTP/1.1" 200 -
2025-07-12 14:10:22,217 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:10:22] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:10:22,664 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:10:22] "GET /api/role HTTP/1.1" 200 -
2025-07-12 14:10:22,669 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:10:22] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:10:23,237 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:10:23] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:10:23,795 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:10:23] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:10:29,188 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:10:29,188 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: hello'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:10:29,202 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:10:29,695 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:10:29,698 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:10:29] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:10:33,144 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:10:33] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:10:33,721 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:10:33] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:11:58,929 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:11:58] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:12:01,102 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:12:01] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:12:02,126 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:12:02] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:12:09,144 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:12:09,146 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: hello'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:12:09,150 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:12:09,464 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:12:09,466 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:12:09] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:12:10,950 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:12:10] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:12:11,556 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:12:11] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:12:28,045 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:12:28,046 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: hello, how are you?'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:12:28,050 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:12:28,462 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:12:28,465 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:12:28] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:12:29,099 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:12:29] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:12:29,674 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:12:29] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:13:16,183 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:13:16] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:13:19,510 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:13:19] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:13:20,136 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:13:20] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:13:45,824 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:13:45] "GET /api/me HTTP/1.1" 200 -
2025-07-12 14:13:45,827 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:13:45] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:13:46,379 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:13:46] "GET /api/role HTTP/1.1" 200 -
2025-07-12 14:13:46,384 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:13:46] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:13:46,958 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:13:46] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:14:54,762 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:14:54] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:14:58,954 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:14:58,954 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: soo hello'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:14:58,964 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:15:04,018 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:15:04,022 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:15:04] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:15:05,781 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:15:05] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:15:06,358 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:15:06] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:15:28,531 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:15:28,533 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: hmm good question, what is the diffeence between sein und bin?'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:15:28,537 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:15:28,813 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:15:28,819 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:15:28] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:15:33,355 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:15:33] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:15:33,939 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:15:33] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:16:29,380 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:16:29] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:17:47,951 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:17:47] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:17:48,487 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:17:48] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:17:58,134 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:17:58,136 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: okay next test'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:17:58,140 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:17:59,383 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:17:59,387 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:17:59] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:18:06,708 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:18:06] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:18:07,283 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:18:07] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:19:09,605 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:19:09] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:19:12,521 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:19:12] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:19:13,083 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:19:13] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:19:23,677 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:19:23,678 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: joo wassup'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:19:23,686 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:19:24,067 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:19:24,069 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:19:24] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:19:27,050 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:19:27] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:19:27,541 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:19:27] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:20:02,877 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:20:02,878 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: create me a table, with der die das, dem, ....'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:20:02,882 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:20:03,131 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:20:03,134 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:20:03] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:20:09,060 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:20:09] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:20:09,642 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:20:09] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:22:50,382 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:22:50] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:22:52,411 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:22:52] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:22:52,963 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:22:52] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:23:14,643 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:23:14] "GET /api/me HTTP/1.1" 200 -
2025-07-12 14:23:14,646 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:23:14] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:23:15,164 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:23:15] "GET /api/role HTTP/1.1" 200 -
2025-07-12 14:23:15,176 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:23:15] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:23:15,740 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:23:15] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:23:16,743 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:23:16] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:23:22,895 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:23:22,895 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: helloooo'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:23:22,898 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:23:23,201 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:23:23,205 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:23:23] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:23:24,330 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:23:24] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:23:24,916 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:23:24] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:23:36,250 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:23:36,251 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: what is the difference between dasss and das'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:23:36,254 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:23:36,614 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:23:36,617 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:23:36] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:23:48,794 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:23:48] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:23:49,373 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:23:49] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:25:05,055 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:25:05] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:25:07,501 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:25:07] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:25:08,216 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:25:08] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:25:29,922 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:25:29,923 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: create me exercises'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:25:29,929 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:25:30,384 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:25:30,387 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:25:30] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:25:33,421 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:25:33] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:25:34,002 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:25:34] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:27:17,158 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:27:17] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:27:19,677 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:27:19] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:27:20,223 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:27:20] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:28:53,162 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:28:53,163 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: what are my weaknesses?'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:28:53,167 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:28:53,423 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:28:53,426 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:28:53] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:29:01,303 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:29:01] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:29:01,892 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:29:01] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:31:36,564 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:31:36,565 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: what are my biggest weaknesseds?'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:31:36,571 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:31:36,993 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:31:36,997 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:31:36] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:31:48,829 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:31:48] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:31:49,409 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:31:49] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:33:28,666 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:33:28] "GET /api/me HTTP/1.1" 200 -
2025-07-12 14:33:28,669 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:33:28] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:33:29,078 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:33:29] "GET /api/role HTTP/1.1" 200 -
2025-07-12 14:33:29,082 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:33:29] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:33:29,632 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:33:29] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 14:33:33,584 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:33:33] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:33:43,941 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:33:43,944 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: what are my biggest weaknesses?'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:33:43,949 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:33:44,324 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:33:44,327 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:33:44] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:33:55,188 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:33:55] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:33:55,763 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:33:55] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:36:10,696 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:36:10] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:36:11,132 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:36:11] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:36:54,852 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:36:54] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:37:05,174 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:37:05,177 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: what are my biggest weaknesses?'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:37:05,182 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:37:09,338 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:37:09,339 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:37:09] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:37:31,375 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:37:31] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:37:31,950 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:37:31] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:40:05,688 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:40:05] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:40:09,326 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:40:09] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:40:09,975 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:40:09] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:41:05,251 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 14:41:05,255 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 0. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: wjat are my biggest weaknesses'}], 'temperature': 0.3, 'stream': True}
2025-07-12 14:41:05,258 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 14:41:05,564 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 14:41:05,566 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:41:05] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 14:41:09,502 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:41:09] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 14:41:10,009 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 14:41:10] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 15:05:26,103 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 15:05:26,104 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 15:05:37,899 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:05:37] "GET /api/me HTTP/1.1" 200 -
2025-07-12 15:05:37,902 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:05:37] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 15:05:38,470 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:05:38] "GET /api/role HTTP/1.1" 200 -
2025-07-12 15:05:38,476 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:05:38] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 15:05:39,050 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:05:39] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 15:08:55,858 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:08:55] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 15:09:16,766 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:09:16] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 15:10:05,513 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:10:05] "GET /api/me HTTP/1.1" 200 -
2025-07-12 15:10:05,516 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:10:05] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 15:10:06,088 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:10:06] "GET /api/role HTTP/1.1" 200 -
2025-07-12 15:10:06,091 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:10:06] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 15:10:06,672 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:10:06] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 15:59:46,687 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:59:46] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 15:59:48,303 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 15:59:48] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 15:59:49,496 - routes.ai.training_routes - INFO - Training exercises request from user: ff
2025-07-12 15:59:49,503 - routes.ai.training_routes - INFO - Training request data for user ff: answers_count=0
2025-07-12 15:59:49,503 - routes.ai.training_routes - INFO - User ff has no answers, checking cached exercises
2025-07-12 15:59:49,505 - routes.ai.training_routes - INFO - Generating new training exercises for user ff
2025-07-12 15:59:49,505 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_training_exercises for user ff
2025-07-12 15:59:49,506 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user ff, limit=20
2025-07-12 15:59:49,508 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user ff
2025-07-12 15:59:49,508 - routes.ai.helpers.exercise_helpers - INFO - Detected new user ff, generating two unique blocks with different contexts
2025-07-12 15:59:49,508 - routes.ai.helpers.exercise_helpers - INFO - Generating blocks for new user ff
2025-07-12 15:59:49,508 - routes.ai.helpers.exercise_helpers - INFO - Generating first block for new user ff
2025-07-12 15:59:49,513 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user ff, limit=20
2025-07-12 15:59:49,514 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user ff
2025-07-12 15:59:49,515 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 0 recent questions for user ff
2025-07-12 15:59:49,515 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 15:59:49,515 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 15:59:49,515 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 15:59:49,516 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 15:59:49,516 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 15:59:49,516 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=0
2025-07-12 15:59:49,517 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 15:59:49,518 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 15:59:49,518 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'Your task is to generate new exercises in JSON format. Use provided memory data to tailor difficulty.'}, {'role': 'user', 'content': '\nYou are generating structured grammar and translation exercises for a German learner.\nThe student\'s level is 2/10 (CEFR A2).\nAdjust sentence complexity and vocabulary accordingly.\n\nHere is the required JSON structure — you must follow it **exactly**:\n\n1. Each exercise must include:\n   - `id`: a unique ID like `"ex1"`\n   - `type`: either `"gap-fill"` or `"translation"`\n   - `question`: a string (either a full sentence with a blank depending on the students level, or a translation task with the same conditions, remember to always put a full sentence)\n   - For "gap-fill":\n     - `options`: list of 4 strings, one of them has to be the correct answer, be sure to include the right answer.\n     - `correctAnswer`: the correct string\n   - For "translation":\n     - `correctAnswer`: the correct German translation\n\n 2. The overall JSON must contain:\n   - `lessonId`, `title`, `instructions`, `level`\n   - `exercises`: list of 3 total exercises (mix of both types)\n   - `feedbackPrompt`\n   - `vocabHelp`: list of vocab entries with:\n       - `word`, `meaning`\n\n⚠️ Do not change field names or format.\n⚠️ Do not include other types like "sentenceCreation", "prompt", or "hint".\n⚠️ All keys must match the example exactly.\n⚠️ Do not repeat or reuse any example sentences from previous exercises or memory.\n⚠️ **NEVER repeat any of these questions the user has seen recently:**\n\n\n⚠️ Always generate new, unique sentences that were not seen in earlier exercises.\n\nHere is an example structure for reference (do not reuse content!):\n{\n  "lessonId": "dynamic-ai-lesson",\n  "title": "AI Generated Exercises",\n  "instructions": "Fill in the blanks or translate the sentences.",\n  "level": "A2",\n  "exercises": [],\n  "feedbackPrompt": "",\n  "vocabHelp": []\n}\n\nHere is the learner’s vocabulary list (prioritize vocab with next_repeat due soon, include one or two per sentence, try to teach the learner new words based):\n[]\n\nHere is the topic memory (form the exercises to train the weaknesses seen in the entries:):\n[\n  {\n    "grammar": "personal pronouns",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "sein",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "haben",\n    "topic": null,\n    "skill_type": "initial"\n  }\n]\nCreate new sentences with new words and topics.\nCreate a new exercise block using the **same structure** and **same field names**, but adapt the **content** to the learner’s weaknesses and level.\n'}], 'temperature': 0.7}
2025-07-12 15:59:49,565 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:10:50,932 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:10:50,943 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 16:10:50,944 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1078 characters
2025-07-12 16:10:50,945 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 16:10:50,945 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 16:10:50,946 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user ff
2025-07-12 16:10:50,947 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user ff
2025-07-12 16:10:50,947 - routes.ai.helpers.exercise_helpers - INFO - Generated first block for new user ff with 3 exercises
2025-07-12 16:10:50,947 - routes.ai.helpers.exercise_helpers - INFO - Extracted 3 questions from first block for new user ff
2025-07-12 16:10:50,948 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user ff with 3 new questions, limit=20
2025-07-12 16:10:50,948 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user ff, limit=20
2025-07-12 16:10:50,952 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user ff
2025-07-12 16:10:50,952 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user ff: 3 total questions
2025-07-12 16:10:50,961 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user ff
2025-07-12 16:10:50,961 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user ff
2025-07-12 16:10:50,963 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for ff after after updating exercise history: {
  "username": "ff",
  "exercises": null,
  "next_exercises": null,
  "exercises_updated_at": null,
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"____ bist mein Freund.\", \"She is a teacher.\", \"Ich ____ einen Bruder.\"]"
}
2025-07-12 16:10:51,066 - routes.ai.helpers.exercise_helpers - INFO - Generating second block for new user ff with different context
2025-07-12 16:10:51,067 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block with variation for new user ff with 3 exclude questions
2025-07-12 16:10:51,072 - routes.ai.helpers.exercise_helpers - INFO - Using 3 exclude questions as recent questions for variation
2025-07-12 16:10:51,072 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 16:10:51,072 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 16:10:51,072 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 16:10:51,073 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 16:10:51,073 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 16:10:51,073 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 16:10:51,074 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 16:10:51,074 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:10:51,074 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'Your task is to generate new exercises in JSON format. Use provided memory data to tailor difficulty.'}, {'role': 'user', 'content': '\nYou are generating structured grammar and translation exercises for a German learner.\nThe student\'s level is 2/10 (CEFR A2).\nAdjust sentence complexity and vocabulary accordingly.\n\nHere is the required JSON structure — you must follow it **exactly**:\n\n1. Each exercise must include:\n   - `id`: a unique ID like `"ex1"`\n   - `type`: either `"gap-fill"` or `"translation"`\n   - `question`: a string (either a full sentence with a blank depending on the students level, or a translation task with the same conditions, remember to always put a full sentence)\n   - For "gap-fill":\n     - `options`: list of 4 strings, one of them has to be the correct answer, be sure to include the right answer.\n     - `correctAnswer`: the correct string\n   - For "translation":\n     - `correctAnswer`: the correct German translation\n\n 2. The overall JSON must contain:\n   - `lessonId`, `title`, `instructions`, `level`\n   - `exercises`: list of 3 total exercises (mix of both types)\n   - `feedbackPrompt`\n   - `vocabHelp`: list of vocab entries with:\n       - `word`, `meaning`\n\n⚠️ Do not change field names or format.\n⚠️ Do not include other types like "sentenceCreation", "prompt", or "hint".\n⚠️ All keys must match the example exactly.\n⚠️ Do not repeat or reuse any example sentences from previous exercises or memory.\n⚠️ **NEVER repeat any of these questions the user has seen recently:**\n____ bist mein Freund.\nShe is a teacher.\nIch ____ einen Bruder.\n\n⚠️ Always generate new, unique sentences that were not seen in earlier exercises.\n\nHere is an example structure for reference (do not reuse content!):\n{\n  "lessonId": "dynamic-ai-lesson",\n  "title": "AI Generated Exercises",\n  "instructions": "Fill in the blanks or translate the sentences.",\n  "level": "A2",\n  "exercises": [],\n  "feedbackPrompt": "",\n  "vocabHelp": []\n}\n\nHere is the learner’s vocabulary list (prioritize vocab with next_repeat due soon, include one or two per sentence, try to teach the learner new words based):\n[]\n\nHere is the topic memory (form the exercises to train the weaknesses seen in the entries:):\n[\n  {\n    "grammar": "personal pronouns",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "sein",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "haben",\n    "topic": null,\n    "skill_type": "initial"\n  }\n]\nCreate new sentences with new words and topics.\nCreate a new exercise block using the **same structure** and **same field names**, but adapt the **content** to the learner’s weaknesses and level.\n'}], 'temperature': 0.7}
2025-07-12 16:10:51,076 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:10:57,740 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:10:57,743 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 16:10:57,743 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 987 characters
2025-07-12 16:10:57,744 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 16:10:57,744 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 16:10:57,746 - routes.ai.helpers.exercise_helpers - INFO - Generated 3 exercises in variation block for new user ff
2025-07-12 16:10:57,746 - routes.ai.helpers.exercise_helpers - INFO - Successfully created AI block with variation for new user ff: 3 exercises
2025-07-12 16:10:57,746 - routes.ai.helpers.exercise_helpers - INFO - Generated second block for new user ff with 3 exercises
2025-07-12 16:10:57,747 - routes.ai.helpers.exercise_helpers - INFO - After filtering duplicates for new user ff: 3 exercises remain
2025-07-12 16:10:57,747 - routes.ai.helpers.exercise_helpers - INFO - Final second block for new user ff: 3 exercises
2025-07-12 16:10:57,747 - routes.ai.helpers.exercise_helpers - INFO - Storing exercise blocks for new user ff
2025-07-12 16:10:57,755 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for ff after after storing both blocks: {
  "username": "ff",
  "exercises": "{\"lessonId\": \"dynamic-ai-lesson\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"____ bist mein Freund.\", \"explanation\": \"No explanation.\", \"options\": [\"Du\", \"Er\", \"Sie\", \"Wir\"]}, {\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"She is a teacher.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich ____ einen Bruder.\", \"explanation\": \"No explanation.\", \"options\": [\"hat\", \"hast\", \"haben\", \"habe\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you notice any patterns or specific areas where you felt confident or struggled?\", \"vocabHelp\": [{\"word\": \"einen Bruder\", \"meaning\": \"a brother\"}, {\"word\": \"Lehrerin\", \"meaning\": \"teacher (female)\"}, {\"word\": \"Freund\", \"meaning\": \"friend (male)\"}]}",
  "next_exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"He has a cat.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"____ habe einen Hund.\", \"explanation\": \"No explanation.\", \"options\": [\"Ich\", \"Du\", \"Er\", \"Sie\"]}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"____ bist eine Sch\\u00fclerin.\", \"explanation\": \"No explanation.\", \"options\": [\"Ich\", \"Du\", \"Er\", \"Sie\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you have any difficulties?\", \"vocabHelp\": [{\"word\": \"Hund\", \"meaning\": \"dog\"}, {\"word\": \"Katze\", \"meaning\": \"cat\"}, {\"word\": \"Sch\\u00fclerin\", \"meaning\": \"female student\"}]}",
  "exercises_updated_at": "2025-07-12T16:10:57.747697",
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"____ bist mein Freund.\", \"She is a teacher.\", \"Ich ____ einen Bruder.\"]"
}
2025-07-12 16:10:57,756 - routes.ai.helpers.exercise_helpers - INFO - Successfully completed generate_training_exercises for new user ff
2025-07-12 16:10:57,756 - routes.ai.training_routes - INFO - Returning new training exercises for user ff
2025-07-12 16:10:57,758 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:10:57] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 16:10:57,814 - routes.ai.training_routes - INFO - Training exercises request from user: ff
2025-07-12 16:10:57,815 - routes.ai.training_routes - INFO - Training request data for user ff: answers_count=0
2025-07-12 16:10:57,815 - routes.ai.training_routes - INFO - User ff has no answers, checking cached exercises
2025-07-12 16:10:57,817 - routes.ai.training_routes - INFO - Found cached exercises for user ff
2025-07-12 16:10:57,817 - routes.ai.training_routes - INFO - Returning cached exercises for user ff
2025-07-12 16:10:57,817 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:10:57] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 16:11:31,176 - routes.ai.exercise_routes - INFO - Exercise submission request for user ff, block training
2025-07-12 16:11:31,178 - routes.ai.exercise_routes - INFO - Received submission data for user ff: {
  "answers": {
    "ex3": "Er",
    "ex2": "Sie sein ein Lehrer.",
    "ex1": "habe"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Du",
          "Er",
          "Sie",
          "Wir"
        ],
        "question": "____ bist mein Freund.",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is a teacher.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "hat",
          "hast",
          "haben",
          "habe"
        ],
        "question": "Ich ____ einen Bruder.",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "a brother",
        "word": "einen Bruder"
      },
      {
        "meaning": "teacher (female)",
        "word": "Lehrerin"
      },
      {
        "meaning": "friend (male)",
        "word": "Freund"
      }
    ]
  }
}
2025-07-12 16:11:31,178 - routes.ai.exercise_routes - INFO - Parsed submission for user ff: 3 exercises, 3 answers
2025-07-12 16:11:31,178 - routes.ai.exercise_routes - INFO - Evaluating exercises for user ff
2025-07-12 16:11:31,179 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-12 16:11:31,179 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-12 16:11:31,179 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-12 16:11:31,180 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-12 16:11:31,180 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:31,181 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a strict German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': 'Evaluate these answers for a German exercise. Return JSON with \'pass\' (true/false) and a \'results\' list. Each result must include \'id\' and \'correct_answer\'. Mark pass true only if all answers are fully correct.\n[{"id": "ex3", "question": "____ bist mein Freund.", "type": "gap-fill", "answer": "Er"}, {"id": "ex2", "question": "She is a teacher.", "type": "translation", "answer": "Sie sein ein Lehrer."}, {"id": "ex1", "question": "Ich ____ einen Bruder.", "type": "gap-fill", "answer": "habe"}]'}], 'temperature': 0.3}
2025-07-12 16:11:31,193 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:32,555 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:32,558 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-12 16:11:32,559 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 255 characters
2025-07-12 16:11:32,560 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-12 16:11:32,561 - routes.ai.exercise_routes - INFO - Evaluation successful for user ff
2025-07-12 16:11:32,564 - routes.ai.exercise_routes - INFO - Summary for user ff: {'correct': 2, 'total': 3, 'mistakes': [{'question': 'She is a teacher.', 'your_answer': 'Sie sein ein Lehrer.', 'correct_answer': 'Sie ist eine Lehrerin.'}]}
2025-07-12 16:11:32,564 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user ff
2025-07-12 16:11:32,572 - routes.ai.exercise_routes - INFO - Got 0 vocab and 3 topic entries for user ff
2025-07-12 16:11:32,573 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:32,573 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a strict German teacher, answer in english only, and skip any small talk, focus on improvement only'}, {'role': 'user', 'content': "You are a helpful German teacher writing a very short feedback message based on this student's test result.\n\nCorrect: 2 out of 3\n\nMistakes:\nQ: She is a teacher. | Your: Sie sein ein Lehrer. | Correct: Sie ist eine Lehrerin.\n\nRepeated grammar issues: None\n\nVocabulary used: None\n\n"}], 'temperature': 0.3}
2025-07-12 16:11:32,575 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:34,193 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:34,195 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user ff
2025-07-12 16:11:34,195 - routes.ai.exercise_routes - INFO - Saving exercise submission for user ff
2025-07-12 16:11:34,196 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T16:11:34.196204",
  "event_type": "submission_start",
  "username": "ff",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex3": "Er",
      "ex2": "Sie sein ein Lehrer.",
      "ex1": "habe"
    }
  }
}
2025-07-12 16:11:34,198 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user ff, block training
2025-07-12 16:11:34,199 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user ff
2025-07-12 16:11:34,199 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user ff, block training, answers_count=3
2025-07-12 16:11:34,201 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user ff
2025-07-12 16:11:34,201 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user ff
2025-07-12 16:11:34,201 - routes.ai.exercise_routes - INFO - Exercise submission completed for user ff, passed=False
2025-07-12 16:11:34,202 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user ff: correct=1, quality=5
2025-07-12 16:11:34,203 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user ff, limit=20
2025-07-12 16:11:34,203 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:34,204 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:34,205 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': 'Give up to 3 alternative ways to say the following sentence in German, with the same meaning and register. Return only a JSON array of strings, no explanations, no extra text, no markdown, no labels.\nSentence: habe'}], 'temperature': 0.3}
2025-07-12 16:11:34,206 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': '\nYou are a helpful German teacher. Identify grammar topics used in the following sentence:\n\n"____ bist mein Freund. er"\n\nReturn only a JSON list of strings such as:\n["modal verb", "pronoun", "subordinating conjunction"]\n'}], 'temperature': 0.3}
2025-07-12 16:11:34,208 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:34,211 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:34,219 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user ff
2025-07-12 16:11:34,220 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user ff
2025-07-12 16:11:34,220 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user ff
2025-07-12 16:11:34,229 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user ff, limit=20
2025-07-12 16:11:34,236 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user ff
2025-07-12 16:11:34,236 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user ff
2025-07-12 16:11:34,237 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 16:11:34,238 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 16:11:34,238 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 16:11:34,239 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 16:11:34,240 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 16:11:34,240 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 16:11:34,240 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 16:11:34,241 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:34,241 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'Your task is to generate new exercises in JSON format. Use provided memory data to tailor difficulty.'}, {'role': 'user', 'content': '\nYou are generating structured grammar and translation exercises for a German learner.\nThe student\'s level is 2/10 (CEFR A2).\nAdjust sentence complexity and vocabulary accordingly.\n\nHere is the required JSON structure — you must follow it **exactly**:\n\n1. Each exercise must include:\n   - `id`: a unique ID like `"ex1"`\n   - `type`: either `"gap-fill"` or `"translation"`\n   - `question`: a string (either a full sentence with a blank depending on the students level, or a translation task with the same conditions, remember to always put a full sentence)\n   - For "gap-fill":\n     - `options`: list of 4 strings, one of them has to be the correct answer, be sure to include the right answer.\n     - `correctAnswer`: the correct string\n   - For "translation":\n     - `correctAnswer`: the correct German translation\n\n 2. The overall JSON must contain:\n   - `lessonId`, `title`, `instructions`, `level`\n   - `exercises`: list of 3 total exercises (mix of both types)\n   - `feedbackPrompt`\n   - `vocabHelp`: list of vocab entries with:\n       - `word`, `meaning`\n\n⚠️ Do not change field names or format.\n⚠️ Do not include other types like "sentenceCreation", "prompt", or "hint".\n⚠️ All keys must match the example exactly.\n⚠️ Do not repeat or reuse any example sentences from previous exercises or memory.\n⚠️ **NEVER repeat any of these questions the user has seen recently:**\n____ bist mein Freund.\nShe is a teacher.\nIch ____ einen Bruder.\n\n⚠️ Always generate new, unique sentences that were not seen in earlier exercises.\n\nHere is an example structure for reference (do not reuse content!):\n{\n  "lessonId": "dynamic-ai-lesson",\n  "title": "AI Generated Exercises",\n  "instructions": "Fill in the blanks or translate the sentences.",\n  "level": "A2",\n  "exercises": [],\n  "feedbackPrompt": "",\n  "vocabHelp": []\n}\n\nHere is the learner’s vocabulary list (prioritize vocab with next_repeat due soon, include one or two per sentence, try to teach the learner new words based):\n[]\n\nHere is the topic memory (form the exercises to train the weaknesses seen in the entries:):\n[\n  {\n    "grammar": "personal pronouns",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "sein",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "haben",\n    "topic": null,\n    "skill_type": "initial"\n  }\n]\nCreate new sentences with new words and topics.\nCreate a new exercise block using the **same structure** and **same field names**, but adapt the **content** to the learner’s weaknesses and level.\n'}], 'temperature': 0.7}
2025-07-12 16:11:34,242 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:34,913 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:34,914 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:34,917 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:34,921 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': "Given the following exercise, user answer, and correct answer, give a short explanation (1-2 sentences) for a German learner. If the user's answer is correct, explain why. If it's wrong, explain the mistake.\nExercise: Ich ____ einen Bruder.\nUser answer: habe\nCorrect answer: habe\nReply in English."}], 'temperature': 0.3}
2025-07-12 16:11:34,920 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['capitalization rules', 'personal pronoun', 'sentence structure', 'verb conjugation (sein)']
2025-07-12 16:11:34,923 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user ff, feature=capitalization rules, skill=gap-fill
2025-07-12 16:11:34,923 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:34,944 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user ff, feature=personal pronoun, skill=gap-fill
2025-07-12 16:11:34,957 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user ff, feature=sentence structure, skill=gap-fill
2025-07-12 16:11:34,969 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user ff, feature=verb conjugation (sein), skill=gap-fill
2025-07-12 16:11:34,980 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 4 words from exercise ex3 for user ff
2025-07-12 16:11:34,982 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:34,982 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'bist'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 16:11:34,983 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:36,039 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:36,042 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:36,042 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': 'Give up to 3 alternative ways to say the following sentence in German, with the same meaning and register. Return only a JSON array of strings, no explanations, no extra text, no markdown, no labels.\nSentence: Sie ist eine Lehrerin.'}], 'temperature': 0.3}
2025-07-12 16:11:36,045 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:36,755 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:36,758 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:36,759 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': "Given the following exercise, user answer, and correct answer, give a short explanation (1-2 sentences) for a German learner. If the user's answer is correct, explain why. If it's wrong, explain the mistake.\nExercise: She is a teacher.\nUser answer: Sie sein ein Lehrer.\nCorrect answer: Sie ist eine Lehrerin.\nReply in English."}], 'temperature': 0.3}
2025-07-12 16:11:36,762 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:36,887 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:36,903 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:36,903 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'mein'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 16:11:36,904 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:38,599 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:38,601 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 16:11:38,602 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 987 characters
2025-07-12 16:11:38,602 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 16:11:38,603 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 16:11:38,604 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user ff
2025-07-12 16:11:38,605 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user ff
2025-07-12 16:11:38,606 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user ff: True
2025-07-12 16:11:38,606 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user ff to avoid duplicates
2025-07-12 16:11:38,607 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user ff
2025-07-12 16:11:38,607 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user ff: 3 exercises
2025-07-12 16:11:38,608 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user ff
2025-07-12 16:11:38,616 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user ff
2025-07-12 16:11:38,732 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:38,735 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:38,735 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': 'Give up to 3 alternative ways to say the following sentence in German, with the same meaning and register. Return only a JSON array of strings, no explanations, no extra text, no markdown, no labels.\nSentence: Er'}], 'temperature': 0.3}
2025-07-12 16:11:38,738 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:38,938 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:38,955 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:38,956 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'Freund'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 16:11:38,957 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:39,355 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:39,358 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:39,361 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': "Given the following exercise, user answer, and correct answer, give a short explanation (1-2 sentences) for a German learner. If the user's answer is correct, explain why. If it's wrong, explain the mistake.\nExercise: ____ bist mein Freund.\nUser answer: Er\nCorrect answer: Er\nReply in English."}], 'temperature': 0.3}
2025-07-12 16:11:39,364 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:40,032 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:40,056 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:40,056 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'er'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 16:11:40,057 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:40,750 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:40,756 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:11:40] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-12 16:11:40,803 - routes.ai.training_routes - INFO - Training exercises request from user: ff
2025-07-12 16:11:40,803 - routes.ai.training_routes - INFO - Training request data for user ff: answers_count=3
2025-07-12 16:11:40,804 - routes.ai.training_routes - INFO - User ff has answers, checking cached next exercises
2025-07-12 16:11:40,805 - routes.ai.training_routes - INFO - Found cached next exercises for user ff
2025-07-12 16:11:40,806 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user ff
2025-07-12 16:11:40,806 - routes.ai.training_routes - INFO - Storing exercises for user ff
2025-07-12 16:11:40,811 - routes.ai.training_routes - INFO - Running prefetch next exercises for user ff
2025-07-12 16:11:40,811 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user ff
2025-07-12 16:11:40,811 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user ff
2025-07-12 16:11:40,812 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user ff, limit=20
2025-07-12 16:11:40,812 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:11:40] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 16:11:40,815 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user ff
2025-07-12 16:11:40,816 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user ff
2025-07-12 16:11:40,817 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user ff
2025-07-12 16:11:40,827 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user ff, limit=20
2025-07-12 16:11:40,830 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user ff
2025-07-12 16:11:40,831 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user ff
2025-07-12 16:11:40,831 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=3, topic_count=3
2025-07-12 16:11:40,831 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 16:11:40,831 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 16:11:40,832 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 16:11:40,832 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 16:11:40,832 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 16:11:40,836 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 16:11:40,836 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:40,836 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'Your task is to generate new exercises in JSON format. Use provided memory data to tailor difficulty.'}, {'role': 'user', 'content': '\nYou are generating structured grammar and translation exercises for a German learner.\nThe student\'s level is 2/10 (CEFR A2).\nAdjust sentence complexity and vocabulary accordingly.\n\nHere is the required JSON structure — you must follow it **exactly**:\n\n1. Each exercise must include:\n   - `id`: a unique ID like `"ex1"`\n   - `type`: either `"gap-fill"` or `"translation"`\n   - `question`: a string (either a full sentence with a blank depending on the students level, or a translation task with the same conditions, remember to always put a full sentence)\n   - For "gap-fill":\n     - `options`: list of 4 strings, one of them has to be the correct answer, be sure to include the right answer.\n     - `correctAnswer`: the correct string\n   - For "translation":\n     - `correctAnswer`: the correct German translation\n\n 2. The overall JSON must contain:\n   - `lessonId`, `title`, `instructions`, `level`\n   - `exercises`: list of 3 total exercises (mix of both types)\n   - `feedbackPrompt`\n   - `vocabHelp`: list of vocab entries with:\n       - `word`, `meaning`\n\n⚠️ Do not change field names or format.\n⚠️ Do not include other types like "sentenceCreation", "prompt", or "hint".\n⚠️ All keys must match the example exactly.\n⚠️ Do not repeat or reuse any example sentences from previous exercises or memory.\n⚠️ **NEVER repeat any of these questions the user has seen recently:**\n____ bist mein Freund.\nShe is a teacher.\nIch ____ einen Bruder.\n\n⚠️ Always generate new, unique sentences that were not seen in earlier exercises.\n\nHere is an example structure for reference (do not reuse content!):\n{\n  "lessonId": "dynamic-ai-lesson",\n  "title": "AI Generated Exercises",\n  "instructions": "Fill in the blanks or translate the sentences.",\n  "level": "A2",\n  "exercises": [],\n  "feedbackPrompt": "",\n  "vocabHelp": []\n}\n\nHere is the learner’s vocabulary list (prioritize vocab with next_repeat due soon, include one or two per sentence, try to teach the learner new words based):\n[]\n\nHere is the topic memory (form the exercises to train the weaknesses seen in the entries:):\n[\n  {\n    "grammar": "personal pronouns",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "sein",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "haben",\n    "topic": null,\n    "skill_type": "initial"\n  }\n]\nCreate new sentences with new words and topics.\nCreate a new exercise block using the **same structure** and **same field names**, but adapt the **content** to the learner’s weaknesses and level.\n'}], 'temperature': 0.7}
2025-07-12 16:11:40,837 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:41,310 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:41,329 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user ff: correct=0, quality=2
2025-07-12 16:11:41,330 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:41,330 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': '\nYou are a helpful German teacher. Identify grammar topics used in the following sentence:\n\n"She is a teacher. sie ist eine lehrerin."\n\nReturn only a JSON list of strings such as:\n["modal verb", "pronoun", "subordinating conjunction"]\n'}], 'temperature': 0.3}
2025-07-12 16:11:41,332 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:42,010 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:42,147 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['definite article', 'indefinite article', 'noun', 'personal pronoun', 'present tense']
2025-07-12 16:11:42,150 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user ff, feature=definite article, skill=translation
2025-07-12 16:11:42,163 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user ff, feature=indefinite article, skill=translation
2025-07-12 16:11:42,194 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user ff, feature=noun, skill=translation
2025-07-12 16:11:42,235 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user ff, feature=personal pronoun, skill=translation
2025-07-12 16:11:42,246 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user ff, feature=present tense, skill=translation
2025-07-12 16:11:42,251 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex2 for user ff
2025-07-12 16:11:42,253 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:42,253 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'sie'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 16:11:42,254 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:44,132 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:44,134 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 16:11:44,135 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 986 characters
2025-07-12 16:11:44,135 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 16:11:44,136 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 16:11:44,138 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user ff
2025-07-12 16:11:44,139 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user ff
2025-07-12 16:11:44,139 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user ff: True
2025-07-12 16:11:44,140 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user ff to avoid duplicates
2025-07-12 16:11:44,140 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user ff
2025-07-12 16:11:44,140 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user ff: 3 exercises
2025-07-12 16:11:44,141 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user ff
2025-07-12 16:11:44,150 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user ff
2025-07-12 16:11:44,437 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:44,454 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:44,455 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'ist'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 16:11:44,456 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:45,869 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:45,887 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:45,888 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'is'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 16:11:45,889 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:47,098 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:47,114 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:47,115 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'She'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 16:11:47,117 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:48,345 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:48,374 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:48,375 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'lehrerin'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 16:11:48,376 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:49,965 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:49,994 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:49,994 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'teacher'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 16:11:49,997 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:50,887 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:50,906 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user ff: correct=1, quality=5
2025-07-12 16:11:50,906 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:50,907 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': '\nYou are a helpful German teacher. Identify grammar topics used in the following sentence:\n\n"Ich ____ einen Bruder. habe"\n\nReturn only a JSON list of strings such as:\n["modal verb", "pronoun", "subordinating conjunction"]\n'}], 'temperature': 0.3}
2025-07-12 16:11:50,908 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:51,499 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:51,500 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'verb conjugation', 'word order']
2025-07-12 16:11:51,501 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user ff, feature=indefinite article, skill=gap-fill
2025-07-12 16:11:51,514 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user ff, feature=verb conjugation, skill=gap-fill
2025-07-12 16:11:51,523 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user ff, feature=word order, skill=gap-fill
2025-07-12 16:11:51,532 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 3 words from exercise ex1 for user ff
2025-07-12 16:11:51,534 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:51,534 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'Bruder'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 16:11:51,542 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:52,902 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:52,921 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:52,922 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'habe'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 16:11:52,924 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:54,499 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:54,526 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:54,527 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'Ich'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 16:11:54,528 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:55,395 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:11:55,421 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user ff: 12 results
2025-07-12 16:11:55,421 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user ff
2025-07-12 16:11:55,424 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user ff, block training
2025-07-12 16:11:55,428 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user ff with 3 new questions
2025-07-12 16:11:55,428 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user ff with 3 new questions, limit=20
2025-07-12 16:11:55,428 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user ff, limit=20
2025-07-12 16:11:55,429 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user ff
2025-07-12 16:11:55,429 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user ff: 6 total questions
2025-07-12 16:11:55,434 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user ff
2025-07-12 16:11:55,434 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user ff
2025-07-12 16:11:55,434 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user ff
2025-07-12 16:11:55,434 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user ff
2025-07-12 16:11:55,435 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user ff, limit=20
2025-07-12 16:11:55,436 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T16:11:55.435944",
  "event_type": "submission_complete",
  "username": "ff",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-12 16:11:55,438 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user ff
2025-07-12 16:11:55,438 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user ff
2025-07-12 16:11:55,438 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user ff
2025-07-12 16:11:55,441 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user ff, limit=20
2025-07-12 16:11:55,443 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user ff
2025-07-12 16:11:55,443 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user ff
2025-07-12 16:11:55,444 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=11, topic_count=8
2025-07-12 16:11:55,445 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 16:11:55,445 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 16:11:55,446 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 16:11:55,446 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 16:11:55,447 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-12 16:11:55,448 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 16:11:55,448 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 16:11:55,448 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'Your task is to generate new exercises in JSON format. Use provided memory data to tailor difficulty.'}, {'role': 'user', 'content': '\nYou are generating structured grammar and translation exercises for a German learner.\nThe student\'s level is 2/10 (CEFR A2).\nAdjust sentence complexity and vocabulary accordingly.\n\nHere is the required JSON structure — you must follow it **exactly**:\n\n1. Each exercise must include:\n   - `id`: a unique ID like `"ex1"`\n   - `type`: either `"gap-fill"` or `"translation"`\n   - `question`: a string (either a full sentence with a blank depending on the students level, or a translation task with the same conditions, remember to always put a full sentence)\n   - For "gap-fill":\n     - `options`: list of 4 strings, one of them has to be the correct answer, be sure to include the right answer.\n     - `correctAnswer`: the correct string\n   - For "translation":\n     - `correctAnswer`: the correct German translation\n\n 2. The overall JSON must contain:\n   - `lessonId`, `title`, `instructions`, `level`\n   - `exercises`: list of 3 total exercises (mix of both types)\n   - `feedbackPrompt`\n   - `vocabHelp`: list of vocab entries with:\n       - `word`, `meaning`\n\n⚠️ Do not change field names or format.\n⚠️ Do not include other types like "sentenceCreation", "prompt", or "hint".\n⚠️ All keys must match the example exactly.\n⚠️ Do not repeat or reuse any example sentences from previous exercises or memory.\n⚠️ **NEVER repeat any of these questions the user has seen recently:**\n____ bist mein Freund.\nShe is a teacher.\nIch ____ einen Bruder.\n____ bist mein Freund.\nShe is a teacher.\nIch ____ einen Bruder.\n\n⚠️ Always generate new, unique sentences that were not seen in earlier exercises.\n\nHere is an example structure for reference (do not reuse content!):\n{\n  "lessonId": "dynamic-ai-lesson",\n  "title": "AI Generated Exercises",\n  "instructions": "Fill in the blanks or translate the sentences.",\n  "level": "A2",\n  "exercises": [],\n  "feedbackPrompt": "",\n  "vocabHelp": []\n}\n\nHere is the learner’s vocabulary list (prioritize vocab with next_repeat due soon, include one or two per sentence, try to teach the learner new words based):\n[]\n\nHere is the topic memory (form the exercises to train the weaknesses seen in the entries:):\n[\n  {\n    "grammar": "personal pronouns",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "sein",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "haben",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "definite article",\n    "topic": "work",\n    "skill_type": "translation"\n  },\n  {\n    "grammar": "indefinite article",\n    "topic": "shopping",\n    "skill_type": "translation"\n  }\n]\nCreate new sentences with new words and topics.\nCreate a new exercise block using the **same structure** and **same field names**, but adapt the **content** to the learner’s weaknesses and level.\n'}], 'temperature': 0.7}
2025-07-12 16:11:55,450 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 16:11:57,702 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:11:57] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:12:02,562 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 16:12:02,567 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 16:12:02,567 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 992 characters
2025-07-12 16:12:02,568 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 16:12:02,569 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 16:12:02,570 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user ff
2025-07-12 16:12:02,570 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user ff
2025-07-12 16:12:02,571 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user ff: True
2025-07-12 16:12:02,571 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user ff to avoid duplicates
2025-07-12 16:12:02,572 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user ff
2025-07-12 16:12:02,572 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user ff: 3 exercises
2025-07-12 16:12:02,573 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user ff
2025-07-12 16:12:02,583 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user ff
2025-07-12 16:12:56,370 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:12:56] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 16:12:56,376 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:12:56] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 16:13:18,869 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:13:18] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:16:24,443 - werkzeug - INFO -  * Detected change in '/app/src/utils/spaced_repetition/vocab_utils.py', reloading
2025-07-12 16:16:26,558 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 16:16:26,577 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 16:16:34,221 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:16:34] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 16:16:36,088 - routes.ai.training_routes - INFO - Training exercises request from user: ff
2025-07-12 16:16:36,091 - routes.ai.training_routes - INFO - Training request data for user ff: answers_count=0
2025-07-12 16:16:36,092 - routes.ai.training_routes - INFO - User ff has no answers, checking cached exercises
2025-07-12 16:16:36,094 - routes.ai.training_routes - INFO - Found cached exercises for user ff
2025-07-12 16:16:36,095 - routes.ai.training_routes - INFO - Returning cached exercises for user ff
2025-07-12 16:16:36,096 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:16:36] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 16:16:36,682 - routes.ai.training_routes - INFO - Training exercises request from user: ff
2025-07-12 16:16:36,684 - routes.ai.training_routes - INFO - Training request data for user ff: answers_count=0
2025-07-12 16:16:36,684 - routes.ai.training_routes - INFO - User ff has no answers, checking cached exercises
2025-07-12 16:16:36,687 - routes.ai.training_routes - INFO - Found cached exercises for user ff
2025-07-12 16:16:36,687 - routes.ai.training_routes - INFO - Returning cached exercises for user ff
2025-07-12 16:16:36,689 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:16:36] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 16:16:38,674 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:16:38] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 16:16:38,675 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:16:38] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 16:16:40,512 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:16:40] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:19:29,819 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:19:29] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:20:41,692 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:20:41] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:22:18,367 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:22:18] "GET /api/me HTTP/1.1" 200 -
2025-07-12 16:22:18,376 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:22:18] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:22:18,896 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:22:18] "GET /api/role HTTP/1.1" 200 -
2025-07-12 16:22:18,898 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:22:18] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:22:34,022 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:22:34] "DELETE /api/vocabulary/17 HTTP/1.1" 200 -
2025-07-12 16:22:38,489 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:22:38] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 16:22:41,160 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:22:41] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:23:38,611 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:23:38] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:23:39,425 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:23:39] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:23:42,058 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:23:42] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:25:51,355 - werkzeug - INFO - 172.18.0.2 - - [12/Jul/2025 16:25:51] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:27:51,760 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 16:27:51,761 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 16:27:51,761 - werkzeug - INFO -  * Restarting with stat
2025-07-12 16:27:52,633 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 16:27:52,634 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 16:28:16,499 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:28:16] "GET /api/me HTTP/1.1" 200 -
2025-07-12 16:28:16,502 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:28:16] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:28:17,059 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:28:17] "GET /api/role HTTP/1.1" 200 -
2025-07-12 16:28:17,063 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:28:17] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:30:00,283 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:30:00] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:30:17,801 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:30:17] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 16:31:32,346 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:31:32] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:32:41,488 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:32:41] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:32:46,566 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:32:46] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:32:50,909 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:32:50] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:32:54,993 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:32:54] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:33:01,519 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:33:01] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:33:21,288 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:33:21] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 16:33:21,290 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:33:21] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 16:33:26,433 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:33:26] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 16:34:15,405 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:34:15] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:34:26,907 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:34:26] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:35:48,737 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:35:48] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:35:51,330 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:35:51] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:36:13,238 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:36:13] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:36:20,471 - werkzeug - INFO -  * Detected change in '/app/src/routes/translate.py', reloading
2025-07-12 16:36:20,869 - werkzeug - INFO -  * Restarting with stat
2025-07-12 16:41:55,818 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 16:41:55,819 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 16:41:55,821 - werkzeug - INFO -  * Restarting with stat
2025-07-12 16:41:57,048 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 16:41:57,050 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 16:42:04,386 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:42:04] "GET /api/me HTTP/1.1" 200 -
2025-07-12 16:42:04,396 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:42:04] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:42:04,670 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:42:04] "GET /api/role HTTP/1.1" 200 -
2025-07-12 16:42:04,671 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:42:04] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:42:09,338 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:42:09] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:45:39,338 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 16:45:39,338 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 16:45:39,339 - werkzeug - INFO -  * Restarting with stat
2025-07-12 16:45:40,213 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 16:45:40,216 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 16:50:13,073 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 16:50:13,073 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 16:50:13,074 - werkzeug - INFO -  * Restarting with stat
2025-07-12 16:50:13,939 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 16:50:13,940 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 16:52:09,714 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 16:52:09,714 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 16:52:09,715 - werkzeug - INFO -  * Restarting with stat
2025-07-12 16:52:10,545 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 16:52:10,545 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 16:53:07,762 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-12 16:53:07,762 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-12 16:53:07,762 - werkzeug - INFO -  * Restarting with stat
2025-07-12 16:53:08,630 - werkzeug - WARNING -  * Debugger is active!
2025-07-12 16:53:08,631 - werkzeug - INFO -  * Debugger PIN: 426-268-969
2025-07-12 16:53:28,847 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:53:28] "GET /api/me HTTP/1.1" 200 -
2025-07-12 16:53:28,853 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:53:28] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:53:29,400 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:53:29] "GET /api/role HTTP/1.1" 200 -
2025-07-12 16:53:29,405 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:53:29] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:53:34,866 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:53:34] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:55:09,009 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:55:09] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:55:09,510 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:55:09] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:55:15,168 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:55:15] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:55:43,425 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:55:43] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 16:55:46,795 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:55:46] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:55:47,657 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:55:47] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 16:55:57,588 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:55:57] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 16:57:14,981 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:57:14] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:57:22,369 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:57:22] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:57:57,269 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:57:57] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:57:59,360 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:57:59] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:58:11,645 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:58:11] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 16:58:19,245 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:58:19] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 16:58:22,032 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:58:22] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 16:58:22,033 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 16:58:22] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:00:19,402 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:00:19] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:00:19,403 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:00:19] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:01:02,982 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:01:02] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:01:02,984 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:01:02] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:05:19,707 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:05:19] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:05:23,013 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:05:23] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 17:05:35,592 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:05:35] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:05:38,189 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:05:38] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:05:38,194 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:05:38] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:06:03,610 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:06:03] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:06:03,612 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:06:03] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:07:54,473 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:07:54] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:07:57,373 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:07:57] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:08:06,282 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:08:06] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:08:06,282 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:08:06] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:08:56,710 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:08:56] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:08:59,266 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:08:59] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:08:59,267 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:08:59] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:10:13,532 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:10:13] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:10:13,532 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:10:13] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:10:14,078 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:10:14] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:10:14,080 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:10:14] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:11:36,096 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:11:36] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:11:36,098 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:11:36] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:11:38,751 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:11:38] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:11:38,752 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:11:38] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:11:39,324 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:11:39] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:11:39,329 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:11:39] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:12:39,420 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:12:39] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:12:41,826 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:12:41] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:12:41,831 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:12:41] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:12:48,719 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:12:48] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:12:53,262 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:12:53] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:12:53,262 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:12:53] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:12:57,965 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:12:57] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:13:15,807 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:13:15] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:13:15,808 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:13:15] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:13:42,367 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:13:42] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:14:06,182 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:14:06,183 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': 'Translate and evaluate: Hello | Student: Hallöchen'}], 'temperature': 0.3, 'stream': True}
2025-07-12 17:14:06,203 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:14:06,479 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:14:06,482 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:14:06] "POST /api/translate/stream HTTP/1.1" 200 -
2025-07-12 17:14:07,678 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:14:07,679 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': '\nYou are a helpful German teacher. Identify grammar topics used in the following sentence:\n\n"Here is the translation and evaluation of the greeting:\n\n| English | German | Evaluation |\n|---------|--------|------------|\n| Hello | Hallöchen | The translation is correct. However, "Hallöchen" is a more informal and cute way of saying "Hello". It\'s often used when talking to children or in a very casual setting. A more standard translation would be "Hallo". |"\n\nReturn only a JSON list of strings such as:\n["modal verb", "pronoun", "subordinating conjunction"]\n'}], 'temperature': 0.3}
2025-07-12 17:14:07,681 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:14:08,748 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:14:08,751 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:14:08,752 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': '\nYou are a helpful German teacher. Identify grammar topics used in the following sentence:\n\n"Hallöchen"\n\nReturn only a JSON list of strings such as:\n["modal verb", "pronoun", "subordinating conjunction"]\n'}], 'temperature': 0.3}
2025-07-12 17:14:08,753 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:14:09,254 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:14:09,256 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:14:09,256 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': 'You are a helpful German teacher grading a student\'s translation.\n\nEnglish sentence: \'Hello\'\nReference translation: \'Here is the translation and evaluation of the greeting:\n\n| English | German | Evaluation |\n|---------|--------|------------|\n| Hello | Hallöchen | The translation is correct. However, "Hallöchen" is a more informal and cute way of saying "Hello". It\'s often used when talking to children or in a very casual setting. A more standard translation would be "Hallo". |\'\nStudent translation: \'Hallöchen\'\n\nReturn a JSON object where each grammar topic is a key (all lowercase, spaces only), and its value is an integer from 0 to 5 representing the quality of usage.\n\nFor example:\n{\n  "adjective": 5,\n  "nominative case": 4,\n  "modal verb": 3\n}\n\nTopics: adjective, comparative adjective, conjunction, definite article, diminutive, formal and informal language, indefinite article, informal greeting, noun, preposition, pronoun, sentence structure, verb, vocabulary'}], 'temperature': 0.3}
2025-07-12 17:14:09,258 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:14:10,635 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:14:45,467 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:14:45] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:14:45,468 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:14:45] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:17:49,441 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:17:49] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:17:52,282 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:17:52] "GET /api/topic-weaknesses HTTP/1.1" 200 -
2025-07-12 17:17:52,284 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:17:52] "GET /api/topic-memory HTTP/1.1" 200 -
2025-07-12 17:17:56,277 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:17:56] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:17:59,493 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:17:59] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:19:07,023 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:19:07] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:19:07,505 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:19:07] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:19:19,884 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:19:19] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:20:41,591 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:20:41] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:21:04,805 - routes.ai.training_routes - INFO - Training exercises request from user: ff
2025-07-12 17:21:04,808 - routes.ai.training_routes - INFO - Training request data for user ff: answers_count=0
2025-07-12 17:21:04,808 - routes.ai.training_routes - INFO - User ff has no answers, checking cached exercises
2025-07-12 17:21:04,810 - routes.ai.training_routes - INFO - Found cached exercises for user ff
2025-07-12 17:21:04,811 - routes.ai.training_routes - INFO - Returning cached exercises for user ff
2025-07-12 17:21:04,812 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:21:04] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 17:21:05,376 - routes.ai.training_routes - INFO - Training exercises request from user: ff
2025-07-12 17:21:05,377 - routes.ai.training_routes - INFO - Training request data for user ff: answers_count=0
2025-07-12 17:21:05,377 - routes.ai.training_routes - INFO - User ff has no answers, checking cached exercises
2025-07-12 17:21:05,379 - routes.ai.training_routes - INFO - Found cached exercises for user ff
2025-07-12 17:21:05,379 - routes.ai.training_routes - INFO - Returning cached exercises for user ff
2025-07-12 17:21:05,380 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:21:05] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 17:21:09,491 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:21:09] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:23:00,122 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:23:00] "GET /api/me HTTP/1.1" 200 -
2025-07-12 17:23:00,679 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:23:00] "GET /api/role HTTP/1.1" 200 -
2025-07-12 17:23:01,249 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:23:01] "GET /api/profile HTTP/1.1" 200 -
2025-07-12 17:23:02,014 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:23:02] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:44:16,309 - routes.ai.training_routes - INFO - Training exercises request from user: ff
2025-07-12 17:44:16,311 - routes.ai.training_routes - INFO - Training request data for user ff: answers_count=0
2025-07-12 17:44:16,311 - routes.ai.training_routes - INFO - User ff has no answers, checking cached exercises
2025-07-12 17:44:16,312 - routes.ai.training_routes - INFO - Found cached exercises for user ff
2025-07-12 17:44:16,312 - routes.ai.training_routes - INFO - Returning cached exercises for user ff
2025-07-12 17:44:16,314 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:44:16] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 17:44:16,895 - routes.ai.training_routes - INFO - Training exercises request from user: ff
2025-07-12 17:44:16,897 - routes.ai.training_routes - INFO - Training request data for user ff: answers_count=0
2025-07-12 17:44:16,898 - routes.ai.training_routes - INFO - User ff has no answers, checking cached exercises
2025-07-12 17:44:16,901 - routes.ai.training_routes - INFO - Found cached exercises for user ff
2025-07-12 17:44:16,901 - routes.ai.training_routes - INFO - Returning cached exercises for user ff
2025-07-12 17:44:16,902 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:44:16] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 17:44:27,235 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:44:27] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:44:28,853 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:44:28] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:44:51,058 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:44:51] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:45:14,174 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:45:14] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:45:14,728 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:45:14] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:46:59,333 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:46:59] "[31m[1mGET /api/me HTTP/1.1[0m" 401 -
2025-07-12 17:47:16,646 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:47:16] "[31m[1mPOST /api/login HTTP/1.1[0m" 401 -
2025-07-12 17:47:26,021 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:47:26] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-12 17:47:26,136 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:47:26] "POST /api/login HTTP/1.1" 200 -
2025-07-12 17:47:26,174 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:47:26] "GET /api/me HTTP/1.1" 200 -
2025-07-12 17:47:26,209 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:47:26] "GET /api/role HTTP/1.1" 200 -
2025-07-12 17:47:29,299 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:47:29] "POST /api/user-level HTTP/1.1" 200 -
2025-07-12 17:47:29,358 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:47:29] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:48:10,495 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:48:10] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:48:12,034 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:48:12] "GET /api/lessons HTTP/1.1" 200 -
2025-07-12 17:48:14,896 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:48:14] "GET /api/vocabulary HTTP/1.1" 200 -
2025-07-12 17:48:18,714 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:48:18] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:48:20,844 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 17:48:20,845 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 17:48:20,845 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 17:48:20,846 - routes.ai.training_routes - INFO - Generating new training exercises for user Flo
2025-07-12 17:48:20,846 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_training_exercises for user Flo
2025-07-12 17:48:20,847 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 17:48:20,848 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user Flo
2025-07-12 17:48:20,848 - routes.ai.helpers.exercise_helpers - INFO - Detected new user Flo, generating two unique blocks with different contexts
2025-07-12 17:48:20,849 - routes.ai.helpers.exercise_helpers - INFO - Generating blocks for new user Flo
2025-07-12 17:48:20,849 - routes.ai.helpers.exercise_helpers - INFO - Generating first block for new user Flo
2025-07-12 17:48:20,855 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 17:48:20,857 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user Flo
2025-07-12 17:48:20,857 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 0 recent questions for user Flo
2025-07-12 17:48:20,857 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 17:48:20,857 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 17:48:20,858 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 17:48:20,858 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 17:48:20,858 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 17:48:20,858 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=0
2025-07-12 17:48:20,858 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 17:48:20,859 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:20,859 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'Your task is to generate new exercises in JSON format. Use provided memory data to tailor difficulty.'}, {'role': 'user', 'content': '\nYou are generating structured grammar and translation exercises for a German learner.\nThe student\'s level is 2/10 (CEFR A2).\nAdjust sentence complexity and vocabulary accordingly.\n\nHere is the required JSON structure — you must follow it **exactly**:\n\n1. Each exercise must include:\n   - `id`: a unique ID like `"ex1"`\n   - `type`: either `"gap-fill"` or `"translation"`\n   - `question`: a string (either a full sentence with a blank depending on the students level, or a translation task with the same conditions, remember to always put a full sentence)\n   - For "gap-fill":\n     - `options`: list of 4 strings, one of them has to be the correct answer, be sure to include the right answer.\n     - `correctAnswer`: the correct string\n   - For "translation":\n     - `correctAnswer`: the correct German translation\n\n 2. The overall JSON must contain:\n   - `lessonId`, `title`, `instructions`, `level`\n   - `exercises`: list of 3 total exercises (mix of both types)\n   - `feedbackPrompt`\n   - `vocabHelp`: list of vocab entries with:\n       - `word`, `meaning`\n\n⚠️ Do not change field names or format.\n⚠️ Do not include other types like "sentenceCreation", "prompt", or "hint".\n⚠️ All keys must match the example exactly.\n⚠️ Do not repeat or reuse any example sentences from previous exercises or memory.\n⚠️ **NEVER repeat any of these questions the user has seen recently:**\n\n\n⚠️ Always generate new, unique sentences that were not seen in earlier exercises.\n\nHere is an example structure for reference (do not reuse content!):\n{\n  "lessonId": "dynamic-ai-lesson",\n  "title": "AI Generated Exercises",\n  "instructions": "Fill in the blanks or translate the sentences.",\n  "level": "A2",\n  "exercises": [],\n  "feedbackPrompt": "",\n  "vocabHelp": []\n}\n\nHere is the learner’s vocabulary list (prioritize vocab with next_repeat due soon, include one or two per sentence, try to teach the learner new words based):\n[]\n\nHere is the topic memory (form the exercises to train the weaknesses seen in the entries:):\n[\n  {\n    "grammar": "personal pronouns",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "sein",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "haben",\n    "topic": null,\n    "skill_type": "initial"\n  }\n]\nCreate new sentences with new words and topics.\nCreate a new exercise block using the **same structure** and **same field names**, but adapt the **content** to the learner’s weaknesses and level.\n'}], 'temperature': 0.7}
2025-07-12 17:48:20,863 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:28,996 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:29,002 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 17:48:29,002 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1167 characters
2025-07-12 17:48:29,003 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 17:48:29,003 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 17:48:29,004 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 17:48:29,005 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 17:48:29,005 - routes.ai.helpers.exercise_helpers - INFO - Generated first block for new user Flo with 3 exercises
2025-07-12 17:48:29,005 - routes.ai.helpers.exercise_helpers - INFO - Extracted 3 questions from first block for new user Flo
2025-07-12 17:48:29,005 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions, limit=20
2025-07-12 17:48:29,006 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 17:48:29,008 - routes.ai.helpers.exercise_helpers - INFO - No exercise history found for user Flo
2025-07-12 17:48:29,008 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user Flo: 3 total questions
2025-07-12 17:48:29,017 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user Flo
2025-07-12 17:48:29,017 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user Flo
2025-07-12 17:48:29,018 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for Flo after after updating exercise history: {
  "username": "Flo",
  "exercises": null,
  "next_exercises": null,
  "exercises_updated_at": null,
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"She is happy.\", \"___ du ein Buch? (Do you have a book?)\", \"Ich ___ einen Hund. (I have a dog.)\"]"
}
2025-07-12 17:48:29,124 - routes.ai.helpers.exercise_helpers - INFO - Generating second block for new user Flo with different context
2025-07-12 17:48:29,125 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block with variation for new user Flo with 3 exclude questions
2025-07-12 17:48:29,131 - routes.ai.helpers.exercise_helpers - INFO - Using 3 exclude questions as recent questions for variation
2025-07-12 17:48:29,131 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 17:48:29,131 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 17:48:29,131 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 17:48:29,132 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 17:48:29,132 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 17:48:29,132 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 17:48:29,132 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 17:48:29,133 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:29,133 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'Your task is to generate new exercises in JSON format. Use provided memory data to tailor difficulty.'}, {'role': 'user', 'content': '\nYou are generating structured grammar and translation exercises for a German learner.\nThe student\'s level is 2/10 (CEFR A2).\nAdjust sentence complexity and vocabulary accordingly.\n\nHere is the required JSON structure — you must follow it **exactly**:\n\n1. Each exercise must include:\n   - `id`: a unique ID like `"ex1"`\n   - `type`: either `"gap-fill"` or `"translation"`\n   - `question`: a string (either a full sentence with a blank depending on the students level, or a translation task with the same conditions, remember to always put a full sentence)\n   - For "gap-fill":\n     - `options`: list of 4 strings, one of them has to be the correct answer, be sure to include the right answer.\n     - `correctAnswer`: the correct string\n   - For "translation":\n     - `correctAnswer`: the correct German translation\n\n 2. The overall JSON must contain:\n   - `lessonId`, `title`, `instructions`, `level`\n   - `exercises`: list of 3 total exercises (mix of both types)\n   - `feedbackPrompt`\n   - `vocabHelp`: list of vocab entries with:\n       - `word`, `meaning`\n\n⚠️ Do not change field names or format.\n⚠️ Do not include other types like "sentenceCreation", "prompt", or "hint".\n⚠️ All keys must match the example exactly.\n⚠️ Do not repeat or reuse any example sentences from previous exercises or memory.\n⚠️ **NEVER repeat any of these questions the user has seen recently:**\nShe is happy.\n___ du ein Buch? (Do you have a book?)\nIch ___ einen Hund. (I have a dog.)\n\n⚠️ Always generate new, unique sentences that were not seen in earlier exercises.\n\nHere is an example structure for reference (do not reuse content!):\n{\n  "lessonId": "dynamic-ai-lesson",\n  "title": "AI Generated Exercises",\n  "instructions": "Fill in the blanks or translate the sentences.",\n  "level": "A2",\n  "exercises": [],\n  "feedbackPrompt": "",\n  "vocabHelp": []\n}\n\nHere is the learner’s vocabulary list (prioritize vocab with next_repeat due soon, include one or two per sentence, try to teach the learner new words based):\n[]\n\nHere is the topic memory (form the exercises to train the weaknesses seen in the entries:):\n[\n  {\n    "grammar": "personal pronouns",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "sein",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "haben",\n    "topic": null,\n    "skill_type": "initial"\n  }\n]\nCreate new sentences with new words and topics.\nCreate a new exercise block using the **same structure** and **same field names**, but adapt the **content** to the learner’s weaknesses and level.\n'}], 'temperature': 0.7}
2025-07-12 17:48:29,135 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:33,414 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:33,416 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 17:48:33,417 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1071 characters
2025-07-12 17:48:33,417 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 17:48:33,418 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 17:48:33,419 - routes.ai.helpers.exercise_helpers - INFO - Generated 3 exercises in variation block for new user Flo
2025-07-12 17:48:33,419 - routes.ai.helpers.exercise_helpers - INFO - Successfully created AI block with variation for new user Flo: 3 exercises
2025-07-12 17:48:33,420 - routes.ai.helpers.exercise_helpers - INFO - Generated second block for new user Flo with 3 exercises
2025-07-12 17:48:33,420 - routes.ai.helpers.exercise_helpers - INFO - After filtering duplicates for new user Flo: 3 exercises remain
2025-07-12 17:48:33,420 - routes.ai.helpers.exercise_helpers - INFO - Final second block for new user Flo: 3 exercises
2025-07-12 17:48:33,420 - routes.ai.helpers.exercise_helpers - INFO - Storing exercise blocks for new user Flo
2025-07-12 17:48:33,428 - routes.ai.helpers.exercise_helpers - INFO - [DB] ai_user_data for Flo after after storing both blocks: {
  "username": "Flo",
  "exercises": "{\"lessonId\": \"dynamic-ai-lesson-2\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"She is happy.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"___ du ein Buch? (Do you have a book?)\", \"explanation\": \"No explanation.\", \"options\": [\"Hast\", \"Bist\", \"Hat\", \"Ist\"]}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"Ich ___ einen Hund. (I have a dog.)\", \"explanation\": \"No explanation.\", \"options\": [\"ist\", \"bin\", \"habe\", \"hat\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you notice any patterns or common mistakes?\", \"vocabHelp\": [{\"word\": \"habe\", \"meaning\": \"have (I)\"}, {\"word\": \"ist\", \"meaning\": \"is\"}, {\"word\": \"gl\\u00fccklich\", \"meaning\": \"happy\"}, {\"word\": \"Hast\", \"meaning\": \"have (you informal)\"}, {\"word\": \"Buch\", \"meaning\": \"book\"}]}",
  "next_exercises": "{\"lessonId\": \"dynamic-ai-lesson\", \"title\": \"AI Generated Exercises\", \"instructions\": \"Fill in the blanks or translate the sentences.\", \"level\": \"A2\", \"exercises\": [{\"id\": \"ex2\", \"type\": \"translation\", \"question\": \"We are in the garden.\", \"explanation\": \"No explanation.\"}, {\"id\": \"ex3\", \"type\": \"gap-fill\", \"question\": \"___ du einen Stift? (Do you have a pen?)\", \"explanation\": \"No explanation.\", \"options\": [\"Hast\", \"Hat\", \"Haben\", \"Habt\"]}, {\"id\": \"ex1\", \"type\": \"gap-fill\", \"question\": \"___ ist mein Bruder. (He is my brother.)\", \"explanation\": \"No explanation.\", \"options\": [\"Er\", \"Sie\", \"Es\", \"Wir\"]}], \"feedbackPrompt\": \"How did you find these exercises? Did you notice any patterns or common mistakes?\", \"vocabHelp\": [{\"word\": \"der Bruder\", \"meaning\": \"the brother\"}, {\"word\": \"der Garten\", \"meaning\": \"the garden\"}, {\"word\": \"der Stift\", \"meaning\": \"the pen\"}]}",
  "exercises_updated_at": "2025-07-12T17:48:33.420983",
  "weakness_lesson": null,
  "weakness_topic": null,
  "lesson_updated_at": null,
  "exercise_history": "[\"She is happy.\", \"___ du ein Buch? (Do you have a book?)\", \"Ich ___ einen Hund. (I have a dog.)\"]"
}
2025-07-12 17:48:33,428 - routes.ai.helpers.exercise_helpers - INFO - Successfully completed generate_training_exercises for new user Flo
2025-07-12 17:48:33,428 - routes.ai.training_routes - INFO - Returning new training exercises for user Flo
2025-07-12 17:48:33,430 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:48:33] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 17:48:33,469 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 17:48:33,469 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 17:48:33,469 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 17:48:33,470 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 17:48:33,470 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 17:48:33,471 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:48:33] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 17:48:45,006 - routes.ai.exercise_routes - INFO - Exercise submission request for user Flo, block training
2025-07-12 17:48:45,007 - routes.ai.exercise_routes - INFO - Received submission data for user Flo: {
  "answers": {
    "ex2": "Sie ist gl\u00fccklich.",
    "ex3": "Bist",
    "ex1": "ist"
  },
  "exercise_block": {
    "instructions": "Fill in the blanks or translate the sentences.",
    "exercises": [
      {
        "explanation": "No explanation.",
        "id": "ex2",
        "question": "She is happy.",
        "type": "translation"
      },
      {
        "explanation": "No explanation.",
        "id": "ex3",
        "options": [
          "Hast",
          "Bist",
          "Hat",
          "Ist"
        ],
        "question": "___ du ein Buch? (Do you have a book?)",
        "type": "gap-fill"
      },
      {
        "explanation": "No explanation.",
        "id": "ex1",
        "options": [
          "ist",
          "bin",
          "habe",
          "hat"
        ],
        "question": "Ich ___ einen Hund. (I have a dog.)",
        "type": "gap-fill"
      }
    ],
    "vocabHelp": [
      {
        "meaning": "have (I)",
        "word": "habe"
      },
      {
        "meaning": "is",
        "word": "ist"
      },
      {
        "meaning": "happy",
        "word": "gl\u00fccklich"
      },
      {
        "meaning": "have (you informal)",
        "word": "Hast"
      },
      {
        "meaning": "book",
        "word": "Buch"
      }
    ]
  }
}
2025-07-12 17:48:45,007 - routes.ai.exercise_routes - INFO - Parsed submission for user Flo: 3 exercises, 3 answers
2025-07-12 17:48:45,007 - routes.ai.exercise_routes - INFO - Evaluating exercises for user Flo
2025-07-12 17:48:45,007 - routes.ai.helpers.ai_evaluation_helpers - INFO - Starting AI evaluation with mode=strict, exercises_count=3, answers_count=3
2025-07-12 17:48:45,008 - routes.ai.helpers.ai_evaluation_helpers - INFO - Formatted 3 exercises for evaluation
2025-07-12 17:48:45,008 - routes.ai.helpers.ai_evaluation_helpers - INFO - Generated evaluation instructions for mode=strict
2025-07-12 17:48:45,008 - routes.ai.helpers.ai_evaluation_helpers - INFO - Sending evaluation request to Mistral API
2025-07-12 17:48:45,009 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:45,009 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a strict German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': 'Evaluate these answers for a German exercise. Return JSON with \'pass\' (true/false) and a \'results\' list. Each result must include \'id\' and \'correct_answer\'. Mark pass true only if all answers are fully correct.\n[{"id": "ex2", "question": "She is happy.", "type": "translation", "answer": "Sie ist glücklich."}, {"id": "ex3", "question": "___ du ein Buch? (Do you have a book?)", "type": "gap-fill", "answer": "Bist"}, {"id": "ex1", "question": "Ich ___ einen Hund. (I have a dog.)", "type": "gap-fill", "answer": "ist"}]'}], 'temperature': 0.3}
2025-07-12 17:48:45,011 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:46,052 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:46,054 - routes.ai.helpers.ai_evaluation_helpers - INFO - Mistral evaluation response successful
2025-07-12 17:48:46,054 - routes.ai.helpers.ai_evaluation_helpers - INFO - Raw evaluation response length: 253 characters
2025-07-12 17:48:46,055 - routes.ai.helpers.ai_evaluation_helpers - INFO - Successfully parsed evaluation JSON
2025-07-12 17:48:46,056 - routes.ai.exercise_routes - INFO - Evaluation successful for user Flo
2025-07-12 17:48:46,056 - routes.ai.exercise_routes - INFO - Summary for user Flo: {'correct': 1, 'total': 3, 'mistakes': [{'question': '___ du ein Buch? (Do you have a book?)', 'your_answer': 'Bist', 'correct_answer': 'Hast'}, {'question': 'Ich ___ einen Hund. (I have a dog.)', 'your_answer': 'ist', 'correct_answer': 'habe'}]}
2025-07-12 17:48:46,057 - routes.ai.exercise_routes - INFO - Fetching vocab and topic data for user Flo
2025-07-12 17:48:46,062 - routes.ai.exercise_routes - INFO - Got 0 vocab and 3 topic entries for user Flo
2025-07-12 17:48:46,063 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:46,063 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a strict German teacher, answer in english only, and skip any small talk, focus on improvement only'}, {'role': 'user', 'content': "You are a helpful German teacher writing a very short feedback message based on this student's test result.\n\nCorrect: 1 out of 3\n\nMistakes:\nQ: ___ du ein Buch? (Do you have a book?) | Your: Bist | Correct: Hast\nQ: Ich ___ einen Hund. (I have a dog.) | Your: ist | Correct: habe\n\nRepeated grammar issues: None\n\nVocabulary used: None\n\n"}], 'temperature': 0.3}
2025-07-12 17:48:46,064 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:48,072 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:48,075 - routes.ai.exercise_routes - INFO - Generated feedback prompt for user Flo
2025-07-12 17:48:48,075 - routes.ai.exercise_routes - INFO - Saving exercise submission for user Flo
2025-07-12 17:48:48,076 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T17:48:48.076095",
  "event_type": "submission_start",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "answers_count": 3,
    "exercises_count": 3,
    "answers": {
      "ex2": "Sie ist gl\u00fccklich.",
      "ex3": "Bist",
      "ex1": "ist"
    }
  }
}
2025-07-12 17:48:48,078 - routes.ai.helpers.exercise_helpers - INFO - Processing AI answers for user Flo, block training
2025-07-12 17:48:48,079 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing AI answers for user Flo, block training, answers_count=3
2025-07-12 17:48:48,079 - routes.ai.helpers.ai_evaluation_helpers - INFO - Processing 3 exercises for user Flo
2025-07-12 17:48:48,079 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex2 for user Flo: correct=1, quality=5
2025-07-12 17:48:48,080 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:48,080 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': '\nYou are a helpful German teacher. Identify grammar topics used in the following sentence:\n\n"She is happy. sie ist glücklich."\n\nReturn only a JSON list of strings such as:\n["modal verb", "pronoun", "subordinating conjunction"]\n'}], 'temperature': 0.3}
2025-07-12 17:48:48,079 - routes.ai.exercise_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 17:48:48,081 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:48,084 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 17:48:48,084 - routes.ai.exercise_routes - INFO - Exercise submission completed for user Flo, passed=False
2025-07-12 17:48:48,085 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 17:48:48,085 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:48,086 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': 'Give up to 3 alternative ways to say the following sentence in German, with the same meaning and register. Return only a JSON array of strings, no explanations, no extra text, no markdown, no labels.\nSentence: habe'}], 'temperature': 0.3}
2025-07-12 17:48:48,089 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:48,093 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 17:48:48,094 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user Flo
2025-07-12 17:48:48,094 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 17:48:48,099 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 17:48:48,101 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 17:48:48,101 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user Flo
2025-07-12 17:48:48,102 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=0, topic_count=3
2025-07-12 17:48:48,102 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 17:48:48,102 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 17:48:48,102 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 17:48:48,102 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 17:48:48,102 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 17:48:48,103 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 17:48:48,103 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:48,103 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'Your task is to generate new exercises in JSON format. Use provided memory data to tailor difficulty.'}, {'role': 'user', 'content': '\nYou are generating structured grammar and translation exercises for a German learner.\nThe student\'s level is 2/10 (CEFR A2).\nAdjust sentence complexity and vocabulary accordingly.\n\nHere is the required JSON structure — you must follow it **exactly**:\n\n1. Each exercise must include:\n   - `id`: a unique ID like `"ex1"`\n   - `type`: either `"gap-fill"` or `"translation"`\n   - `question`: a string (either a full sentence with a blank depending on the students level, or a translation task with the same conditions, remember to always put a full sentence)\n   - For "gap-fill":\n     - `options`: list of 4 strings, one of them has to be the correct answer, be sure to include the right answer.\n     - `correctAnswer`: the correct string\n   - For "translation":\n     - `correctAnswer`: the correct German translation\n\n 2. The overall JSON must contain:\n   - `lessonId`, `title`, `instructions`, `level`\n   - `exercises`: list of 3 total exercises (mix of both types)\n   - `feedbackPrompt`\n   - `vocabHelp`: list of vocab entries with:\n       - `word`, `meaning`\n\n⚠️ Do not change field names or format.\n⚠️ Do not include other types like "sentenceCreation", "prompt", or "hint".\n⚠️ All keys must match the example exactly.\n⚠️ Do not repeat or reuse any example sentences from previous exercises or memory.\n⚠️ **NEVER repeat any of these questions the user has seen recently:**\nShe is happy.\n___ du ein Buch? (Do you have a book?)\nIch ___ einen Hund. (I have a dog.)\n\n⚠️ Always generate new, unique sentences that were not seen in earlier exercises.\n\nHere is an example structure for reference (do not reuse content!):\n{\n  "lessonId": "dynamic-ai-lesson",\n  "title": "AI Generated Exercises",\n  "instructions": "Fill in the blanks or translate the sentences.",\n  "level": "A2",\n  "exercises": [],\n  "feedbackPrompt": "",\n  "vocabHelp": []\n}\n\nHere is the learner’s vocabulary list (prioritize vocab with next_repeat due soon, include one or two per sentence, try to teach the learner new words based):\n[]\n\nHere is the topic memory (form the exercises to train the weaknesses seen in the entries:):\n[\n  {\n    "grammar": "personal pronouns",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "sein",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "haben",\n    "topic": null,\n    "skill_type": "initial"\n  }\n]\nCreate new sentences with new words and topics.\nCreate a new exercise block using the **same structure** and **same field names**, but adapt the **content** to the learner’s weaknesses and level.\n'}], 'temperature': 0.7}
2025-07-12 17:48:48,104 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:48,596 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:48,599 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex2: ['adjective', 'personal pronoun', 'present tense']
2025-07-12 17:48:48,599 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=adjective, skill=translation
2025-07-12 17:48:48,613 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=translation
2025-07-12 17:48:48,624 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=present tense, skill=translation
2025-07-12 17:48:48,632 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 6 words from exercise ex2 for user Flo
2025-07-12 17:48:48,634 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:48,634 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'happy'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:48:48,635 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:48,693 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:48,694 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:48,694 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': "Given the following exercise, user answer, and correct answer, give a short explanation (1-2 sentences) for a German learner. If the user's answer is correct, explain why. If it's wrong, explain the mistake.\nExercise: Ich ___ einen Hund. (I have a dog.)\nUser answer: ist\nCorrect answer: habe\nReply in English."}], 'temperature': 0.3}
2025-07-12 17:48:48,695 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:49,862 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:49,880 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:49,880 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'She'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:48:49,880 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:51,047 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:51,068 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:51,068 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'ist'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:48:51,070 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:51,485 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:51,487 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:51,487 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': 'Give up to 3 alternative ways to say the following sentence in German, with the same meaning and register. Return only a JSON array of strings, no explanations, no extra text, no markdown, no labels.\nSentence: Sie ist glücklich.'}], 'temperature': 0.3}
2025-07-12 17:48:51,488 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:52,137 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:52,139 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 17:48:52,140 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1056 characters
2025-07-12 17:48:52,140 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 17:48:52,140 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 17:48:52,141 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 17:48:52,142 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 17:48:52,142 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 17:48:52,142 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 17:48:52,142 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 17:48:52,142 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 17:48:52,142 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 17:48:52,152 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 17:48:52,246 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:52,249 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:52,249 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': "Given the following exercise, user answer, and correct answer, give a short explanation (1-2 sentences) for a German learner. If the user's answer is correct, explain why. If it's wrong, explain the mistake.\nExercise: She is happy.\nUser answer: Sie ist glücklich.\nCorrect answer: Sie ist glücklich.\nReply in English."}], 'temperature': 0.3}
2025-07-12 17:48:52,251 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:53,003 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:53,025 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:53,025 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'is'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:48:53,026 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:53,152 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:53,155 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:53,156 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': 'Give up to 3 alternative ways to say the following sentence in German, with the same meaning and register. Return only a JSON array of strings, no explanations, no extra text, no markdown, no labels.\nSentence: Hast'}], 'temperature': 0.3}
2025-07-12 17:48:53,158 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:53,691 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:53,694 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:53,695 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': "Given the following exercise, user answer, and correct answer, give a short explanation (1-2 sentences) for a German learner. If the user's answer is correct, explain why. If it's wrong, explain the mistake.\nExercise: ___ du ein Buch? (Do you have a book?)\nUser answer: Bist\nCorrect answer: Hast\nReply in English."}], 'temperature': 0.3}
2025-07-12 17:48:53,697 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:54,505 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:54,526 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex3 for user Flo: correct=0, quality=2
2025-07-12 17:48:54,526 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:54,527 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': '\nYou are a helpful German teacher. Identify grammar topics used in the following sentence:\n\n"___ du ein Buch? (Do you have a book?) hast"\n\nReturn only a JSON list of strings such as:\n["modal verb", "pronoun", "subordinating conjunction"]\n'}], 'temperature': 0.3}
2025-07-12 17:48:54,528 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:54,898 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:54,900 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:48:54] "POST /api/ai-exercise/training/submit HTTP/1.1" 200 -
2025-07-12 17:48:54,934 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 17:48:54,934 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=3
2025-07-12 17:48:54,934 - routes.ai.training_routes - INFO - User Flo has answers, checking cached next exercises
2025-07-12 17:48:54,935 - routes.ai.training_routes - INFO - Found cached next exercises for user Flo
2025-07-12 17:48:54,936 - routes.ai.training_routes - INFO - Successfully loaded cached next exercises for user Flo
2025-07-12 17:48:54,936 - routes.ai.training_routes - INFO - Storing exercises for user Flo
2025-07-12 17:48:54,940 - routes.ai.training_routes - INFO - Running prefetch next exercises for user Flo
2025-07-12 17:48:54,940 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 17:48:54,941 - routes.ai.training_routes - INFO - Returning preloaded training exercises for user Flo
2025-07-12 17:48:54,941 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 17:48:54,941 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:48:54] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 17:48:54,943 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 17:48:54,943 - routes.ai.helpers.exercise_helpers - INFO - Got 3 recent questions for user Flo
2025-07-12 17:48:54,944 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 17:48:54,946 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 17:48:54,947 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 17:48:54,947 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 3 recent questions for user Flo
2025-07-12 17:48:54,947 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=3, topic_count=3
2025-07-12 17:48:54,947 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 17:48:54,947 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 3 entries
2025-07-12 17:48:54,947 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 17:48:54,947 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 17:48:54,947 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=3
2025-07-12 17:48:54,952 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 17:48:54,952 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:54,952 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'Your task is to generate new exercises in JSON format. Use provided memory data to tailor difficulty.'}, {'role': 'user', 'content': '\nYou are generating structured grammar and translation exercises for a German learner.\nThe student\'s level is 2/10 (CEFR A2).\nAdjust sentence complexity and vocabulary accordingly.\n\nHere is the required JSON structure — you must follow it **exactly**:\n\n1. Each exercise must include:\n   - `id`: a unique ID like `"ex1"`\n   - `type`: either `"gap-fill"` or `"translation"`\n   - `question`: a string (either a full sentence with a blank depending on the students level, or a translation task with the same conditions, remember to always put a full sentence)\n   - For "gap-fill":\n     - `options`: list of 4 strings, one of them has to be the correct answer, be sure to include the right answer.\n     - `correctAnswer`: the correct string\n   - For "translation":\n     - `correctAnswer`: the correct German translation\n\n 2. The overall JSON must contain:\n   - `lessonId`, `title`, `instructions`, `level`\n   - `exercises`: list of 3 total exercises (mix of both types)\n   - `feedbackPrompt`\n   - `vocabHelp`: list of vocab entries with:\n       - `word`, `meaning`\n\n⚠️ Do not change field names or format.\n⚠️ Do not include other types like "sentenceCreation", "prompt", or "hint".\n⚠️ All keys must match the example exactly.\n⚠️ Do not repeat or reuse any example sentences from previous exercises or memory.\n⚠️ **NEVER repeat any of these questions the user has seen recently:**\nShe is happy.\n___ du ein Buch? (Do you have a book?)\nIch ___ einen Hund. (I have a dog.)\n\n⚠️ Always generate new, unique sentences that were not seen in earlier exercises.\n\nHere is an example structure for reference (do not reuse content!):\n{\n  "lessonId": "dynamic-ai-lesson",\n  "title": "AI Generated Exercises",\n  "instructions": "Fill in the blanks or translate the sentences.",\n  "level": "A2",\n  "exercises": [],\n  "feedbackPrompt": "",\n  "vocabHelp": []\n}\n\nHere is the learner’s vocabulary list (prioritize vocab with next_repeat due soon, include one or two per sentence, try to teach the learner new words based):\n[]\n\nHere is the topic memory (form the exercises to train the weaknesses seen in the entries:):\n[\n  {\n    "grammar": "personal pronouns",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "sein",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "haben",\n    "topic": null,\n    "skill_type": "initial"\n  }\n]\nCreate new sentences with new words and topics.\nCreate a new exercise block using the **same structure** and **same field names**, but adapt the **content** to the learner’s weaknesses and level.\n'}], 'temperature': 0.7}
2025-07-12 17:48:54,953 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:55,091 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:55,093 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex3: ['indefinite article', 'interrogative sentence', 'personal pronoun', 'verb conjugation']
2025-07-12 17:48:55,093 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=indefinite article, skill=gap-fill
2025-07-12 17:48:55,108 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=interrogative sentence, skill=gap-fill
2025-07-12 17:48:55,118 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=personal pronoun, skill=gap-fill
2025-07-12 17:48:55,126 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=verb conjugation, skill=gap-fill
2025-07-12 17:48:55,132 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 8 words from exercise ex3 for user Flo
2025-07-12 17:48:55,134 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:55,134 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'have'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:48:55,135 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:56,705 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:56,728 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:48:56,728 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'Do'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:48:56,729 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:48:58,097 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:48:58,099 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 17:48:58,100 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 998 characters
2025-07-12 17:48:58,100 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 17:48:58,100 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 17:48:58,101 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 17:48:58,102 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 17:48:58,102 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 17:48:58,102 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 17:48:58,102 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 17:48:58,103 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 17:48:58,103 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 17:48:58,112 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 17:48:58,157 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:48:58] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:49:01,176 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:01,209 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:49:01,209 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'hast'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:49:01,210 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:49:02,035 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:02,052 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:49:02,052 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'you'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:49:02,053 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:49:07,497 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:07,515 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:49:07,516 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'Buch'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:49:07,517 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:49:12,222 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:12,245 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:49:12,246 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'book'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:49:12,247 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:49:13,775 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:13,806 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:49:13,807 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'du'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:49:13,811 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:49:15,113 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:15,129 - routes.ai.helpers.ai_evaluation_helpers - INFO - Exercise ex1 for user Flo: correct=0, quality=2
2025-07-12 17:49:15,129 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:49:15,129 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German teacher. Always use Markdown for tables, lists, and formatting.'}, {'role': 'user', 'content': '\nYou are a helpful German teacher. Identify grammar topics used in the following sentence:\n\n"Ich ___ einen Hund. (I have a dog.) habe"\n\nReturn only a JSON list of strings such as:\n["modal verb", "pronoun", "subordinating conjunction"]\n'}], 'temperature': 0.3}
2025-07-12 17:49:15,130 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:49:15,748 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:15,751 - routes.ai.helpers.ai_evaluation_helpers - INFO - Detected features for exercise ex1: ['indefinite article', 'present tense', 'subject-verb agreement', 'verb conjugation']
2025-07-12 17:49:15,751 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=indefinite article, skill=gap-fill
2025-07-12 17:49:15,766 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=present tense, skill=gap-fill
2025-07-12 17:49:15,775 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=subject-verb agreement, skill=gap-fill
2025-07-12 17:49:15,783 - routes.ai.helpers.ai_evaluation_helpers - INFO - Updating topic memory for user Flo, feature=verb conjugation, skill=gap-fill
2025-07-12 17:49:15,789 - routes.ai.helpers.ai_evaluation_helpers - INFO - Extracted 7 words from exercise ex1 for user Flo
2025-07-12 17:49:15,791 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:49:15,791 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'habe'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:49:15,792 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:49:17,292 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:17,310 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:49:17,310 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'I'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:49:17,311 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:49:18,125 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:18,150 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:49:18,150 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'Ich'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:49:18,151 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:49:19,136 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:19,152 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:49:19,152 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'Hund'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:49:19,154 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:49:21,980 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:22,004 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:49:22,005 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are a helpful German linguist.'}, {'role': 'user', 'content': "Give dictionary info for the German word 'dog'.\nReturn JSON with keys base_form, type, article, translation, info. Use null for article if not a noun."}], 'temperature': 0.3}
2025-07-12 17:49:22,007 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:49:23,669 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:23,684 - routes.ai.helpers.ai_evaluation_helpers - INFO - Completed processing AI answers for user Flo: 11 results
2025-07-12 17:49:23,685 - routes.ai.helpers.exercise_helpers - INFO - Checking auto level up for user Flo
2025-07-12 17:49:23,689 - routes.ai.helpers.exercise_helpers - INFO - Inserting exercise submission for user Flo, block training
2025-07-12 17:49:23,695 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions
2025-07-12 17:49:23,695 - routes.ai.helpers.exercise_helpers - INFO - Updating exercise history for user Flo with 3 new questions, limit=20
2025-07-12 17:49:23,696 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 17:49:23,697 - routes.ai.helpers.exercise_helpers - INFO - Found 3 recent questions for user Flo
2025-07-12 17:49:23,697 - routes.ai.helpers.exercise_helpers - INFO - Updated history for user Flo: 6 total questions
2025-07-12 17:49:23,702 - routes.ai.helpers.exercise_helpers - INFO - Database commit successful for user Flo
2025-07-12 17:49:23,702 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored updated exercise history for user Flo
2025-07-12 17:49:23,702 - routes.ai.helpers.exercise_helpers - INFO - Prefetching next exercises for user Flo
2025-07-12 17:49:23,703 - routes.ai.helpers.exercise_helpers - INFO - Starting prefetch_next_exercises for user Flo
2025-07-12 17:49:23,704 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 17:49:23,704 - routes.ai.helpers.exercise_helpers - INFO - EXERCISE_EVENT: {
  "timestamp": "2025-07-12T17:49:23.704495",
  "event_type": "submission_complete",
  "username": "Flo",
  "details": {
    "block_id": "training",
    "new_questions_count": 3
  }
}
2025-07-12 17:49:23,707 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user Flo
2025-07-12 17:49:23,707 - routes.ai.helpers.exercise_helpers - INFO - Got 6 recent questions for user Flo
2025-07-12 17:49:23,707 - routes.ai.helpers.exercise_helpers - INFO - Creating AI block for user Flo
2025-07-12 17:49:23,710 - routes.ai.helpers.exercise_helpers - INFO - Getting recent exercise questions for user Flo, limit=20
2025-07-12 17:49:23,712 - routes.ai.helpers.exercise_helpers - INFO - Found 6 recent questions for user Flo
2025-07-12 17:49:23,712 - routes.ai.helpers.helpers - INFO - _create_ai_block: Got 6 recent questions for user Flo
2025-07-12 17:49:23,712 - routes.ai.helpers.exercise_helpers - INFO - Starting generate_new_exercises with level=2, vocab_count=11, topic_count=9
2025-07-12 17:49:23,712 - routes.ai.helpers.exercise_helpers - INFO - Processing topic memory for exercise generation
2025-07-12 17:49:23,712 - routes.ai.helpers.exercise_helpers - INFO - Filtered topic memory: 5 entries
2025-07-12 17:49:23,712 - routes.ai.helpers.exercise_helpers - INFO - Processing vocabulary for exercise generation
2025-07-12 17:49:23,712 - routes.ai.helpers.exercise_helpers - INFO - Filtered vocabulary: 0 entries
2025-07-12 17:49:23,713 - routes.ai.helpers.exercise_helpers - INFO - Preparing prompt with level=2, cefr_level=A2, recent_questions_count=6
2025-07-12 17:49:23,721 - routes.ai.helpers.exercise_helpers - INFO - Sending request to Mistral API
2025-07-12 17:49:23,721 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:49:23,721 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'Your task is to generate new exercises in JSON format. Use provided memory data to tailor difficulty.'}, {'role': 'user', 'content': '\nYou are generating structured grammar and translation exercises for a German learner.\nThe student\'s level is 2/10 (CEFR A2).\nAdjust sentence complexity and vocabulary accordingly.\n\nHere is the required JSON structure — you must follow it **exactly**:\n\n1. Each exercise must include:\n   - `id`: a unique ID like `"ex1"`\n   - `type`: either `"gap-fill"` or `"translation"`\n   - `question`: a string (either a full sentence with a blank depending on the students level, or a translation task with the same conditions, remember to always put a full sentence)\n   - For "gap-fill":\n     - `options`: list of 4 strings, one of them has to be the correct answer, be sure to include the right answer.\n     - `correctAnswer`: the correct string\n   - For "translation":\n     - `correctAnswer`: the correct German translation\n\n 2. The overall JSON must contain:\n   - `lessonId`, `title`, `instructions`, `level`\n   - `exercises`: list of 3 total exercises (mix of both types)\n   - `feedbackPrompt`\n   - `vocabHelp`: list of vocab entries with:\n       - `word`, `meaning`\n\n⚠️ Do not change field names or format.\n⚠️ Do not include other types like "sentenceCreation", "prompt", or "hint".\n⚠️ All keys must match the example exactly.\n⚠️ Do not repeat or reuse any example sentences from previous exercises or memory.\n⚠️ **NEVER repeat any of these questions the user has seen recently:**\nShe is happy.\n___ du ein Buch? (Do you have a book?)\nIch ___ einen Hund. (I have a dog.)\nShe is happy.\n___ du ein Buch? (Do you have a book?)\nIch ___ einen Hund. (I have a dog.)\n\n⚠️ Always generate new, unique sentences that were not seen in earlier exercises.\n\nHere is an example structure for reference (do not reuse content!):\n{\n  "lessonId": "dynamic-ai-lesson",\n  "title": "AI Generated Exercises",\n  "instructions": "Fill in the blanks or translate the sentences.",\n  "level": "A2",\n  "exercises": [],\n  "feedbackPrompt": "",\n  "vocabHelp": []\n}\n\nHere is the learner’s vocabulary list (prioritize vocab with next_repeat due soon, include one or two per sentence, try to teach the learner new words based):\n[]\n\nHere is the topic memory (form the exercises to train the weaknesses seen in the entries:):\n[\n  {\n    "grammar": "personal pronouns",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "sein",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "haben",\n    "topic": null,\n    "skill_type": "initial"\n  },\n  {\n    "grammar": "interrogative sentence",\n    "topic": "food",\n    "skill_type": "gap-fill"\n  },\n  {\n    "grammar": "personal pronoun",\n    "topic": "family",\n    "skill_type": "gap-fill"\n  }\n]\nCreate new sentences with new words and topics.\nCreate a new exercise block using the **same structure** and **same field names**, but adapt the **content** to the learner’s weaknesses and level.\n'}], 'temperature': 0.7}
2025-07-12 17:49:23,722 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:49:28,480 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:28,482 - routes.ai.helpers.exercise_helpers - INFO - Mistral API response successful
2025-07-12 17:49:28,483 - routes.ai.helpers.exercise_helpers - INFO - Raw API response length: 1092 characters
2025-07-12 17:49:28,483 - routes.ai.helpers.exercise_helpers - INFO - Successfully parsed JSON response
2025-07-12 17:49:28,483 - routes.ai.helpers.exercise_helpers - INFO - Exercise generation successful, returning 3 exercises
2025-07-12 17:49:28,484 - routes.ai.helpers.helpers - INFO - _create_ai_block: Generated 3 exercises for user Flo
2025-07-12 17:49:28,485 - routes.ai.helpers.helpers - INFO - _create_ai_block: Final block has 3 exercises for user Flo
2025-07-12 17:49:28,486 - routes.ai.helpers.exercise_helpers - INFO - AI block created for user Flo: True
2025-07-12 17:49:28,486 - routes.ai.helpers.exercise_helpers - INFO - Filtering exercises for user Flo to avoid duplicates
2025-07-12 17:49:28,486 - routes.ai.helpers.exercise_helpers - INFO - After filtering: 3 exercises for user Flo
2025-07-12 17:49:28,487 - routes.ai.helpers.exercise_helpers - INFO - Final next block for user Flo: 3 exercises
2025-07-12 17:49:28,487 - routes.ai.helpers.exercise_helpers - INFO - Storing next exercises for user Flo
2025-07-12 17:49:28,497 - routes.ai.helpers.exercise_helpers - INFO - Successfully stored next exercises for user Flo
2025-07-12 17:49:41,053 - routes.ai.training_routes - INFO - Training exercises request from user: Flo
2025-07-12 17:49:41,055 - routes.ai.training_routes - INFO - Training request data for user Flo: answers_count=0
2025-07-12 17:49:41,055 - routes.ai.training_routes - INFO - User Flo has no answers, checking cached exercises
2025-07-12 17:49:41,056 - routes.ai.training_routes - INFO - Found cached exercises for user Flo
2025-07-12 17:49:41,057 - routes.ai.training_routes - INFO - Returning cached exercises for user Flo
2025-07-12 17:49:41,058 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:49:41] "POST /api/training-exercises HTTP/1.1" 200 -
2025-07-12 17:49:43,705 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:49:43] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:49:57,882 - root - INFO - Sending request to Mistral API: https://api.mistral.ai/v1/chat/completions
2025-07-12 17:49:57,883 - root - DEBUG - Request payload: {'model': 'mistral-medium', 'messages': [{'role': 'system', 'content': 'You are an assistant for the XplorED app. Use the app and user info to answer questions about the platform, features, or user progress. Always be helpful and specific.'}, {'role': 'user', 'content': 'App info: XplorED is a German learning platform. Features include: user management, AI-powered exercises (gap-fills, translations, sentence ordering), vocab trainer with spaced repetition, lesson progress tracking, skill levels, feedback, and admin tools. You can ask about your progress, how to use features, or for feedback on your learning.\nUser info: Skill level: 2. Recent results: No recent results.. Vocab words: 11. Weakest topics: haben (100% weak), personal pronouns (100% weak), sein (100% weak). Lesson progress: No recent lessons.. User question: Whats is my current state of learning in this platform'}], 'temperature': 0.3, 'stream': True}
2025-07-12 17:49:57,886 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.mistral.ai:443
2025-07-12 17:49:58,982 - urllib3.connectionpool - DEBUG - https://api.mistral.ai:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2025-07-12 17:49:58,986 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:49:58] "POST /api/ask-ai-stream HTTP/1.1" 200 -
2025-07-12 17:50:05,070 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:50:05] "POST /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:50:05,150 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:50:05] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 17:50:28,919 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:50:28] "GET /api/user-level HTTP/1.1" 200 -
2025-07-12 17:50:52,391 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 17:50:52] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-12 18:12:35,169 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 18:12:35] "[31m[1mGET /api/user-level HTTP/1.1[0m" 401 -
2025-07-12 18:12:35,171 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 18:12:35] "[31m[1mGET /api/me HTTP/1.1[0m" 401 -
2025-07-12 18:12:35,173 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 18:12:35] "[31m[1mGET /api/user-level HTTP/1.1[0m" 401 -
2025-07-12 18:12:35,197 - werkzeug - INFO - 172.18.0.3 - - [12/Jul/2025 18:12:35] "[31m[1mGET /api/user-level HTTP/1.1[0m" 401 -
2025-07-13 07:04:36,681 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-13 07:04:36,681 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-13 07:04:36,682 - werkzeug - INFO -  * Restarting with stat
2025-07-13 07:04:37,513 - werkzeug - WARNING -  * Debugger is active!
2025-07-13 07:04:37,514 - werkzeug - INFO -  * Debugger PIN: 605-772-736
2025-07-13 07:10:53,078 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:10:53] "[31m[1mGET /api/me HTTP/1.1[0m" 401 -
2025-07-13 07:10:53,080 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:10:53] "[31m[1mPOST /api/training-exercises HTTP/1.1[0m" 401 -
2025-07-13 07:10:57,528 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:10:57] "[31m[1mPOST /api/login HTTP/1.1[0m" 401 -
2025-07-13 07:11:02,163 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:11:02] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-13 07:11:02,245 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:11:02] "POST /api/login HTTP/1.1" 200 -
2025-07-13 07:11:02,252 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:11:02] "GET /api/me HTTP/1.1" 200 -
2025-07-13 07:11:02,258 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:11:02] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:11:04,974 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:11:04] "POST /api/user-level HTTP/1.1" 200 -
2025-07-13 07:11:05,001 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:11:05] "GET /api/user-level HTTP/1.1" 200 -
2025-07-13 07:21:11,390 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:21:11] "[31m[1mGET /api/me HTTP/1.1[0m" 401 -
2025-07-13 07:21:55,719 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:21:55] "POST /api/login HTTP/1.1" 200 -
2025-07-13 07:21:55,746 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:21:55] "GET /api/me HTTP/1.1" 200 -
2025-07-13 07:21:55,771 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:21:55] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:21:55,896 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:21:55] "GET /api/user-level HTTP/1.1" 200 -
2025-07-13 07:23:55,155 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:23:55] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-13 07:24:00,210 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:24:00] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-13 07:24:02,923 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:24:02] "GET /api/mistral-chat-history HTTP/1.1" 200 -
2025-07-13 07:24:07,477 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:24:07] "GET /api/user-level HTTP/1.1" 200 -
2025-07-13 07:30:04,567 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:30:04] "[31m[1mGET /api/me HTTP/1.1[0m" 401 -
2025-07-13 07:30:18,049 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:30:18] "POST /api/admin/login HTTP/1.1" 200 -
2025-07-13 07:30:18,183 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:30:18] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:30:18,228 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:30:18] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:30:18,311 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:30:18] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-13 07:30:18,330 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:30:18] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-13 07:30:18,338 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:30:18] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-13 07:30:18,339 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:30:18] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-13 07:31:52,609 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:31:52] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:31:52,690 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:31:52] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:31:52,755 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:31:52] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-13 07:31:52,758 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:31:52] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-13 07:31:52,759 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:31:52] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-13 07:31:52,777 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:31:52] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-13 07:32:17,914 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:17] "[31m[1mGET /api/me HTTP/1.1[0m" 401 -
2025-07-13 07:32:17,918 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:17] "[31m[1mGET /api/user-level HTTP/1.1[0m" 401 -
2025-07-13 07:32:17,910 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:17] "[31m[1mGET /api/user-level HTTP/1.1[0m" 401 -
2025-07-13 07:32:18,399 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:18] "[31m[1mGET /api/me HTTP/1.1[0m" 401 -
2025-07-13 07:32:18,400 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:18] "[31m[1mGET /api/user-level HTTP/1.1[0m" 401 -
2025-07-13 07:32:18,403 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:18] "[31m[1mGET /api/user-level HTTP/1.1[0m" 401 -
2025-07-13 07:32:18,758 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:18] "[31m[1mGET /api/user-level HTTP/1.1[0m" 401 -
2025-07-13 07:32:22,153 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:22] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:32:22,155 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:22] "GET /api/me HTTP/1.1" 200 -
2025-07-13 07:32:22,170 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:22] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:32:22,187 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:22] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:32:22,190 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:22] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-13 07:32:22,195 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:22] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-13 07:32:22,195 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:22] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-13 07:32:22,197 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:22] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-13 07:32:29,654 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:29] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:32:29,665 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:29] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-13 07:32:34,198 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:34] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:32:34,219 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:34] "GET /api/user-level HTTP/1.1" 200 -
2025-07-13 07:32:34,230 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:34] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:32:34,281 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:34] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-13 07:32:34,282 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:34] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-13 07:32:34,283 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:34] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-13 07:32:34,284 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:34] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-13 07:32:41,756 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:41] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:32:41,762 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:41] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-13 07:32:45,416 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:45] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:32:45,524 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:45] "GET /api/user-level HTTP/1.1" 200 -
2025-07-13 07:32:45,529 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:45] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:32:45,664 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:45] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-13 07:32:45,667 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:45] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-13 07:32:45,678 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:45] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-13 07:32:45,682 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:45] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-13 07:32:47,471 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:47] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:32:47,479 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:32:47] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-13 07:34:04,369 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:34:04] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-13 07:34:04,407 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:34:04] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:34:26,109 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:34:26] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:34:26,118 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:34:26] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-13 07:34:45,056 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:34:45] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:34:45,065 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:34:45] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-13 07:34:52,786 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:34:52] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:34:52,826 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:34:52] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-13 07:35:00,080 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:00] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:35:00,107 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:00] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:35:00,342 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:00] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-13 07:35:00,359 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:00] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-13 07:35:00,361 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:00] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-13 07:35:00,396 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:00] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-13 07:35:02,007 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:02] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:35:02,012 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:02] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-13 07:35:36,223 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:36] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:35:36,235 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:36] "GET /api/admin/users HTTP/1.1" 200 -
2025-07-13 07:35:52,435 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:52] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:35:52,464 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:52] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:35:52,505 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:52] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-13 07:35:52,508 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:52] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-13 07:35:52,515 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:52] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-13 07:35:52,522 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:35:52] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-13 07:36:22,984 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:36:22] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:36:23,763 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:36:23] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:36:23,900 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:36:23] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-13 07:36:23,902 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:36:23] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-13 07:36:23,907 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:36:23] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-13 07:36:23,915 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:36:23] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-13 07:36:46,082 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:36:46] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:36:46,096 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:36:46] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:36:46,121 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:36:46] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-13 07:36:46,125 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:36:46] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-13 07:36:46,126 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:36:46] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-13 07:36:46,130 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:36:46] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-13 07:41:43,543 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:41:43] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:41:43,547 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:41:43] "GET /api/me HTTP/1.1" 200 -
2025-07-13 07:41:43,566 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:41:43] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:41:43,582 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:41:43] "GET /api/role HTTP/1.1" 200 -
2025-07-13 07:41:43,592 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:41:43] "GET /api/admin/lesson-content HTTP/1.1" 200 -
2025-07-13 07:41:43,594 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:41:43] "GET /api/admin/results HTTP/1.1" 200 -
2025-07-13 07:41:43,597 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:41:43] "GET /api/support/feedback HTTP/1.1" 200 -
2025-07-13 07:41:43,625 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 07:41:43] "GET /api/admin/lesson-progress-summary HTTP/1.1" 200 -
2025-07-13 07:46:08,578 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.10:5050
2025-07-13 07:46:08,580 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-13 07:46:08,582 - werkzeug - INFO -  * Restarting with stat
2025-07-13 07:46:17,229 - werkzeug - WARNING -  * Debugger is active!
2025-07-13 07:46:17,253 - werkzeug - INFO -  * Debugger PIN: 790-600-333
2025-07-13 07:50:26,954 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.10:5050
2025-07-13 07:50:26,955 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-13 07:50:26,962 - werkzeug - INFO -  * Restarting with stat
2025-07-13 07:50:36,151 - werkzeug - WARNING -  * Debugger is active!
2025-07-13 07:50:36,170 - werkzeug - INFO -  * Debugger PIN: 790-600-333
2025-07-13 07:59:31,021 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.10:5050
2025-07-13 07:59:31,022 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-13 07:59:31,027 - werkzeug - INFO -  * Restarting with stat
2025-07-13 07:59:38,202 - werkzeug - WARNING -  * Debugger is active!
2025-07-13 07:59:38,212 - werkzeug - INFO -  * Debugger PIN: 790-600-333
2025-07-13 08:03:36,033 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.10:5050
2025-07-13 08:03:36,035 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-13 08:03:36,037 - werkzeug - INFO -  * Restarting with stat
2025-07-13 08:03:42,797 - werkzeug - WARNING -  * Debugger is active!
2025-07-13 08:03:42,809 - werkzeug - INFO -  * Debugger PIN: 790-600-333
2025-07-13 08:08:01,385 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://172.18.0.4:5050
2025-07-13 08:08:01,387 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-07-13 08:08:01,397 - werkzeug - INFO -  * Restarting with stat
2025-07-13 08:08:10,181 - werkzeug - WARNING -  * Debugger is active!
2025-07-13 08:08:10,218 - werkzeug - INFO -  * Debugger PIN: 605-772-736
2025-07-13 08:08:10,464 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 08:08:10] "[31m[1mPOST /api/login HTTP/1.1[0m" 401 -
2025-07-13 08:08:22,769 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 08:08:22] "POST /api/login HTTP/1.1" 200 -
2025-07-13 08:08:23,278 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 08:08:23] "GET /api/me HTTP/1.1" 200 -
2025-07-13 08:08:23,530 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 08:08:23] "GET /api/role HTTP/1.1" 200 -
2025-07-13 08:08:23,700 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 08:08:23] "GET /api/user-level HTTP/1.1" 200 -
2025-07-13 08:08:36,550 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 08:08:36] "[31m[1mPOST /api/login HTTP/1.1[0m" 401 -
2025-07-13 08:08:42,572 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 08:08:42] "[35m[1mPOST /api/signup HTTP/1.1[0m" 201 -
2025-07-13 08:08:43,628 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 08:08:43] "POST /api/login HTTP/1.1" 200 -
2025-07-13 08:08:43,730 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 08:08:43] "GET /api/me HTTP/1.1" 200 -
2025-07-13 08:08:43,753 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 08:08:43] "GET /api/role HTTP/1.1" 200 -
2025-07-13 08:08:49,009 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 08:08:49] "POST /api/user-level HTTP/1.1" 200 -
2025-07-13 08:08:49,091 - werkzeug - INFO - 172.18.0.2 - - [13/Jul/2025 08:08:49] "GET /api/user-level HTTP/1.1" 200 -
